(()=>{var __webpack_modules__={5241:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.issue=t.issueCommand=void 0;const a=i(r(2037));const s=r(5278);function issueCommand(e,t,r){const n=new Command(e,t,r);process.stdout.write(n.toString()+a.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const l="::";class Command{constructor(e,t,r){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=r}toString(){let e=l+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(t){t=false}else{e+=","}e+=`${r}=${escapeProperty(n)}`}}}}e+=`${l}${escapeData(this.message)}`;return e}}function escapeData(e){return s.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return s.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},2186:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);o(t,e);return t};var a=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.getIDToken=t.getState=t.saveState=t.group=t.endGroup=t.startGroup=t.info=t.notice=t.warning=t.error=t.debug=t.isDebug=t.setFailed=t.setCommandEcho=t.setOutput=t.getBooleanInput=t.getMultilineInput=t.getInput=t.addPath=t.setSecret=t.exportVariable=t.ExitCode=void 0;const s=r(5241);const l=r(717);const u=r(5278);const c=i(r(2037));const f=i(r(1017));const d=r(5840);const h=r(8041);var p;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(p=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const r=u.toCommandValue(t);process.env[e]=r;const n=process.env["GITHUB_ENV"]||"";if(n){const t=`ghadelimiter_${d.v4()}`;if(e.includes(t)){throw new Error(`Unexpected input: name should not contain the delimiter "${t}"`)}if(r.includes(t)){throw new Error(`Unexpected input: value should not contain the delimiter "${t}"`)}const n=`${e}<<${t}${c.EOL}${r}${c.EOL}${t}`;l.issueCommand("ENV",n)}else{s.issueCommand("set-env",{name:e},r)}}t.exportVariable=exportVariable;function setSecret(e){s.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){const t=process.env["GITHUB_PATH"]||"";if(t){l.issueCommand("PATH",e)}else{s.issueCommand("add-path",{},e)}process.env["PATH"]=`${e}${f.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r){throw new Error(`Input required and not supplied: ${e}`)}if(t&&t.trimWhitespace===false){return r}return r.trim()}t.getInput=getInput;function getMultilineInput(e,t){const r=getInput(e,t).split("\n").filter((e=>e!==""));return r}t.getMultilineInput=getMultilineInput;function getBooleanInput(e,t){const r=["true","True","TRUE"];const n=["false","False","FALSE"];const o=getInput(e,t);if(r.includes(o))return true;if(n.includes(o))return false;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\n`+`Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}t.getBooleanInput=getBooleanInput;function setOutput(e,t){process.stdout.write(c.EOL);s.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setCommandEcho(e){s.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=p.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){s.issueCommand("debug",{},e)}t.debug=debug;function error(e,t={}){s.issueCommand("error",u.toCommandProperties(t),e instanceof Error?e.toString():e)}t.error=error;function warning(e,t={}){s.issueCommand("warning",u.toCommandProperties(t),e instanceof Error?e.toString():e)}t.warning=warning;function notice(e,t={}){s.issueCommand("notice",u.toCommandProperties(t),e instanceof Error?e.toString():e)}t.notice=notice;function info(e){process.stdout.write(e+c.EOL)}t.info=info;function startGroup(e){s.issue("group",e)}t.startGroup=startGroup;function endGroup(){s.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return a(this,void 0,void 0,(function*(){startGroup(e);let r;try{r=yield t()}finally{endGroup()}return r}))}t.group=group;function saveState(e,t){s.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState;function getIDToken(e){return a(this,void 0,void 0,(function*(){return yield h.OidcClient.getIDToken(e)}))}t.getIDToken=getIDToken;var m=r(1327);Object.defineProperty(t,"summary",{enumerable:true,get:function(){return m.summary}});var y=r(1327);Object.defineProperty(t,"markdownSummary",{enumerable:true,get:function(){return y.markdownSummary}});var b=r(2981);Object.defineProperty(t,"toPosixPath",{enumerable:true,get:function(){return b.toPosixPath}});Object.defineProperty(t,"toWin32Path",{enumerable:true,get:function(){return b.toWin32Path}});Object.defineProperty(t,"toPlatformPath",{enumerable:true,get:function(){return b.toPlatformPath}})},717:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.issueCommand=void 0;const a=i(r(7147));const s=i(r(2037));const l=r(5278);function issueCommand(e,t){const r=process.env[`GITHUB_${e}`];if(!r){throw new Error(`Unable to find environment variable for file command ${e}`)}if(!a.existsSync(r)){throw new Error(`Missing file at path: ${r}`)}a.appendFileSync(r,`${l.toCommandValue(t)}${s.EOL}`,{encoding:"utf8"})}t.issueCommand=issueCommand},8041:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.OidcClient=void 0;const o=r(6255);const i=r(5526);const a=r(2186);class OidcClient{static createHttpClient(e=true,t=10){const r={allowRetries:e,maxRetries:t};return new o.HttpClient("actions/oidc-client",[new i.BearerCredentialHandler(OidcClient.getRequestToken())],r)}static getRequestToken(){const e=process.env["ACTIONS_ID_TOKEN_REQUEST_TOKEN"];if(!e){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable")}return e}static getIDTokenUrl(){const e=process.env["ACTIONS_ID_TOKEN_REQUEST_URL"];if(!e){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable")}return e}static getCall(e){var t;return n(this,void 0,void 0,(function*(){const r=OidcClient.createHttpClient();const n=yield r.getJson(e).catch((e=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${e.statusCode}\n \n        Error Message: ${e.result.message}`)}));const o=(t=n.result)===null||t===void 0?void 0:t.value;if(!o){throw new Error("Response json body do not have ID Token field")}return o}))}static getIDToken(e){return n(this,void 0,void 0,(function*(){try{let t=OidcClient.getIDTokenUrl();if(e){const r=encodeURIComponent(e);t=`${t}&audience=${r}`}a.debug(`ID token url is ${t}`);const r=yield OidcClient.getCall(t);a.setSecret(r);return r}catch(e){throw new Error(`Error message: ${e.message}`)}}))}}t.OidcClient=OidcClient},2981:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.toPlatformPath=t.toWin32Path=t.toPosixPath=void 0;const a=i(r(1017));function toPosixPath(e){return e.replace(/[\\]/g,"/")}t.toPosixPath=toPosixPath;function toWin32Path(e){return e.replace(/[/]/g,"\\")}t.toWin32Path=toWin32Path;function toPlatformPath(e){return e.replace(/[/\\]/g,a.sep)}t.toPlatformPath=toPlatformPath},1327:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.summary=t.markdownSummary=t.SUMMARY_DOCS_URL=t.SUMMARY_ENV_VAR=void 0;const o=r(2037);const i=r(7147);const{access:a,appendFile:s,writeFile:l}=i.promises;t.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";t.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";class Summary{constructor(){this._buffer=""}filePath(){return n(this,void 0,void 0,(function*(){if(this._filePath){return this._filePath}const e=process.env[t.SUMMARY_ENV_VAR];if(!e){throw new Error(`Unable to find environment variable for $${t.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`)}try{yield a(e,i.constants.R_OK|i.constants.W_OK)}catch(t){throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}this._filePath=e;return this._filePath}))}wrap(e,t,r={}){const n=Object.entries(r).map((([e,t])=>` ${e}="${t}"`)).join("");if(!t){return`<${e}${n}>`}return`<${e}${n}>${t}</${e}>`}write(e){return n(this,void 0,void 0,(function*(){const t=!!(e===null||e===void 0?void 0:e.overwrite);const r=yield this.filePath();const n=t?l:s;yield n(r,this._buffer,{encoding:"utf8"});return this.emptyBuffer()}))}clear(){return n(this,void 0,void 0,(function*(){return this.emptyBuffer().write({overwrite:true})}))}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){this._buffer="";return this}addRaw(e,t=false){this._buffer+=e;return t?this.addEOL():this}addEOL(){return this.addRaw(o.EOL)}addCodeBlock(e,t){const r=Object.assign({},t&&{lang:t});const n=this.wrap("pre",this.wrap("code",e),r);return this.addRaw(n).addEOL()}addList(e,t=false){const r=t?"ol":"ul";const n=e.map((e=>this.wrap("li",e))).join("");const o=this.wrap(r,n);return this.addRaw(o).addEOL()}addTable(e){const t=e.map((e=>{const t=e.map((e=>{if(typeof e==="string"){return this.wrap("td",e)}const{header:t,data:r,colspan:n,rowspan:o}=e;const i=t?"th":"td";const a=Object.assign(Object.assign({},n&&{colspan:n}),o&&{rowspan:o});return this.wrap(i,r,a)})).join("");return this.wrap("tr",t)})).join("");const r=this.wrap("table",t);return this.addRaw(r).addEOL()}addDetails(e,t){const r=this.wrap("details",this.wrap("summary",e)+t);return this.addRaw(r).addEOL()}addImage(e,t,r){const{width:n,height:o}=r||{};const i=Object.assign(Object.assign({},n&&{width:n}),o&&{height:o});const a=this.wrap("img",null,Object.assign({src:e,alt:t},i));return this.addRaw(a).addEOL()}addHeading(e,t){const r=`h${t}`;const n=["h1","h2","h3","h4","h5","h6"].includes(r)?r:"h1";const o=this.wrap(n,e);return this.addRaw(o).addEOL()}addSeparator(){const e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){const e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,t){const r=Object.assign({},t&&{cite:t});const n=this.wrap("blockquote",e,r);return this.addRaw(n).addEOL()}addLink(e,t){const r=this.wrap("a",e,{href:t});return this.addRaw(r).addEOL()}}const u=new Summary;t.markdownSummary=u;t.summary=u},5278:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toCommandProperties=t.toCommandValue=void 0;function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue;function toCommandProperties(e){if(!Object.keys(e).length){return{}}return{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}}t.toCommandProperties=toCommandProperties},5526:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.PersonalAccessTokenCredentialHandler=t.BearerCredentialHandler=t.BasicCredentialHandler=void 0;class BasicCredentialHandler{constructor(e,t){this.username=e;this.password=t}prepareRequest(e){if(!e.headers){throw Error("The request has no headers")}e.headers["Authorization"]=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}t.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(e){this.token=e}prepareRequest(e){if(!e.headers){throw Error("The request has no headers")}e.headers["Authorization"]=`Bearer ${this.token}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}t.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(e){this.token=e}prepareRequest(e){if(!e.headers){throw Error("The request has no headers")}e.headers["Authorization"]=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}t.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},6255:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.hasOwnProperty.call(e,r))n(t,e,r);o(t,e);return t};var a=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.HttpClient=t.isHttps=t.HttpClientResponse=t.HttpClientError=t.getProxyUrl=t.MediaTypes=t.Headers=t.HttpCodes=void 0;const s=i(r(3685));const l=i(r(5687));const u=i(r(9835));const c=i(r(4294));var f;(function(e){e[e["OK"]=200]="OK";e[e["MultipleChoices"]=300]="MultipleChoices";e[e["MovedPermanently"]=301]="MovedPermanently";e[e["ResourceMoved"]=302]="ResourceMoved";e[e["SeeOther"]=303]="SeeOther";e[e["NotModified"]=304]="NotModified";e[e["UseProxy"]=305]="UseProxy";e[e["SwitchProxy"]=306]="SwitchProxy";e[e["TemporaryRedirect"]=307]="TemporaryRedirect";e[e["PermanentRedirect"]=308]="PermanentRedirect";e[e["BadRequest"]=400]="BadRequest";e[e["Unauthorized"]=401]="Unauthorized";e[e["PaymentRequired"]=402]="PaymentRequired";e[e["Forbidden"]=403]="Forbidden";e[e["NotFound"]=404]="NotFound";e[e["MethodNotAllowed"]=405]="MethodNotAllowed";e[e["NotAcceptable"]=406]="NotAcceptable";e[e["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";e[e["RequestTimeout"]=408]="RequestTimeout";e[e["Conflict"]=409]="Conflict";e[e["Gone"]=410]="Gone";e[e["TooManyRequests"]=429]="TooManyRequests";e[e["InternalServerError"]=500]="InternalServerError";e[e["NotImplemented"]=501]="NotImplemented";e[e["BadGateway"]=502]="BadGateway";e[e["ServiceUnavailable"]=503]="ServiceUnavailable";e[e["GatewayTimeout"]=504]="GatewayTimeout"})(f=t.HttpCodes||(t.HttpCodes={}));var d;(function(e){e["Accept"]="accept";e["ContentType"]="content-type"})(d=t.Headers||(t.Headers={}));var h;(function(e){e["ApplicationJson"]="application/json"})(h=t.MediaTypes||(t.MediaTypes={}));function getProxyUrl(e){const t=u.getProxyUrl(new URL(e));return t?t.href:""}t.getProxyUrl=getProxyUrl;const p=[f.MovedPermanently,f.ResourceMoved,f.SeeOther,f.TemporaryRedirect,f.PermanentRedirect];const m=[f.BadGateway,f.ServiceUnavailable,f.GatewayTimeout];const y=["OPTIONS","GET","DELETE","HEAD"];const b=10;const g=5;class HttpClientError extends Error{constructor(e,t){super(e);this.name="HttpClientError";this.statusCode=t;Object.setPrototypeOf(this,HttpClientError.prototype)}}t.HttpClientError=HttpClientError;class HttpClientResponse{constructor(e){this.message=e}readBody(){return a(this,void 0,void 0,(function*(){return new Promise((e=>a(this,void 0,void 0,(function*(){let t=Buffer.alloc(0);this.message.on("data",(e=>{t=Buffer.concat([t,e])}));this.message.on("end",(()=>{e(t.toString())}))}))))}))}}t.HttpClientResponse=HttpClientResponse;function isHttps(e){const t=new URL(e);return t.protocol==="https:"}t.isHttps=isHttps;class HttpClient{constructor(e,t,r){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=e;this.handlers=t||[];this.requestOptions=r;if(r){if(r.ignoreSslError!=null){this._ignoreSslError=r.ignoreSslError}this._socketTimeout=r.socketTimeout;if(r.allowRedirects!=null){this._allowRedirects=r.allowRedirects}if(r.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=r.allowRedirectDowngrade}if(r.maxRedirects!=null){this._maxRedirects=Math.max(r.maxRedirects,0)}if(r.keepAlive!=null){this._keepAlive=r.keepAlive}if(r.allowRetries!=null){this._allowRetries=r.allowRetries}if(r.maxRetries!=null){this._maxRetries=r.maxRetries}}}options(e,t){return a(this,void 0,void 0,(function*(){return this.request("OPTIONS",e,null,t||{})}))}get(e,t){return a(this,void 0,void 0,(function*(){return this.request("GET",e,null,t||{})}))}del(e,t){return a(this,void 0,void 0,(function*(){return this.request("DELETE",e,null,t||{})}))}post(e,t,r){return a(this,void 0,void 0,(function*(){return this.request("POST",e,t,r||{})}))}patch(e,t,r){return a(this,void 0,void 0,(function*(){return this.request("PATCH",e,t,r||{})}))}put(e,t,r){return a(this,void 0,void 0,(function*(){return this.request("PUT",e,t,r||{})}))}head(e,t){return a(this,void 0,void 0,(function*(){return this.request("HEAD",e,null,t||{})}))}sendStream(e,t,r,n){return a(this,void 0,void 0,(function*(){return this.request(e,t,r,n)}))}getJson(e,t={}){return a(this,void 0,void 0,(function*(){t[d.Accept]=this._getExistingOrDefaultHeader(t,d.Accept,h.ApplicationJson);const r=yield this.get(e,t);return this._processResponse(r,this.requestOptions)}))}postJson(e,t,r={}){return a(this,void 0,void 0,(function*(){const n=JSON.stringify(t,null,2);r[d.Accept]=this._getExistingOrDefaultHeader(r,d.Accept,h.ApplicationJson);r[d.ContentType]=this._getExistingOrDefaultHeader(r,d.ContentType,h.ApplicationJson);const o=yield this.post(e,n,r);return this._processResponse(o,this.requestOptions)}))}putJson(e,t,r={}){return a(this,void 0,void 0,(function*(){const n=JSON.stringify(t,null,2);r[d.Accept]=this._getExistingOrDefaultHeader(r,d.Accept,h.ApplicationJson);r[d.ContentType]=this._getExistingOrDefaultHeader(r,d.ContentType,h.ApplicationJson);const o=yield this.put(e,n,r);return this._processResponse(o,this.requestOptions)}))}patchJson(e,t,r={}){return a(this,void 0,void 0,(function*(){const n=JSON.stringify(t,null,2);r[d.Accept]=this._getExistingOrDefaultHeader(r,d.Accept,h.ApplicationJson);r[d.ContentType]=this._getExistingOrDefaultHeader(r,d.ContentType,h.ApplicationJson);const o=yield this.patch(e,n,r);return this._processResponse(o,this.requestOptions)}))}request(e,t,r,n){return a(this,void 0,void 0,(function*(){if(this._disposed){throw new Error("Client has already been disposed.")}const o=new URL(t);let i=this._prepareRequest(e,o,n);const a=this._allowRetries&&y.includes(e)?this._maxRetries+1:1;let s=0;let l;do{l=yield this.requestRaw(i,r);if(l&&l.message&&l.message.statusCode===f.Unauthorized){let e;for(const t of this.handlers){if(t.canHandleAuthentication(l)){e=t;break}}if(e){return e.handleAuthentication(this,i,r)}else{return l}}let t=this._maxRedirects;while(l.message.statusCode&&p.includes(l.message.statusCode)&&this._allowRedirects&&t>0){const a=l.message.headers["location"];if(!a){break}const s=new URL(a);if(o.protocol==="https:"&&o.protocol!==s.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}yield l.readBody();if(s.hostname!==o.hostname){for(const e in n){if(e.toLowerCase()==="authorization"){delete n[e]}}}i=this._prepareRequest(e,s,n);l=yield this.requestRaw(i,r);t--}if(!l.message.statusCode||!m.includes(l.message.statusCode)){return l}s+=1;if(s<a){yield l.readBody();yield this._performExponentialBackoff(s)}}while(s<a);return l}))}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(e,t){return a(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{function callbackForResult(e,t){if(e){n(e)}else if(!t){n(new Error("Unknown error"))}else{r(t)}}this.requestRawWithCallback(e,t,callbackForResult)}))}))}requestRawWithCallback(e,t,r){if(typeof t==="string"){if(!e.options.headers){e.options.headers={}}e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8")}let n=false;function handleResult(e,t){if(!n){n=true;r(e,t)}}const o=e.httpModule.request(e.options,(e=>{const t=new HttpClientResponse(e);handleResult(undefined,t)}));let i;o.on("socket",(e=>{i=e}));o.setTimeout(this._socketTimeout||3*6e4,(()=>{if(i){i.end()}handleResult(new Error(`Request timeout: ${e.options.path}`))}));o.on("error",(function(e){handleResult(e)}));if(t&&typeof t==="string"){o.write(t,"utf8")}if(t&&typeof t!=="string"){t.on("close",(function(){o.end()}));t.pipe(o)}else{o.end()}}getAgent(e){const t=new URL(e);return this._getAgent(t)}_prepareRequest(e,t,r){const n={};n.parsedUrl=t;const o=n.parsedUrl.protocol==="https:";n.httpModule=o?l:s;const i=o?443:80;n.options={};n.options.host=n.parsedUrl.hostname;n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):i;n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||"");n.options.method=e;n.options.headers=this._mergeHeaders(r);if(this.userAgent!=null){n.options.headers["user-agent"]=this.userAgent}n.options.agent=this._getAgent(n.parsedUrl);if(this.handlers){for(const e of this.handlers){e.prepareRequest(n.options)}}return n}_mergeHeaders(e){if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(e||{}))}return lowercaseKeys(e||{})}_getExistingOrDefaultHeader(e,t,r){let n;if(this.requestOptions&&this.requestOptions.headers){n=lowercaseKeys(this.requestOptions.headers)[t]}return e[t]||n||r}_getAgent(e){let t;const r=u.getProxyUrl(e);const n=r&&r.hostname;if(this._keepAlive&&n){t=this._proxyAgent}if(this._keepAlive&&!n){t=this._agent}if(t){return t}const o=e.protocol==="https:";let i=100;if(this.requestOptions){i=this.requestOptions.maxSockets||s.globalAgent.maxSockets}if(r&&r.hostname){const e={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(r.username||r.password)&&{proxyAuth:`${r.username}:${r.password}`}),{host:r.hostname,port:r.port})};let n;const a=r.protocol==="https:";if(o){n=a?c.httpsOverHttps:c.httpsOverHttp}else{n=a?c.httpOverHttps:c.httpOverHttp}t=n(e);this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:i};t=o?new l.Agent(e):new s.Agent(e);this._agent=t}if(!t){t=o?l.globalAgent:s.globalAgent}if(o&&this._ignoreSslError){t.options=Object.assign(t.options||{},{rejectUnauthorized:false})}return t}_performExponentialBackoff(e){return a(this,void 0,void 0,(function*(){e=Math.min(b,e);const t=g*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}))}_processResponse(e,t){return a(this,void 0,void 0,(function*(){return new Promise(((r,n)=>a(this,void 0,void 0,(function*(){const o=e.message.statusCode||0;const i={statusCode:o,result:null,headers:{}};if(o===f.NotFound){r(i)}function dateTimeDeserializer(e,t){if(typeof t==="string"){const e=new Date(t);if(!isNaN(e.valueOf())){return e}}return t}let a;let s;try{s=yield e.readBody();if(s&&s.length>0){if(t&&t.deserializeDates){a=JSON.parse(s,dateTimeDeserializer)}else{a=JSON.parse(s)}i.result=a}i.headers=e.message.headers}catch(e){}if(o>299){let e;if(a&&a.message){e=a.message}else if(s&&s.length>0){e=s}else{e=`Failed request: (${o})`}const t=new HttpClientError(e,o);t.result=i.result;n(t)}else{r(i)}}))))}))}}t.HttpClient=HttpClient;const lowercaseKeys=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{})},9835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.checkBypass=t.getProxyUrl=void 0;function getProxyUrl(e){const t=e.protocol==="https:";if(checkBypass(e)){return undefined}const r=(()=>{if(t){return process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{return process.env["http_proxy"]||process.env["HTTP_PROXY"]}})();if(r){return new URL(r)}else{return undefined}}t.getProxyUrl=getProxyUrl;function checkBypass(e){if(!e.hostname){return false}const t=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!t){return false}let r;if(e.port){r=Number(e.port)}else if(e.protocol==="http:"){r=80}else if(e.protocol==="https:"){r=443}const n=[e.hostname.toUpperCase()];if(typeof r==="number"){n.push(`${n[0]}:${r}`)}for(const e of t.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e))){if(n.some((t=>t===e))){return true}}return false}t.checkBypass=checkBypass},1748:(e,t)=>{"use strict";const r=-8;const n=-4;const o=0;const i=1;const a=2;const s=1<<0;const l=1<<1;const u=null&&1<<2;const c=null&&1<<3;const f=5;const d=1<<f;const h=1<<10;const p=1<<11;const m=null&&1<<12;const y=1<<13;const b=14;const g=1<<b;const _=null&&1<<19;const w=null&&1<<20;const v=null&&1<<21;const S=null&&1<<22;const R=0;const C=4;const k=8;const T=12;const E=12;const A=16;const B=typeof BigUint64Array!=="undefined";const x=Symbol();const I=1024;function getStringImpl(e,t){const r=new Uint32Array(e);const o=new Uint16Array(e);var i=r[t+n>>>2]>>>1;var a=t>>>1;if(i<=I)return String.fromCharCode.apply(String,o.subarray(a,a+i));const s=[];do{const e=o[a+I-1];const t=e>=55296&&e<56320?I-1:I;s.push(String.fromCharCode.apply(String,o.subarray(a,a+=t)));i-=t}while(i>I);return s.join("")+String.fromCharCode.apply(String,o.subarray(a,a+i))}function preInstantiate(e){const t={};function getString(e,t){if(!e)return"<yet unknown>";return getStringImpl(e.buffer,t)}const r=e.env=e.env||{};r.abort=r.abort||function abort(e,n,o,i){const a=t.memory||r.memory;throw Error("abort: "+getString(a,e)+" at "+getString(a,n)+":"+o+":"+i)};r.trace=r.trace||function trace(e,n){const o=t.memory||r.memory;console.log("trace: "+getString(o,e)+(n?" ":"")+Array.prototype.slice.call(arguments,2,2+n).join(", "))};e.Math=e.Math||Math;e.Date=e.Date||Date;return t}function postInstantiate(e,t){const a=t.exports;const u=a.memory;const c=a.table;const d=a["__alloc"];const m=a["__retain"];const g=a["__rtti_base"]||~0;function getInfo(e){const t=new Uint32Array(u.buffer);const r=t[g>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(g+4>>>2)+e*2]}function getBase(e){const t=new Uint32Array(u.buffer);const r=t[g>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(g+4>>>2)+e*2+1]}function getValueAlign(e){return 31-Math.clz32(e>>>f&31)}function getKeyAlign(e){return 31-Math.clz32(e>>>b&31)}function __allocString(e){const t=e.length;const r=d(t<<1,i);const n=new Uint16Array(u.buffer);for(var o=0,a=r>>>1;o<t;++o)n[a+o]=e.charCodeAt(o);return r}e.__allocString=__allocString;function __getString(e){const t=u.buffer;const n=new Uint32Array(t)[e+r>>>2];if(n!==i)throw Error("not a string: "+e);return getStringImpl(t,e)}e.__getString=__getString;function getView(e,t,r){const n=u.buffer;if(r){switch(e){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}}else{switch(e){case 0:return new(t?Int8Array:Uint8Array)(n);case 1:return new(t?Int16Array:Uint16Array)(n);case 2:return new(t?Int32Array:Uint32Array)(n);case 3:return new(t?BigInt64Array:BigUint64Array)(n)}}throw Error("unsupported align: "+e)}function __allocArray(e,t){const r=getInfo(e);if(!(r&(s|l)))throw Error("not an array: "+e+" @ "+r);const n=getValueAlign(r);const i=t.length;const a=d(i<<n,o);const c=d(r&l?A:T,e);const f=new Uint32Array(u.buffer);f[c+R>>>2]=m(a);f[c+C>>>2]=a;f[c+k>>>2]=i<<n;if(r&l)f[c+E>>>2]=i;const b=getView(n,r&h,r&p);if(r&y){for(let e=0;e<i;++e)b[(a>>>n)+e]=m(t[e])}else{b.set(t,a>>>n)}return c}e.__allocArray=__allocArray;function __getArrayView(e){const t=new Uint32Array(u.buffer);const o=t[e+r>>>2];const i=getInfo(o);if(!(i&s))throw Error("not an array: "+o);const a=getValueAlign(i);var c=t[e+C>>>2];const f=i&l?t[e+E>>>2]:t[c+n>>>2]>>>a;return getView(a,i&h,i&p).subarray(c>>>=a,c+f)}e.__getArrayView=__getArrayView;function __getArray(e){const t=__getArrayView(e);const r=t.length;const n=new Array(r);for(let e=0;e<r;e++)n[e]=t[e];return n}e.__getArray=__getArray;function __getArrayBuffer(e){const t=u.buffer;const r=new Uint32Array(t)[e+n>>>2];return t.slice(e,e+r)}e.__getArrayBuffer=__getArrayBuffer;function getTypedArray(e,t,r){return new e(getTypedArrayView(e,t,r))}function getTypedArrayView(e,t,r){const o=u.buffer;const i=new Uint32Array(o);const a=i[r+C>>>2];return new e(o,a,i[a+n>>>2]>>>t)}e.__getInt8Array=getTypedArray.bind(null,Int8Array,0);e.__getInt8ArrayView=getTypedArrayView.bind(null,Int8Array,0);e.__getUint8Array=getTypedArray.bind(null,Uint8Array,0);e.__getUint8ArrayView=getTypedArrayView.bind(null,Uint8Array,0);e.__getUint8ClampedArray=getTypedArray.bind(null,Uint8ClampedArray,0);e.__getUint8ClampedArrayView=getTypedArrayView.bind(null,Uint8ClampedArray,0);e.__getInt16Array=getTypedArray.bind(null,Int16Array,1);e.__getInt16ArrayView=getTypedArrayView.bind(null,Int16Array,1);e.__getUint16Array=getTypedArray.bind(null,Uint16Array,1);e.__getUint16ArrayView=getTypedArrayView.bind(null,Uint16Array,1);e.__getInt32Array=getTypedArray.bind(null,Int32Array,2);e.__getInt32ArrayView=getTypedArrayView.bind(null,Int32Array,2);e.__getUint32Array=getTypedArray.bind(null,Uint32Array,2);e.__getUint32ArrayView=getTypedArrayView.bind(null,Uint32Array,2);if(B){e.__getInt64Array=getTypedArray.bind(null,BigInt64Array,3);e.__getInt64ArrayView=getTypedArrayView.bind(null,BigInt64Array,3);e.__getUint64Array=getTypedArray.bind(null,BigUint64Array,3);e.__getUint64ArrayView=getTypedArrayView.bind(null,BigUint64Array,3)}e.__getFloat32Array=getTypedArray.bind(null,Float32Array,2);e.__getFloat32ArrayView=getTypedArrayView.bind(null,Float32Array,2);e.__getFloat64Array=getTypedArray.bind(null,Float64Array,3);e.__getFloat64ArrayView=getTypedArrayView.bind(null,Float64Array,3);function __instanceof(e,t){const n=new Uint32Array(u.buffer);var o=n[e+r>>>2];if(o<=n[g>>>2]){do{if(o==t)return true}while(o=getBase(o))}return false}e.__instanceof=__instanceof;e.memory=e.memory||u;e.table=e.table||c;return demangle(a,e)}function isResponse(e){return typeof Response!=="undefined"&&e instanceof Response}async function instantiate(e,t){if(isResponse(e=await e))return instantiateStreaming(e,t);return postInstantiate(preInstantiate(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}t.instantiate=instantiate;function instantiateSync(e,t){return postInstantiate(preInstantiate(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))}t.instantiateSync=instantiateSync;async function instantiateStreaming(e,t){if(!WebAssembly.instantiateStreaming){return instantiate(isResponse(e=await e)?e.arrayBuffer():e,t)}return postInstantiate(preInstantiate(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance)}t.instantiateStreaming=instantiateStreaming;function demangle(e,t){var r=t?Object.create(t):{};var n=e["__argumentsLength"]?function(t){e["__argumentsLength"].value=t}:e["__setArgumentsLength"]||e["__setargc"]||function(){};for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const o=e[t];let i=t.split(".");let a=r;while(i.length>1){let e=i.shift();if(!Object.prototype.hasOwnProperty.call(a,e))a[e]={};a=a[e]}let s=i[0];let l=s.indexOf("#");if(l>=0){let r=s.substring(0,l);let i=a[r];if(typeof i==="undefined"||!i.prototype){let ctor=function(...e){return ctor.wrap(ctor.prototype.constructor(0,...e))};ctor.prototype={valueOf:function valueOf(){return this[x]}};ctor.wrap=function(e){return Object.create(ctor.prototype,{[x]:{value:e,writable:false}})};if(i)Object.getOwnPropertyNames(i).forEach((e=>Object.defineProperty(ctor,e,Object.getOwnPropertyDescriptor(i,e))));a[r]=ctor}s=s.substring(l+1);a=a[r].prototype;if(/^(get|set):/.test(s)){if(!Object.prototype.hasOwnProperty.call(a,s=s.substring(4))){let r=e[t.replace("set:","get:")];let n=e[t.replace("get:","set:")];Object.defineProperty(a,s,{get:function(){return r(this[x])},set:function(e){n(this[x],e)},enumerable:true})}}else{if(s==="constructor"){(a[s]=(...e)=>{n(e.length);return o(...e)}).original=o}else{(a[s]=function(...e){n(e.length);return o(this[x],...e)}).original=o}}}else{if(/^(get|set):/.test(s)){if(!Object.prototype.hasOwnProperty.call(a,s=s.substring(4))){Object.defineProperty(a,s,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:true})}}else if(typeof o==="function"&&o!==n){(a[s]=(...e)=>{n(e.length);return o(...e)}).original=o}else{a[s]=o}}}return r}t.demangle=demangle},252:e=>{"use strict";e.exports=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),n=0,o=2,i=true;while(o<arguments.length)r[n++]=arguments[o++];return new Promise((function executor(o,a){r[n]=function callback(e){if(i){i=false;if(e)a(e);else{var t=new Array(arguments.length-1),r=0;while(r<t.length)t[r++]=arguments[r];o.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){if(i){i=false;a(e)}}}))}},6718:(e,t)=>{"use strict";var r=t;r.length=function length(e){var t=e.length;if(!t)return 0;var r=0;while(--t%4>1&&e.charAt(t)==="=")++r;return Math.ceil(e.length*3)/4-r};var n=new Array(64);var o=new Array(123);for(var i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function encode(e,t,r){var o=null,i=[];var a=0,s=0,l;while(t<r){var u=e[t++];switch(s){case 0:i[a++]=n[u>>2];l=(u&3)<<4;s=1;break;case 1:i[a++]=n[l|u>>4];l=(u&15)<<2;s=2;break;case 2:i[a++]=n[l|u>>6];i[a++]=n[u&63];s=0;break}if(a>8191){(o||(o=[])).push(String.fromCharCode.apply(String,i));a=0}}if(s){i[a++]=n[l];i[a++]=61;if(s===1)i[a++]=61}if(o){if(a)o.push(String.fromCharCode.apply(String,i.slice(0,a)));return o.join("")}return String.fromCharCode.apply(String,i.slice(0,a))};var a="invalid encoding";r.decode=function decode(e,t,r){var n=r;var i=0,s;for(var l=0;l<e.length;){var u=e.charCodeAt(l++);if(u===61&&i>1)break;if((u=o[u])===undefined)throw Error(a);switch(i){case 0:s=u;i=1;break;case 1:t[r++]=s<<2|(u&48)>>4;s=u;i=2;break;case 2:t[r++]=(s&15)<<4|(u&60)>>2;s=u;i=3;break;case 3:t[r++]=(s&3)<<6|u;i=0;break}}if(i===1)throw Error(a);return r-n};r.test=function test(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},6850:e=>{"use strict";e.exports=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function on(e,t,r){(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this});return this};EventEmitter.prototype.off=function off(e,t){if(e===undefined)this._listeners={};else{if(t===undefined)this._listeners[e]=[];else{var r=this._listeners[e];for(var n=0;n<r.length;)if(r[n].fn===t)r.splice(n,1);else++n}}return this};EventEmitter.prototype.emit=function emit(e){var t=this._listeners[e];if(t){var r=[],n=1;for(;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},1843:e=>{"use strict";e.exports=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function writeFloat_f32_cpy(e,n,o){t[0]=e;n[o]=r[0];n[o+1]=r[1];n[o+2]=r[2];n[o+3]=r[3]}function writeFloat_f32_rev(e,n,o){t[0]=e;n[o]=r[3];n[o+1]=r[2];n[o+2]=r[1];n[o+3]=r[0]}e.writeFloatLE=n?writeFloat_f32_cpy:writeFloat_f32_rev;e.writeFloatBE=n?writeFloat_f32_rev:writeFloat_f32_cpy;function readFloat_f32_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];return t[0]}function readFloat_f32_rev(e,n){r[3]=e[n];r[2]=e[n+1];r[1]=e[n+2];r[0]=e[n+3];return t[0]}e.readFloatLE=n?readFloat_f32_cpy:readFloat_f32_rev;e.readFloatBE=n?readFloat_f32_rev:readFloat_f32_cpy})();else(function(){function writeFloat_ieee754(e,t,r,n){var o=t<0?1:0;if(o)t=-t;if(t===0)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2),a=Math.round(t*Math.pow(2,-i)*8388608)&8388607;e((o<<31|i+127<<23|a)>>>0,r,n)}}e.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE);e.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE);function readFloat_ieee754(e,t,r){var n=e(t,r),o=(n>>31)*2+1,i=n>>>23&255,a=n&8388607;return i===255?a?NaN:o*Infinity:i===0?o*1401298464324817e-60*a:o*Math.pow(2,i-150)*(a+8388608)}e.readFloatLE=readFloat_ieee754.bind(null,readUintLE);e.readFloatBE=readFloat_ieee754.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function writeDouble_f64_cpy(e,n,o){t[0]=e;n[o]=r[0];n[o+1]=r[1];n[o+2]=r[2];n[o+3]=r[3];n[o+4]=r[4];n[o+5]=r[5];n[o+6]=r[6];n[o+7]=r[7]}function writeDouble_f64_rev(e,n,o){t[0]=e;n[o]=r[7];n[o+1]=r[6];n[o+2]=r[5];n[o+3]=r[4];n[o+4]=r[3];n[o+5]=r[2];n[o+6]=r[1];n[o+7]=r[0]}e.writeDoubleLE=n?writeDouble_f64_cpy:writeDouble_f64_rev;e.writeDoubleBE=n?writeDouble_f64_rev:writeDouble_f64_cpy;function readDouble_f64_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];r[4]=e[n+4];r[5]=e[n+5];r[6]=e[n+6];r[7]=e[n+7];return t[0]}function readDouble_f64_rev(e,n){r[7]=e[n];r[6]=e[n+1];r[5]=e[n+2];r[4]=e[n+3];r[3]=e[n+4];r[2]=e[n+5];r[1]=e[n+6];r[0]=e[n+7];return t[0]}e.readDoubleLE=n?readDouble_f64_cpy:readDouble_f64_rev;e.readDoubleBE=n?readDouble_f64_rev:readDouble_f64_cpy})();else(function(){function writeDouble_ieee754(e,t,r,n,o,i){var a=n<0?1:0;if(a)n=-n;if(n===0){e(0,o,i+t);e(1/n>0?0:2147483648,o,i+r)}else if(isNaN(n)){e(0,o,i+t);e(2146959360,o,i+r)}else if(n>17976931348623157e292){e(0,o,i+t);e((a<<31|2146435072)>>>0,o,i+r)}else{var s;if(n<22250738585072014e-324){s=n/5e-324;e(s>>>0,o,i+t);e((a<<31|s/4294967296)>>>0,o,i+r)}else{var l=Math.floor(Math.log(n)/Math.LN2);if(l===1024)l=1023;s=n*Math.pow(2,-l);e(s*4503599627370496>>>0,o,i+t);e((a<<31|l+1023<<20|s*1048576&1048575)>>>0,o,i+r)}}}e.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4);e.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0);function readDouble_ieee754(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r);var s=(a>>31)*2+1,l=a>>>20&2047,u=4294967296*(a&1048575)+i;return l===2047?u?NaN:s*Infinity:l===0?s*5e-324*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4);e.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}},94:module=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},7743:e=>{"use strict";e.exports=pool;function pool(e,t,r){var n=r||8192;var o=n>>>1;var i=null;var a=n;return function pool_alloc(r){if(r<1||r>o)return e(r);if(a+r>n){i=e(n);a=0}var s=t.call(i,a,a+=r);if(a&7)a=(a|7)+1;return s}}},9049:(e,t)=>{"use strict";var r=t;r.length=function utf8_length(e){var t=0,r=0;for(var n=0;n<e.length;++n){r=e.charCodeAt(n);if(r<128)t+=1;else if(r<2048)t+=2;else if((r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){++n;t+=4}else t+=3}return t};r.read=function utf8_read(e,t,r){var n=r-t;if(n<1)return"";var o=null,i=[],a=0,s;while(t<r){s=e[t++];if(s<128)i[a++]=s;else if(s>191&&s<224)i[a++]=(s&31)<<6|e[t++]&63;else if(s>239&&s<365){s=((s&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536;i[a++]=55296+(s>>10);i[a++]=56320+(s&1023)}else i[a++]=(s&15)<<12|(e[t++]&63)<<6|e[t++]&63;if(a>8191){(o||(o=[])).push(String.fromCharCode.apply(String,i));a=0}}if(o){if(a)o.push(String.fromCharCode.apply(String,i.slice(0,a)));return o.join("")}return String.fromCharCode.apply(String,i.slice(0,a))};r.write=function utf8_write(e,t,r){var n=r,o,i;for(var a=0;a<e.length;++a){o=e.charCodeAt(a);if(o<128){t[r++]=o}else if(o<2048){t[r++]=o>>6|192;t[r++]=o&63|128}else if((o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320){o=65536+((o&1023)<<10)+(i&1023);++a;t[r++]=o>>18|240;t[r++]=o>>12&63|128;t[r++]=o>>6&63|128;t[r++]=o&63|128}else{t[r++]=o>>12|224;t[r++]=o>>6&63|128;t[r++]=o&63|128}}return r-n}},9417:e=>{"use strict";e.exports=balanced;function balanced(e,t,r){if(e instanceof RegExp)e=maybeMatch(e,r);if(t instanceof RegExp)t=maybeMatch(t,r);var n=range(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function maybeMatch(e,t){var r=t.match(e);return r?r[0]:null}balanced.range=range;function range(e,t,r){var n,o,i,a,s;var l=r.indexOf(e);var u=r.indexOf(t,l+1);var c=l;if(l>=0&&u>0){if(e===t){return[l,u]}n=[];i=r.length;while(c>=0&&!s){if(c==l){n.push(c);l=r.indexOf(e,c+1)}else if(n.length==1){s=[n.pop(),u]}else{o=n.pop();if(o<i){i=o;a=u}u=r.indexOf(t,c+1)}c=l<u&&l>=0?l:u}if(n.length){s=[i,a]}}return s}},3664:(e,t,r)=>{"use strict";const{Buffer:n}=r(4300);const o=Symbol.for("BufferList");function BufferList(e){if(!(this instanceof BufferList)){return new BufferList(e)}BufferList._init.call(this,e)}BufferList._init=function _init(e){Object.defineProperty(this,o,{value:true});this._bufs=[];this.length=0;if(e){this.append(e)}};BufferList.prototype._new=function _new(e){return new BufferList(e)};BufferList.prototype._offset=function _offset(e){if(e===0){return[0,0]}let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1){return[r,e-t]}t=n}};BufferList.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++){r+=this._bufs[e].length}return r};BufferList.prototype.get=function get(e){if(e>this.length||e<0){return undefined}const t=this._offset(e);return this._bufs[t[0]][t[1]]};BufferList.prototype.slice=function slice(e,t){if(typeof e==="number"&&e<0){e+=this.length}if(typeof t==="number"&&t<0){t+=this.length}return this.copy(null,0,e,t)};BufferList.prototype.copy=function copy(e,t,r,o){if(typeof r!=="number"||r<0){r=0}if(typeof o!=="number"||o>this.length){o=this.length}if(r>=this.length){return e||n.alloc(0)}if(o<=0){return e||n.alloc(0)}const copy=!!e;const i=this._offset(r);const a=o-r;let s=a;let l=copy&&t||0;let u=i[1];if(r===0&&o===this.length){if(!copy){return this._bufs.length===1?this._bufs[0]:n.concat(this._bufs,this.length)}for(let t=0;t<this._bufs.length;t++){this._bufs[t].copy(e,l);l+=this._bufs[t].length}return e}if(s<=this._bufs[i[0]].length-u){return copy?this._bufs[i[0]].copy(e,t,u,u+s):this._bufs[i[0]].slice(u,u+s)}if(!copy){e=n.allocUnsafe(a)}for(let t=i[0];t<this._bufs.length;t++){const r=this._bufs[t].length-u;if(s>r){this._bufs[t].copy(e,l,u);l+=r}else{this._bufs[t].copy(e,l,u,u+s);l+=r;break}s-=r;if(u){u=0}}if(e.length>l)return e.slice(0,l);return e};BufferList.prototype.shallowSlice=function shallowSlice(e,t){e=e||0;t=typeof t!=="number"?this.length:t;if(e<0){e+=this.length}if(t<0){t+=this.length}if(e===t){return this._new()}const r=this._offset(e);const n=this._offset(t);const o=this._bufs.slice(r[0],n[0]+1);if(n[1]===0){o.pop()}else{o[o.length-1]=o[o.length-1].slice(0,n[1])}if(r[1]!==0){o[0]=o[0].slice(r[1])}return this._new(o)};BufferList.prototype.toString=function toString(e,t,r){return this.slice(t,r).toString(e)};BufferList.prototype.consume=function consume(e){e=Math.trunc(e);if(Number.isNaN(e)||e<=0)return this;while(this._bufs.length){if(e>=this._bufs[0].length){e-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(e);this.length-=e;break}}return this};BufferList.prototype.duplicate=function duplicate(){const e=this._new();for(let t=0;t<this._bufs.length;t++){e.append(this._bufs[t])}return e};BufferList.prototype.append=function append(e){if(e==null){return this}if(e.buffer){this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength))}else if(Array.isArray(e)){for(let t=0;t<e.length;t++){this.append(e[t])}}else if(this._isBufferList(e)){for(let t=0;t<e._bufs.length;t++){this.append(e._bufs[t])}}else{if(typeof e==="number"){e=e.toString()}this._appendBuffer(n.from(e))}return this};BufferList.prototype._appendBuffer=function appendBuffer(e){this._bufs.push(e);this.length+=e.length};BufferList.prototype.indexOf=function(e,t,r){if(r===undefined&&typeof t==="string"){r=t;t=undefined}if(typeof e==="function"||Array.isArray(e)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof e==="number"){e=n.from([e])}else if(typeof e==="string"){e=n.from(e,r)}else if(this._isBufferList(e)){e=e.slice()}else if(Array.isArray(e.buffer)){e=n.from(e.buffer,e.byteOffset,e.byteLength)}else if(!n.isBuffer(e)){e=n.from(e)}t=Number(t||0);if(isNaN(t)){t=0}if(t<0){t=this.length+t}if(t<0){t=0}if(e.length===0){return t>this.length?this.length:t}const o=this._offset(t);let i=o[0];let a=o[1];for(;i<this._bufs.length;i++){const t=this._bufs[i];while(a<t.length){const r=t.length-a;if(r>=e.length){const r=t.indexOf(e,a);if(r!==-1){return this._reverseOffset([i,r])}a=t.length-e.length+1}else{const t=this._reverseOffset([i,a]);if(this._match(t,e)){return t}a++}}a=0}return-1};BufferList.prototype._match=function(e,t){if(this.length-e<t.length){return false}for(let r=0;r<t.length;r++){if(this.get(e+r)!==t[r]){return false}}return true};(function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e){(function(t){if(e[t]===null){BufferList.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}}else{BufferList.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}})(t)}})();BufferList.prototype._isBufferList=function _isBufferList(e){return e instanceof BufferList||BufferList.isBufferList(e)};BufferList.isBufferList=function isBufferList(e){return e!=null&&e[o]};e.exports=BufferList},7842:(e,t,r)=>{"use strict";const n=r(664);function blobToIt(e){if(typeof e.stream==="function"){return n(e.stream())}return n(new Response(e).body)}e.exports=blobToIt},3717:(e,t,r)=>{var n=r(6891);var o=r(9417);e.exports=expandTop;var i="\0SLASH"+Math.random()+"\0";var a="\0OPEN"+Math.random()+"\0";var s="\0CLOSE"+Math.random()+"\0";var l="\0COMMA"+Math.random()+"\0";var u="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(i).split("\\{").join(a).split("\\}").join(s).split("\\,").join(l).split("\\.").join(u)}function unescapeBraces(e){return e.split(i).join("\\").split(a).join("{").split(s).join("}").split(l).join(",").split(u).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[];var r=o("{","}",e);if(!r)return e.split(",");var n=r.pre;var i=r.body;var a=r.post;var s=n.split(",");s[s.length-1]+="{"+i+"}";var l=parseCommaParts(a);if(a.length){s[s.length-1]+=l.shift();s.push.apply(s,l)}t.push.apply(t,s);return t}function expandTop(e){if(!e)return[];if(e.substr(0,2)==="{}"){e="\\{\\}"+e.substr(2)}return expand(escapeBraces(e),true).map(unescapeBraces)}function identity(e){return e}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var r=[];var i=o("{","}",e);if(!i||/\$$/.test(i.pre))return[e];var a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body);var l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body);var u=a||l;var c=i.body.indexOf(",")>=0;if(!u&&!c){if(i.post.match(/,.*\}/)){e=i.pre+"{"+i.body+s+i.post;return expand(e)}return[e]}var f;if(u){f=i.body.split(/\.\./)}else{f=parseCommaParts(i.body);if(f.length===1){f=expand(f[0],false).map(embrace);if(f.length===1){var d=i.post.length?expand(i.post,false):[""];return d.map((function(e){return i.pre+f[0]+e}))}}}var h=i.pre;var d=i.post.length?expand(i.post,false):[""];var p;if(u){var m=numeric(f[0]);var y=numeric(f[1]);var b=Math.max(f[0].length,f[1].length);var g=f.length==3?Math.abs(numeric(f[2])):1;var _=lte;var w=y<m;if(w){g*=-1;_=gte}var v=f.some(isPadded);p=[];for(var S=m;_(S,y);S+=g){var R;if(l){R=String.fromCharCode(S);if(R==="\\")R=""}else{R=String(S);if(v){var C=b-R.length;if(C>0){var k=new Array(C+1).join("0");if(S<0)R="-"+k+R.slice(1);else R=k+R}}}p.push(R)}}else{p=n(f,(function(e){return expand(e,false)}))}for(var T=0;T<p.length;T++){for(var E=0;E<d.length;E++){var A=h+p[T]+d[E];if(!t||u||A)r.push(A)}}return r}},664:e=>{"use strict";async function*browserReadableStreamToIt(e,t={}){const r=e.getReader();try{while(true){const e=await r.read();if(e.done){return}yield e.value}}finally{if(t.preventCancel!==true){r.cancel()}r.releaseLock()}}e.exports=browserReadableStreamToIt},6891:e=>{e.exports=function(e,r){var n=[];for(var o=0;o<e.length;o++){var i=r(e[o],o);if(t(i))n.push.apply(n,i);else n.push(i)}return n};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},2371:e=>{"use strict";function dataUriToBuffer(e){if(!/^data:/i.test(e)){throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")')}e=e.replace(/\r?\n/g,"");const t=e.indexOf(",");if(t===-1||t<=4){throw new TypeError("malformed data: URI")}const r=e.substring(5,t).split(";");let n="";let o=false;const i=r[0]||"text/plain";let a=i;for(let e=1;e<r.length;e++){if(r[e]==="base64"){o=true}else{a+=`;${r[e]}`;if(r[e].indexOf("charset=")===0){n=r[e].substring(8)}}}if(!r[0]&&!n.length){a+=";charset=US-ASCII";n="US-ASCII"}const s=o?"base64":"ascii";const l=unescape(e.substring(t+1));const u=Buffer.from(l,s);u.type=i;u.typeFull=a;u.charset=n;return u}e.exports=dataUriToBuffer},2997:e=>{"use strict";function assign(e,t){for(const r in t){Object.defineProperty(e,r,{value:t[r],enumerable:true,configurable:true})}return e}function createError(e,t,r){if(!e||typeof e==="string"){throw new TypeError("Please pass an Error to err-code")}if(!r){r={}}if(typeof t==="object"){r=t;t=""}if(t){r.code=t}try{return assign(e,r)}catch(t){r.message=e.message;r.stack=e.stack;const ErrClass=function(){};ErrClass.prototype=Object.create(Object.getPrototypeOf(e));const n=assign(new ErrClass,r);return n}}e.exports=createError},7356:e=>{"use strict";e.exports=clone;var t=Object.getPrototypeOf||function(e){return e.__proto__};function clone(e){if(e===null||typeof e!=="object")return e;if(e instanceof Object)var r={__proto__:t(e)};else var r=Object.create(null);Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}));return r}},7758:(e,t,r)=>{var n=r(7147);var o=r(263);var i=r(3086);var a=r(7356);var s=r(3837);var l;var u;if(typeof Symbol==="function"&&typeof Symbol.for==="function"){l=Symbol.for("graceful-fs.queue");u=Symbol.for("graceful-fs.previous")}else{l="___graceful-fs.queue";u="___graceful-fs.previous"}function noop(){}function publishQueue(e,t){Object.defineProperty(e,l,{get:function(){return t}})}var c=noop;if(s.debuglog)c=s.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))c=function(){var e=s.format.apply(s,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: ");console.error(e)};if(!n[l]){var f=global[l]||[];publishQueue(n,f);n.close=function(e){function close(t,r){return e.call(n,t,(function(e){if(!e){resetQueue()}if(typeof r==="function")r.apply(this,arguments)}))}Object.defineProperty(close,u,{value:e});return close}(n.close);n.closeSync=function(e){function closeSync(t){e.apply(n,arguments);resetQueue()}Object.defineProperty(closeSync,u,{value:e});return closeSync}(n.closeSync);if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")){process.on("exit",(function(){c(n[l]);r(9491).equal(n[l].length,0)}))}}if(!global[l]){publishQueue(global,n[l])}e.exports=patch(a(n));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!n.__patched){e.exports=patch(n);n.__patched=true}function patch(e){o(e);e.gracefulify=patch;e.createReadStream=createReadStream;e.createWriteStream=createWriteStream;var t=e.readFile;e.readFile=readFile;function readFile(e,r,n){if(typeof r==="function")n=r,r=null;return go$readFile(e,r,n);function go$readFile(e,r,n,o){return t(e,r,(function(t){if(t&&(t.code==="EMFILE"||t.code==="ENFILE"))enqueue([go$readFile,[e,r,n],t,o||Date.now(),Date.now()]);else{if(typeof n==="function")n.apply(this,arguments)}}))}}var r=e.writeFile;e.writeFile=writeFile;function writeFile(e,t,n,o){if(typeof n==="function")o=n,n=null;return go$writeFile(e,t,n,o);function go$writeFile(e,t,n,o,i){return r(e,t,n,(function(r){if(r&&(r.code==="EMFILE"||r.code==="ENFILE"))enqueue([go$writeFile,[e,t,n,o],r,i||Date.now(),Date.now()]);else{if(typeof o==="function")o.apply(this,arguments)}}))}}var n=e.appendFile;if(n)e.appendFile=appendFile;function appendFile(e,t,r,o){if(typeof r==="function")o=r,r=null;return go$appendFile(e,t,r,o);function go$appendFile(e,t,r,o,i){return n(e,t,r,(function(n){if(n&&(n.code==="EMFILE"||n.code==="ENFILE"))enqueue([go$appendFile,[e,t,r,o],n,i||Date.now(),Date.now()]);else{if(typeof o==="function")o.apply(this,arguments)}}))}}var a=e.copyFile;if(a)e.copyFile=copyFile;function copyFile(e,t,r,n){if(typeof r==="function"){n=r;r=0}return go$copyFile(e,t,r,n);function go$copyFile(e,t,r,n,o){return a(e,t,r,(function(i){if(i&&(i.code==="EMFILE"||i.code==="ENFILE"))enqueue([go$copyFile,[e,t,r,n],i,o||Date.now(),Date.now()]);else{if(typeof n==="function")n.apply(this,arguments)}}))}}var s=e.readdir;e.readdir=readdir;var l=/^v[0-5]\./;function readdir(e,t,r){if(typeof t==="function")r=t,t=null;var n=l.test(process.version)?function go$readdir(e,t,r,n){return s(e,fs$readdirCallback(e,t,r,n))}:function go$readdir(e,t,r,n){return s(e,t,fs$readdirCallback(e,t,r,n))};return n(e,t,r);function fs$readdirCallback(e,t,r,o){return function(i,a){if(i&&(i.code==="EMFILE"||i.code==="ENFILE"))enqueue([n,[e,t,r],i,o||Date.now(),Date.now()]);else{if(a&&a.sort)a.sort();if(typeof r==="function")r.call(this,i,a)}}}}if(process.version.substr(0,4)==="v0.8"){var u=i(e);ReadStream=u.ReadStream;WriteStream=u.WriteStream}var c=e.ReadStream;if(c){ReadStream.prototype=Object.create(c.prototype);ReadStream.prototype.open=ReadStream$open}var f=e.WriteStream;if(f){WriteStream.prototype=Object.create(f.prototype);WriteStream.prototype.open=WriteStream$open}Object.defineProperty(e,"ReadStream",{get:function(){return ReadStream},set:function(e){ReadStream=e},enumerable:true,configurable:true});Object.defineProperty(e,"WriteStream",{get:function(){return WriteStream},set:function(e){WriteStream=e},enumerable:true,configurable:true});var d=ReadStream;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(e){d=e},enumerable:true,configurable:true});var h=WriteStream;Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:true,configurable:true});function ReadStream(e,t){if(this instanceof ReadStream)return c.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function ReadStream$open(){var e=this;open(e.path,e.flags,e.mode,(function(t,r){if(t){if(e.autoClose)e.destroy();e.emit("error",t)}else{e.fd=r;e.emit("open",r);e.read()}}))}function WriteStream(e,t){if(this instanceof WriteStream)return f.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments)}function WriteStream$open(){var e=this;open(e.path,e.flags,e.mode,(function(t,r){if(t){e.destroy();e.emit("error",t)}else{e.fd=r;e.emit("open",r)}}))}function createReadStream(t,r){return new e.ReadStream(t,r)}function createWriteStream(t,r){return new e.WriteStream(t,r)}var p=e.open;e.open=open;function open(e,t,r,n){if(typeof r==="function")n=r,r=null;return go$open(e,t,r,n);function go$open(e,t,r,n,o){return p(e,t,r,(function(i,a){if(i&&(i.code==="EMFILE"||i.code==="ENFILE"))enqueue([go$open,[e,t,r,n],i,o||Date.now(),Date.now()]);else{if(typeof n==="function")n.apply(this,arguments)}}))}}return e}function enqueue(e){c("ENQUEUE",e[0].name,e[1]);n[l].push(e);retry()}var d;function resetQueue(){var e=Date.now();for(var t=0;t<n[l].length;++t){if(n[l][t].length>2){n[l][t][3]=e;n[l][t][4]=e}}retry()}function retry(){clearTimeout(d);d=undefined;if(n[l].length===0)return;var e=n[l].shift();var t=e[0];var r=e[1];var o=e[2];var i=e[3];var a=e[4];if(i===undefined){c("RETRY",t.name,r);t.apply(null,r)}else if(Date.now()-i>=6e4){c("TIMEOUT",t.name,r);var s=r.pop();if(typeof s==="function")s.call(null,o)}else{var u=Date.now()-a;var f=Math.max(a-i,1);var h=Math.min(f*1.2,100);if(u>=h){c("RETRY",t.name,r);t.apply(null,r.concat([i]))}else{n[l].push(e)}}if(d===undefined){d=setTimeout(retry,0)}}},3086:(e,t,r)=>{var n=r(2781).Stream;e.exports=legacy;function legacy(e){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(t,r){if(!(this instanceof ReadStream))return new ReadStream(t,r);n.call(this);var o=this;this.path=t;this.fd=null;this.readable=true;this.paused=false;this.flags="r";this.mode=438;this.bufferSize=64*1024;r=r||{};var i=Object.keys(r);for(var a=0,s=i.length;a<s;a++){var l=i[a];this[l]=r[l]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.end===undefined){this.end=Infinity}else if("number"!==typeof this.end){throw TypeError("end must be a Number")}if(this.start>this.end){throw new Error("start must be <= end")}this.pos=this.start}if(this.fd!==null){process.nextTick((function(){o._read()}));return}e.open(this.path,this.flags,this.mode,(function(e,t){if(e){o.emit("error",e);o.readable=false;return}o.fd=t;o.emit("open",t);o._read()}))}function WriteStream(t,r){if(!(this instanceof WriteStream))return new WriteStream(t,r);n.call(this);this.path=t;this.fd=null;this.writable=true;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;r=r||{};var o=Object.keys(r);for(var i=0,a=o.length;i<a;i++){var s=o[i];this[s]=r[s]}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.start<0){throw new Error("start must be >= zero")}this.pos=this.start}this.busy=false;this._queue=[];if(this.fd===null){this._open=e.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush()}}}},263:(e,t,r)=>{var n=r(2057);var o=process.cwd;var i=null;var a=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!i)i=o.call(process);return i};try{process.cwd()}catch(e){}if(typeof process.chdir==="function"){var s=process.chdir;process.chdir=function(e){i=null;s.call(process,e)};if(Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,s)}e.exports=patch;function patch(e){if(n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(e)}if(!e.lutimes){patchLutimes(e)}e.chown=chownFix(e.chown);e.fchown=chownFix(e.fchown);e.lchown=chownFix(e.lchown);e.chmod=chmodFix(e.chmod);e.fchmod=chmodFix(e.fchmod);e.lchmod=chmodFix(e.lchmod);e.chownSync=chownFixSync(e.chownSync);e.fchownSync=chownFixSync(e.fchownSync);e.lchownSync=chownFixSync(e.lchownSync);e.chmodSync=chmodFixSync(e.chmodSync);e.fchmodSync=chmodFixSync(e.fchmodSync);e.lchmodSync=chmodFixSync(e.lchmodSync);e.stat=statFix(e.stat);e.fstat=statFix(e.fstat);e.lstat=statFix(e.lstat);e.statSync=statFixSync(e.statSync);e.fstatSync=statFixSync(e.fstatSync);e.lstatSync=statFixSync(e.lstatSync);if(e.chmod&&!e.lchmod){e.lchmod=function(e,t,r){if(r)process.nextTick(r)};e.lchmodSync=function(){}}if(e.chown&&!e.lchown){e.lchown=function(e,t,r,n){if(n)process.nextTick(n)};e.lchownSync=function(){}}if(a==="win32"){e.rename=typeof e.rename!=="function"?e.rename:function(t){function rename(r,n,o){var i=Date.now();var a=0;t(r,n,(function CB(s){if(s&&(s.code==="EACCES"||s.code==="EPERM")&&Date.now()-i<6e4){setTimeout((function(){e.stat(n,(function(e,i){if(e&&e.code==="ENOENT")t(r,n,CB);else o(s)}))}),a);if(a<100)a+=10;return}if(o)o(s)}))}if(Object.setPrototypeOf)Object.setPrototypeOf(rename,t);return rename}(e.rename)}e.read=typeof e.read!=="function"?e.read:function(t){function read(r,n,o,i,a,s){var l;if(s&&typeof s==="function"){var u=0;l=function(c,f,d){if(c&&c.code==="EAGAIN"&&u<10){u++;return t.call(e,r,n,o,i,a,l)}s.apply(this,arguments)}}return t.call(e,r,n,o,i,a,l)}if(Object.setPrototypeOf)Object.setPrototypeOf(read,t);return read}(e.read);e.readSync=typeof e.readSync!=="function"?e.readSync:function(t){return function(r,n,o,i,a){var s=0;while(true){try{return t.call(e,r,n,o,i,a)}catch(e){if(e.code==="EAGAIN"&&s<10){s++;continue}throw e}}}}(e.readSync);function patchLchmod(e){e.lchmod=function(t,r,o){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){if(t){if(o)o(t);return}e.fchmod(n,r,(function(t){e.close(n,(function(e){if(o)o(t||e)}))}))}))};e.lchmodSync=function(t,r){var o=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r);var i=true;var a;try{a=e.fchmodSync(o,r);i=false}finally{if(i){try{e.closeSync(o)}catch(e){}}else{e.closeSync(o)}}return a}}function patchLutimes(e){if(n.hasOwnProperty("O_SYMLINK")&&e.futimes){e.lutimes=function(t,r,o,i){e.open(t,n.O_SYMLINK,(function(t,n){if(t){if(i)i(t);return}e.futimes(n,r,o,(function(t){e.close(n,(function(e){if(i)i(t||e)}))}))}))};e.lutimesSync=function(t,r,o){var i=e.openSync(t,n.O_SYMLINK);var a;var s=true;try{a=e.futimesSync(i,r,o);s=false}finally{if(s){try{e.closeSync(i)}catch(e){}}else{e.closeSync(i)}}return a}}else if(e.futimes){e.lutimes=function(e,t,r,n){if(n)process.nextTick(n)};e.lutimesSync=function(){}}}function chmodFix(t){if(!t)return t;return function(r,n,o){return t.call(e,r,n,(function(e){if(chownErOk(e))e=null;if(o)o.apply(this,arguments)}))}}function chmodFixSync(t){if(!t)return t;return function(r,n){try{return t.call(e,r,n)}catch(e){if(!chownErOk(e))throw e}}}function chownFix(t){if(!t)return t;return function(r,n,o,i){return t.call(e,r,n,o,(function(e){if(chownErOk(e))e=null;if(i)i.apply(this,arguments)}))}}function chownFixSync(t){if(!t)return t;return function(r,n,o){try{return t.call(e,r,n,o)}catch(e){if(!chownErOk(e))throw e}}}function statFix(t){if(!t)return t;return function(r,n,o){if(typeof n==="function"){o=n;n=null}function callback(e,t){if(t){if(t.uid<0)t.uid+=4294967296;if(t.gid<0)t.gid+=4294967296}if(o)o.apply(this,arguments)}return n?t.call(e,r,n,callback):t.call(e,r,callback)}}function statFixSync(t){if(!t)return t;return function(r,n){var o=n?t.call(e,r,n):t.call(e,r);if(o){if(o.uid<0)o.uid+=4294967296;if(o.gid<0)o.gid+=4294967296}return o}}function chownErOk(e){if(!e)return true;if(e.code==="ENOSYS")return true;var t=!process.getuid||process.getuid()!==0;if(t){if(e.code==="EINVAL"||e.code==="EPERM")return true}return false}}},5252:(e,t,r)=>{"use strict";const n=r(1128);const{fromString:o}=r(3538);class Bucket{constructor(e,t,r=0){this._options=e;this._popCount=0;this._parent=t;this._posAtParent=r;this._children=new n;this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t){return t.value}}async del(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r&&r.key===e){t.bucket._delAt(t.pos)}}leafCount(){const e=this._children.compactArray();return e.reduce(((e,t)=>{if(t instanceof Bucket){return e+t.leafCount()}return e+1}),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e){if(t instanceof Bucket){yield*t.eachLeafSeries()}else{yield t}}return[]}serialize(e,t){const r=[];return t(this._children.reduce(((r,n,o)=>{if(n){if(n instanceof Bucket){r.push(n.serialize(e,t))}else{r.push(e(n,o))}}return r}),r))}asyncTransform(e,t){return asyncTransformBucket(this,e,t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r instanceof Bucket){return undefined}if(r&&r.key===e){return r}}async _findPlace(e){const t=this._options.hash(typeof e==="string"?o(e):e);const r=await t.take(this._options.bits);const n=this._children.get(r);if(n instanceof Bucket){return n._findPlace(t)}return{bucket:this,pos:r,hash:t,existingChild:n}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){const e=new Bucket(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);r.bucket._putAt(r,t.existingChild.key,t.existingChild.value);return e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){if(!this._children.get(e)){this._popCount++}this._children.set(e,t)}_delAt(e){if(e===-1){throw new Error("Invalid position")}if(this._children.get(e)){this._popCount--}this._children.unset(e);this._level()}_level(){if(this._parent&&this._popCount<=1){if(this._popCount===1){const e=this._children.find(exists);if(e&&!(e instanceof Bucket)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else{this._parent._delAt(this._posAtParent)}}}_at(e){return this._children.get(e)}}function exists(e){return Boolean(e)}function mapNode(e,t){return e.key}function reduceNodes(e){return e}async function asyncTransformBucket(e,t,r){const n=[];for(const o of e._children.compactArray()){if(o instanceof Bucket){await asyncTransformBucket(o,t,r)}else{const r=await t(o);n.push({bitField:e._children.bitField(),children:r})}}return r(n)}e.exports=Bucket},6514:e=>{"use strict";const t=[255,254,252,248,240,224,192,128];const r=[1,3,7,15,31,63,127,255];e.exports=class ConsumableBuffer{constructor(e){this._value=e;this._currentBytePos=e.length-1;this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e;let r=0;while(t&&this._haveBits()){const e=this._value[this._currentBytePos];const n=this._currentBitPos+1;const o=Math.min(n,t);const i=byteBitsToInt(e,n-o,o);r=(r<<o)+i;t-=o;this._currentBitPos-=o;if(this._currentBitPos<0){this._currentBitPos=7;this._currentBytePos--}}return r}untake(e){this._currentBitPos+=e;while(this._currentBitPos>7){this._currentBitPos-=8;this._currentBytePos+=1}}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(e,t,r){const n=maskFor(t,r);return(e&n)>>>t}function maskFor(e,n){return t[e]&r[Math.min(n+e-1,7)]}},2950:(e,t,r)=>{"use strict";const n=r(6514);const{concat:o}=r(5114);function wrapHash(e){function hashing(t){if(t instanceof InfiniteHash){return t}else{return new InfiniteHash(t,e)}}return hashing}class InfiniteHash{constructor(e,t){if(!(e instanceof Uint8Array)){throw new Error("can only hash Uint8Arrays")}this._value=e;this._hashFn=t;this._depth=-1;this._availableBits=0;this._currentBufferIndex=0;this._buffers=[]}async take(e){let t=e;while(this._availableBits<t){await this._produceMoreBits()}let r=0;while(t>0){const e=this._buffers[this._currentBufferIndex];const n=Math.min(e.availableBits(),t);const o=e.take(n);r=(r<<n)+o;t-=n;this._availableBits-=n;if(e.availableBits()===0){this._currentBufferIndex++}}return r}untake(e){let t=e;while(t>0){const e=this._buffers[this._currentBufferIndex];const r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r);t-=r;this._availableBits+=r;if(this._currentBufferIndex>0&&e.totalBits()===e.availableBits()){this._depth--;this._currentBufferIndex--}}}async _produceMoreBits(){this._depth++;const e=this._depth?o([this._value,Uint8Array.from([this._depth])]):this._value;const t=await this._hashFn(e);const r=new n(t);this._buffers.push(r);this._availableBits+=r.availableBits()}}e.exports=wrapHash;e.exports.InfiniteHash=InfiniteHash},7820:(e,t,r)=>{"use strict";const n=r(5252);const o=r(2950);function createHAMT(e){if(!e||!e.hashFn){throw new Error("please define an options.hashFn")}const t={bits:e.bits||8,hash:o(e.hashFn)};return new n(t)}e.exports={createHAMT:createHAMT,Bucket:n}},5810:e=>{"use strict";const all=async e=>{const t=[];for await(const r of e){t.push(r)}return t};e.exports=all},3454:e=>{"use strict";async function*batch(e,t=1){let r=[];if(t<1){t=1}for await(const n of e){r.push(n);while(r.length>=t){yield r.slice(0,t);r=r.slice(t)}}while(r.length){yield r.slice(0,t);r=r.slice(t)}}e.exports=batch},7351:e=>{"use strict";const drain=async e=>{for await(const t of e){}};e.exports=drain},2220:e=>{"use strict";const filter=async function*(e,t){for await(const r of e){if(await t(r)){yield r}}};e.exports=filter},402:(e,t,r)=>{"use strict";const n=r(7147).promises;const o=r(1017);const i=r(3973);async function*glob(e,t,r={}){const a=o.resolve(e);const s=o.relative(r.cwd||process.cwd(),e);const l=await n.stat(a);if(l.isDirectory()){for await(const e of _glob(a,"",t,r)){yield e}return}if(i(s,t,r)){yield r.absolute?a:s}}async function*_glob(e,t,r,a){for await(const s of await n.readdir(o.join(e,t))){const l=o.join(t,s);const u=o.join(e,t,s);const c=await n.stat(u);let f=i(l,r,a);if(a.ignore&&f&&a.ignore.reduce(((e,t)=>e||i(l,t,a)),false)){f=false}if(f&&!(c.isDirectory()&&a.nodir)){yield a.absolute?u:l}if(c.isDirectory()){yield*_glob(e,l,r,a)}}}e.exports=glob},7123:e=>{"use strict";const last=async e=>{let t;for await(const r of e){t=r}return t};e.exports=last},8753:e=>{"use strict";const map=async function*(e,t){for await(const r of e){yield t(r)}};e.exports=map},6615:(e,t,r)=>{"use strict";const n=r(3454);async function*parallelBatch(e,t=1){for await(const r of n(e,t)){const e=r.map((e=>e().then((e=>({ok:true,value:e})),(e=>({ok:false,err:e})))));for(let t=0;t<e.length;t++){const r=await e[t];if(r.ok){yield r.value}else{throw r.err}}}}e.exports=parallelBatch},2276:e=>{"use strict";function peekableIterator(e){const[t,r]=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator];const n=[];return{peek:()=>t.next(),push:e=>{n.push(e)},next:()=>{if(n.length){return{done:false,value:n.shift()}}return t.next()},[r](){return this}}}e.exports=peekableIterator},7185:e=>{const rawPipe=(...e)=>{let t;while(e.length){t=e.shift()(t)}return t};const isIterable=e=>e&&(typeof e[Symbol.asyncIterator]==="function"||typeof e[Symbol.iterator]==="function"||typeof e.next==="function");const isDuplex=e=>e&&typeof e.sink==="function"&&isIterable(e.source);const duplexPipelineFn=e=>t=>{e.sink(t);return e.source};const pipe=(...e)=>{if(isDuplex(e[0])){const t=e[0];e[0]=()=>t.source}else if(isIterable(e[0])){const t=e[0];e[0]=()=>t}if(e.length>1){if(isDuplex(e[e.length-1])){e[e.length-1]=e[e.length-1].sink}}if(e.length>2){for(let t=1;t<e.length-1;t++){if(isDuplex(e[t])){e[t]=duplexPipelineFn(e[t])}}}return rawPipe(...e)};e.exports=pipe;e.exports.pipe=pipe;e.exports.rawPipe=rawPipe;e.exports.isIterable=isIterable;e.exports.isDuplex=isDuplex},2360:e=>{"use strict";const take=async function*(e,t){let r=0;if(t<1){return}for await(const n of e){yield n;r++;if(r===t){return}}};e.exports=take},2555:function(e,t,r){"use strict";const n=r(4089);const{hasOwnProperty:o}=Object.prototype;const{propertyIsEnumerable:i}=Object;const defineProperty=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:true,enumerable:true,configurable:true});const a=this;const s={concatArrays:false,ignoreUndefined:false};const getEnumerableOwnPropertyKeys=e=>{const t=[];for(const r in e){if(o.call(e,r)){t.push(r)}}if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r){if(i.call(e,n)){t.push(n)}}}return t};function clone(e){if(Array.isArray(e)){return cloneArray(e)}if(n(e)){return cloneOptionObject(e)}return e}function cloneArray(e){const t=e.slice(0,0);getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty(t,r,clone(e[r]))}));return t}function cloneOptionObject(e){const t=Object.getPrototypeOf(e)===null?Object.create(null):{};getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty(t,r,clone(e[r]))}));return t}const mergeKeys=(e,t,r,n)=>{r.forEach((r=>{if(typeof t[r]==="undefined"&&n.ignoreUndefined){return}if(r in e&&e[r]!==Object.getPrototypeOf(e)){defineProperty(e,r,merge(e[r],t[r],n))}else{defineProperty(e,r,clone(t[r]))}}));return e};const concatArrays=(e,t,r)=>{let n=e.slice(0,0);let i=0;[e,t].forEach((t=>{const a=[];for(let r=0;r<t.length;r++){if(!o.call(t,r)){continue}a.push(String(r));if(t===e){defineProperty(n,i++,t[r])}else{defineProperty(n,i++,clone(t[r]))}}n=mergeKeys(n,t,getEnumerableOwnPropertyKeys(t).filter((e=>!a.includes(e))),r)}));return n};function merge(e,t,r){if(r.concatArrays&&Array.isArray(e)&&Array.isArray(t)){return concatArrays(e,t,r)}if(!n(t)||!n(e)){return clone(t)}return mergeKeys(e,t,getEnumerableOwnPropertyKeys(t),r)}e.exports=function(...e){const t=merge(clone(s),this!==a&&this||{},s);let r={_:{}};for(const o of e){if(o===undefined){continue}if(!n(o)){throw new TypeError("`"+o+"` is not an Option Object")}r=merge(r,{_:o},t)}return r._}},4089:e=>{"use strict";e.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]"){return false}const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}},3973:(e,t,r)=>{e.exports=minimatch;minimatch.Minimatch=Minimatch;var n=function(){try{return r(1017)}catch(e){}}()||{sep:"/"};minimatch.sep=n.sep;var o=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var i=r(3717);var a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var s="[^/]";var l=s+"*?";var u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var c="(?:(?!(?:\\/|^)\\.).)*?";var f=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce((function(e,t){e[t]=true;return e}),{})}var d=/\/+/;minimatch.filter=filter;function filter(e,t){t=t||{};return function(r,n,o){return minimatch(r,e,t)}}function ext(e,t){t=t||{};var r={};Object.keys(e).forEach((function(t){r[t]=e[t]}));Object.keys(t).forEach((function(e){r[e]=t[e]}));return r}minimatch.defaults=function(e){if(!e||typeof e!=="object"||!Object.keys(e).length){return minimatch}var t=minimatch;var r=function minimatch(r,n,o){return t(r,n,ext(e,o))};r.Minimatch=function Minimatch(r,n){return new t.Minimatch(r,ext(e,n))};r.Minimatch.defaults=function defaults(r){return t.defaults(ext(e,r)).Minimatch};r.filter=function filter(r,n){return t.filter(r,ext(e,n))};r.defaults=function defaults(r){return t.defaults(ext(e,r))};r.makeRe=function makeRe(r,n){return t.makeRe(r,ext(e,n))};r.braceExpand=function braceExpand(r,n){return t.braceExpand(r,ext(e,n))};r.match=function(r,n,o){return t.match(r,n,ext(e,o))};return r};Minimatch.defaults=function(e){return minimatch.defaults(e).Minimatch};function minimatch(e,t,r){assertValidPattern(t);if(!r)r={};if(!r.nocomment&&t.charAt(0)==="#"){return false}return new Minimatch(t,r).match(e)}function Minimatch(e,t){if(!(this instanceof Minimatch)){return new Minimatch(e,t)}assertValidPattern(e);if(!t)t={};e=e.trim();if(!t.allowWindowsEscape&&n.sep!=="/"){e=e.split(n.sep).join("/")}this.options=t;this.set=[];this.pattern=e;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.partial=!!t.partial;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){var e=this.pattern;var t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();var r=this.globSet=this.braceExpand();if(t.debug)this.debug=function debug(){console.error.apply(console,arguments)};this.debug(this.pattern,r);r=this.globParts=r.map((function(e){return e.split(d)}));this.debug(this.pattern,r);r=r.map((function(e,t,r){return e.map(this.parse,this)}),this);this.debug(this.pattern,r);r=r.filter((function(e){return e.indexOf(false)===-1}));this.debug(this.pattern,r);this.set=r}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var e=this.pattern;var t=false;var r=this.options;var n=0;if(r.nonegate)return;for(var o=0,i=e.length;o<i&&e.charAt(o)==="!";o++){t=!t;n++}if(n)this.pattern=e.substr(n);this.negate=t}minimatch.braceExpand=function(e,t){return braceExpand(e,t)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(e,t){if(!t){if(this instanceof Minimatch){t=this.options}else{t={}}}e=typeof e==="undefined"?this.pattern:e;assertValidPattern(e);if(t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)){return[e]}return i(e)}var h=1024*64;var assertValidPattern=function(e){if(typeof e!=="string"){throw new TypeError("invalid pattern")}if(e.length>h){throw new TypeError("pattern is too long")}};Minimatch.prototype.parse=parse;var p={};function parse(e,t){assertValidPattern(e);var r=this.options;if(e==="**"){if(!r.noglobstar)return o;else e="*"}if(e==="")return"";var n="";var i=!!r.nocase;var u=false;var c=[];var d=[];var h;var m=false;var y=-1;var b=-1;var g=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var _=this;function clearStateChar(){if(h){switch(h){case"*":n+=l;i=true;break;case"?":n+=s;i=true;break;default:n+="\\"+h;break}_.debug("clearStateChar %j %j",h,n);h=false}}for(var w=0,v=e.length,S;w<v&&(S=e.charAt(w));w++){this.debug("%s\t%s %s %j",e,w,n,S);if(u&&f[S]){n+="\\"+S;u=false;continue}switch(S){case"/":{return false}case"\\":clearStateChar();u=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",e,w,n,S);if(m){this.debug("  in class");if(S==="!"&&w===b+1)S="^";n+=S;continue}_.debug("call clearStateChar %j",h);clearStateChar();h=S;if(r.noext)clearStateChar();continue;case"(":if(m){n+="(";continue}if(!h){n+="\\(";continue}c.push({type:h,start:w-1,reStart:n.length,open:a[h].open,close:a[h].close});n+=h==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",h,n);h=false;continue;case")":if(m||!c.length){n+="\\)";continue}clearStateChar();i=true;var R=c.pop();n+=R.close;if(R.type==="!"){d.push(R)}R.reEnd=n.length;continue;case"|":if(m||!c.length||u){n+="\\|";u=false;continue}clearStateChar();n+="|";continue;case"[":clearStateChar();if(m){n+="\\"+S;continue}m=true;b=w;y=n.length;n+=S;continue;case"]":if(w===b+1||!m){n+="\\"+S;u=false;continue}var C=e.substring(b+1,w);try{RegExp("["+C+"]")}catch(e){var k=this.parse(C,p);n=n.substr(0,y)+"\\["+k[0]+"\\]";i=i||k[1];m=false;continue}i=true;m=false;n+=S;continue;default:clearStateChar();if(u){u=false}else if(f[S]&&!(S==="^"&&m)){n+="\\"}n+=S}}if(m){C=e.substr(b+1);k=this.parse(C,p);n=n.substr(0,y)+"\\["+k[0];i=i||k[1]}for(R=c.pop();R;R=c.pop()){var T=n.slice(R.reStart+R.open.length);this.debug("setting tail",n,R);T=T.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){if(!r){r="\\"}return t+t+r+"|"}));this.debug("tail=%j\n   %s",T,T,R,n);var E=R.type==="*"?l:R.type==="?"?s:"\\"+R.type;i=true;n=n.slice(0,R.reStart)+E+"\\("+T}clearStateChar();if(u){n+="\\\\"}var A=false;switch(n.charAt(0)){case"[":case".":case"(":A=true}for(var B=d.length-1;B>-1;B--){var x=d[B];var I=n.slice(0,x.reStart);var D=n.slice(x.reStart,x.reEnd-8);var O=n.slice(x.reEnd-8,x.reEnd);var P=n.slice(x.reEnd);O+=P;var j=I.split("(").length-1;var W=P;for(w=0;w<j;w++){W=W.replace(/\)[+*?]?/,"")}P=W;var U="";if(P===""&&t!==p){U="$"}var L=I+D+P+U+O;n=L}if(n!==""&&i){n="(?=.)"+n}if(A){n=g+n}if(t===p){return[n,i]}if(!i){return globUnescape(e)}var M=r.nocase?"i":"";try{var q=new RegExp("^"+n+"$",M)}catch(e){return new RegExp("$.")}q._glob=e;q._src=n;return q}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var e=this.set;if(!e.length){this.regexp=false;return this.regexp}var t=this.options;var r=t.noglobstar?l:t.dot?u:c;var n=t.nocase?"i":"";var i=e.map((function(e){return e.map((function(e){return e===o?r:typeof e==="string"?regExpEscape(e):e._src})).join("\\/")})).join("|");i="^(?:"+i+")$";if(this.negate)i="^(?!"+i+").*$";try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=false}return this.regexp}minimatch.match=function(e,t,r){r=r||{};var n=new Minimatch(t,r);e=e.filter((function(e){return n.match(e)}));if(n.options.nonull&&!e.length){e.push(t)}return e};Minimatch.prototype.match=function match(e,t){if(typeof t==="undefined")t=this.partial;this.debug("match",e,this.pattern);if(this.comment)return false;if(this.empty)return e==="";if(e==="/"&&t)return true;var r=this.options;if(n.sep!=="/"){e=e.split(n.sep).join("/")}e=e.split(d);this.debug(this.pattern,"split",e);var o=this.set;this.debug(this.pattern,"set",o);var i;var a;for(a=e.length-1;a>=0;a--){i=e[a];if(i)break}for(a=0;a<o.length;a++){var s=o[a];var l=e;if(r.matchBase&&s.length===1){l=[i]}var u=this.matchOne(l,s,t);if(u){if(r.flipNegate)return true;return!this.negate}}if(r.flipNegate)return false;return this.negate};Minimatch.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var i=0,a=0,s=e.length,l=t.length;i<s&&a<l;i++,a++){this.debug("matchOne loop");var u=t[a];var c=e[i];this.debug(t,u,c);if(u===false)return false;if(u===o){this.debug("GLOBSTAR",[t,u,c]);var f=i;var d=a+1;if(d===l){this.debug("** at the end");for(;i<s;i++){if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return false}return true}while(f<s){var h=e[f];this.debug("\nglobstar while",e,f,t,d,h);if(this.matchOne(e.slice(f),t.slice(d),r)){this.debug("globstar found match!",f,s,h);return true}else{if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,f,t,d);break}this.debug("globstar swallow a segment, and continue");f++}}if(r){this.debug("\n>>> no match, partial?",e,f,t,d);if(f===s)return true}return false}var p;if(typeof u==="string"){p=c===u;this.debug("string match",u,c,p)}else{p=c.match(u);this.debug("pattern match",u,c,p)}if(!p)return false}if(i===s&&a===l){return true}else if(i===s){return r}else if(a===l){return i===s-1&&e[i]===""}throw new Error("wtf?")};function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},5653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(228);var o=r(6507);class Encoder{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class Decoder{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const or=(e,t)=>new ComposedDecoder({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Codec{constructor(e,t,r,n){this.name=e;this.prefix=t;this.baseEncode=r;this.baseDecode=n;this.encoder=new Encoder(e,t,r);this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:e,prefix:t,encode:r,decode:n})=>new Codec(e,t,r,n);const baseX=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:a}=n(r,t);return from({prefix:e,name:t,encode:i,decode:e=>o.coerce(a(e))})};const decode=(e,t,r,n)=>{const o={};for(let e=0;e<t.length;++e){o[t[e]]=e}let i=e.length;while(e[i-1]==="="){--i}const a=new Uint8Array(i*r/8|0);let s=0;let l=0;let u=0;for(let t=0;t<i;++t){const i=o[e[t]];if(i===undefined){throw new SyntaxError(`Non-${n} character`)}l=l<<r|i;s+=r;if(s>=8){s-=8;a[u++]=255&l>>s}}if(s>=r||255&l<<8-s){throw new SyntaxError("Unexpected end of data")}return a};const encode=(e,t,r)=>{const n=t[t.length-1]==="=";const o=(1<<r)-1;let i="";let a=0;let s=0;for(let n=0;n<e.length;++n){s=s<<8|e[n];a+=8;while(a>r){a-=r;i+=t[o&s>>a]}}if(a){i+=t[o&s<<r-a]}if(n){while(i.length*r&7){i+="="}}return i};const rfc4648=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>from({prefix:t,name:e,encode(e){return encode(e,n,r)},decode(t){return decode(t,n,r,e)}});t.Codec=Codec;t.baseX=baseX;t.from=from;t.or=or;t.rfc4648=rfc4648},6196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=o},2168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=n.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=o;t.base16upper=i},9383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=o},899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=Array.from("");const i=o.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const a=o.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function encode(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function decode(e){const t=[];for(const r of e){const e=a[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const s=n.from({prefix:"",name:"base256emoji",encode:encode,decode:decode});t.base256emoji=s},2884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=n.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const a=n.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=n.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const l=n.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const u=n.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const c=n.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const f=n.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const d=n.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=o;t.base32hex=l;t.base32hexpad=c;t.base32hexpadupper=f;t.base32hexupper=u;t.base32pad=a;t.base32padupper=s;t.base32upper=i;t.base32z=d},9587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=n.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=o;t.base36upper=i},5648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=n.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=o;t.base58flickr=i},3095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=n.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const a=n.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=n.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=o;t.base64pad=i;t.base64url=a;t.base64urlpad=s},7233:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);const o=n.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=o},7197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(5653);var o=r(6507);const i=n.from({prefix:"\0",name:"identity",encode:e=>o.toString(e),decode:e=>o.fromString(e)});t.identity=i},1046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(7197);var o=r(9383);var i=r(7233);var a=r(6196);var s=r(2168);var l=r(2884);var u=r(9587);var c=r(5648);var f=r(3095);var d=r(899);var h=r(6987);var p=r(2379);var m=r(2048);var y=r(5336);r(5978);var b=r(6447);var g=r(92);var _=r(76);var w=r(4972);var v=r(6507);const S={...n,...o,...i,...a,...s,...l,...u,...c,...f,...d};const R={...h,...p};const C={raw:m,json:y};t.CID=b.CID;t.hasher=g;t.digest=_;t.varint=w;t.bytes=v;t.bases=S;t.codecs=C;t.hashes=R},6507:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const toHex=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const fromHex=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const equals=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const coerce=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const fromString=e=>(new TextEncoder).encode(e);const toString=e=>(new TextDecoder).decode(e);t.coerce=coerce;t.empty=r;t.equals=equals;t.fromHex=fromHex;t.fromString=fromString;t.isBinary=isBinary;t.toHex=toHex;t.toString=toString},6447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4972);var o=r(76);var i=r(5648);var a=r(2884);var s=r(6507);class CID{constructor(e,t,r,n){this.code=t;this.version=e;this.multihash=r;this.bytes=n;this.byteOffset=n.byteOffset;this.byteLength=n.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:d,byteLength:d,code:f,version:f,multihash:f,bytes:f,_baseCache:d,asCID:d})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==l){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==u){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return CID.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const r=o.create(e,t);return CID.createV1(this.code,r)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&o.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return toStringV0(t,n,e||i.base58btc.encoder);default:return toStringV1(t,n,e||a.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){deprecate(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID){return e}else if(e!=null&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:o}=e;return new CID(t,r,n,o||encodeCID(t,r,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:r,code:n}=e;const i=o.decode(r);return CID.create(t,n,i)}else{return null}}static create(e,t,r){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==l){throw new Error(`Version 0 CID must use dag-pb (code: ${l}) block encoding`)}else{return new CID(e,t,r,r.bytes)}}case 1:{const n=encodeCID(e,t,r.bytes);return new CID(e,t,r,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return CID.create(0,l,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,r]=CID.decodeFirst(e);if(r.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=CID.inspectBytes(e);const r=t.size-t.multihashSize;const n=s.coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const i=n.subarray(t.multihashSize-t.digestSize);const a=new o.Digest(t.multihashCode,t.digestSize,i,n);const l=t.version===0?CID.createV0(a):CID.createV1(t.codec,a);return[l,e.subarray(t.size)]}static inspectBytes(e){let t=0;const next=()=>{const[r,o]=n.decode(e.subarray(t));t+=o;return r};let r=next();let o=l;if(r===18){r=0;t=0}else if(r===1){o=next()}if(r!==0&&r!==1){throw new RangeError(`Invalid CID version ${r}`)}const i=t;const a=next();const s=next();const u=t+s;const c=u-i;return{version:r,codec:o,multihashCode:a,digestSize:s,multihashSize:c,size:u}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t);const o=CID.decode(n);o._baseCache.set(r,e);return o}}const parseCIDtoBytes=(e,t)=>{switch(e[0]){case"Q":{const r=t||i.base58btc;return[i.base58btc.prefix,r.decode(`${i.base58btc.prefix}${e}`)]}case i.base58btc.prefix:{const r=t||i.base58btc;return[i.base58btc.prefix,r.decode(e)]}case a.base32.prefix:{const r=t||a.base32;return[a.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const toStringV0=(e,t,r)=>{const{prefix:n}=r;if(n!==i.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const o=t.get(n);if(o==null){const o=r.encode(e).slice(1);t.set(n,o);return o}else{return o}};const toStringV1=(e,t,r)=>{const{prefix:n}=r;const o=t.get(n);if(o==null){const o=r.encode(e);t.set(n,o);return o}else{return o}};const l=112;const u=18;const encodeCID=(e,t,r)=>{const o=n.encodingLength(e);const i=o+n.encodingLength(t);const a=new Uint8Array(i+r.byteLength);n.encodeTo(e,a,0);n.encodeTo(t,a,o);a.set(r,i);return a};const c=Symbol.for("@ipld/js-cid/CID");const f={writable:false,configurable:false,enumerable:true};const d={writable:false,enumerable:false,configurable:false};const h="0.0.0-dev";const deprecate=(e,t)=>{if(e.test(h)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=CID},5336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const n=new TextDecoder;const o="json";const i=512;const encode=e=>r.encode(JSON.stringify(e));const decode=e=>JSON.parse(n.decode(e));t.code=i;t.decode=decode;t.encode=encode;t.name=o},2048:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6507);const o="raw";const i=85;const encode=e=>n.coerce(e);const decode=e=>n.coerce(e);t.code=i;t.decode=decode;t.encode=encode;t.name=o},76:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6507);var o=r(4972);const create=(e,t)=>{const r=t.byteLength;const n=o.encodingLength(e);const i=n+o.encodingLength(r);const a=new Uint8Array(i+r);o.encodeTo(e,a,0);o.encodeTo(r,a,n);a.set(t,i);return new Digest(e,r,t,a)};const decode=e=>{const t=n.coerce(e);const[r,i]=o.decode(t);const[a,s]=o.decode(t.subarray(i));const l=t.subarray(i+s);if(l.byteLength!==a){throw new Error("Incorrect length")}return new Digest(r,a,l,t)};const equals=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&n.equals(e.bytes,t.bytes)}};class Digest{constructor(e,t,r,n){this.code=e;this.size=t;this.digest=r;this.bytes=n}}t.Digest=Digest;t.create=create;t.decode=decode;t.equals=equals},92:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(76);const from=({name:e,code:t,encode:r})=>new Hasher(e,t,r);class Hasher{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?n.create(this.code,t):t.then((e=>n.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=Hasher;t.from=from},2379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6507);var o=r(76);const i=0;const a="identity";const s=n.coerce;const digest=e=>o.create(i,s(e));const l={code:i,name:a,encode:s,digest:digest};t.identity=l},6987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6113);var o=r(92);var i=r(6507);function _interopDefaultLegacy(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var a=_interopDefaultLegacy(n);const s=o.from({name:"sha2-256",code:18,encode:e=>i.coerce(a["default"].createHash("sha256").update(e).digest())});const l=o.from({name:"sha2-512",code:19,encode:e=>i.coerce(a["default"].createHash("sha512").update(e).digest())});t.sha256=s;t.sha512=l},5978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6447);var o=r(4972);var i=r(6507);var a=r(92);var s=r(76);t.CID=n.CID;t.varint=o;t.bytes=i;t.hasher=a;t.digest=s},4972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4890);const decode=e=>{const t=n.decode(e);return[t,n.decode.bytes]};const encodeTo=(e,t,r=0)=>{n.encode(e,t,r);return t};const encodingLength=e=>n.encodingLength(e);t.decode=decode;t.encodeTo=encodeTo;t.encodingLength=encodingLength},228:e=>{"use strict";function base(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var n=0;n<r.length;n++){r[n]=255}for(var o=0;o<e.length;o++){var i=e.charAt(o);var a=i.charCodeAt(0);if(r[a]!==255){throw new TypeError(i+" is ambiguous")}r[a]=o}var s=e.length;var l=e.charAt(0);var u=Math.log(s)/Math.log(256);var c=Math.log(256)/Math.log(s);function encode(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var n=0;var o=0;var i=t.length;while(o!==i&&t[o]===0){o++;r++}var a=(i-o)*c+1>>>0;var u=new Uint8Array(a);while(o!==i){var f=t[o];var d=0;for(var h=a-1;(f!==0||d<n)&&h!==-1;h--,d++){f+=256*u[h]>>>0;u[h]=f%s>>>0;f=f/s>>>0}if(f!==0){throw new Error("Non-zero carry")}n=d;o++}var p=a-n;while(p!==a&&u[p]===0){p++}var m=l.repeat(r);for(;p<a;++p){m+=e.charAt(u[p])}return m}function decodeUnsafe(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var n=0;var o=0;while(e[t]===l){n++;t++}var i=(e.length-t)*u+1>>>0;var a=new Uint8Array(i);while(e[t]){var c=r[e.charCodeAt(t)];if(c===255){return}var f=0;for(var d=i-1;(c!==0||f<o)&&d!==-1;d--,f++){c+=s*a[d]>>>0;a[d]=c%256>>>0;c=c/256>>>0}if(c!==0){throw new Error("Non-zero carry")}o=f;t++}if(e[t]===" "){return}var h=i-o;while(h!==i&&a[h]===0){h++}var p=new Uint8Array(n+(i-h));var m=n;while(h!==i){p[m++]=a[h++]}return p}function decode(e){var r=decodeUnsafe(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode}}var t=base;var r=t;e.exports=r},4890:e=>{"use strict";var t=encode;var r=128,n=127,o=~n,i=Math.pow(2,31);function encode(e,t,n){t=t||[];n=n||0;var a=n;while(e>=i){t[n++]=e&255|r;e/=128}while(e&o){t[n++]=e&255|r;e>>>=7}t[n]=e|0;encode.bytes=n-a+1;return t}var a=read;var s=128,l=127;function read(e,t){var r=0,t=t||0,n=0,o=t,i,a=e.length;do{if(o>=a){read.bytes=0;throw new RangeError("Could not decode varint")}i=e[o++];r+=n<28?(i&l)<<n:(i&l)*Math.pow(2,n);n+=7}while(i>=s);read.bytes=o-t;return r}var u=Math.pow(2,7);var c=Math.pow(2,14);var f=Math.pow(2,21);var d=Math.pow(2,28);var h=Math.pow(2,35);var p=Math.pow(2,42);var m=Math.pow(2,49);var y=Math.pow(2,56);var b=Math.pow(2,63);var length=function(e){return e<u?1:e<c?2:e<f?3:e<d?4:e<h?5:e<p?6:e<m?7:e<y?8:e<b?9:10};var g={encode:t,decode:a,encodingLength:length};var _=g;var w=_;e.exports=w},7214:(e,t,r)=>{e.exports=r(1306)},1306:function(e,t){(function(r,n){"use strict";var o={version:"3.0.0",x86:{},x64:{},inputValidation:true};function _validBytes(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e)){return false}for(var t=0;t<e.length;t++){if(!Number.isInteger(e[t])||e[t]<0||e[t]>255){return false}}return true}function _x86Multiply(e,t){return(e&65535)*t+(((e>>>16)*t&65535)<<16)}function _x86Rotl(e,t){return e<<t|e>>>32-t}function _x86Fmix(e){e^=e>>>16;e=_x86Multiply(e,2246822507);e^=e>>>13;e=_x86Multiply(e,3266489909);e^=e>>>16;return e}function _x64Add(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]+t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]+t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]+t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]+t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function _x64Multiply(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]*t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]*t[3];r[1]+=r[2]>>>16;r[2]&=65535;r[2]+=e[3]*t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]*t[3];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[2]*t[2];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[3]*t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function _x64Rotl(e,t){t%=64;if(t===32){return[e[1],e[0]]}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]}else{t-=32;return[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t]}}function _x64LeftShift(e,t){t%=64;if(t===0){return e}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t]}else{return[e[1]<<t-32,0]}}function _x64Xor(e,t){return[e[0]^t[0],e[1]^t[1]]}function _x64Fmix(e){e=_x64Xor(e,[0,e[0]>>>1]);e=_x64Multiply(e,[4283543511,3981806797]);e=_x64Xor(e,[0,e[0]>>>1]);e=_x64Multiply(e,[3301882366,444984403]);e=_x64Xor(e,[0,e[0]>>>1]);return e}o.x86.hash32=function(e,t){if(o.inputValidation&&!_validBytes(e)){return n}t=t||0;var r=e.length%4;var i=e.length-r;var a=t;var s=0;var l=3432918353;var u=461845907;for(var c=0;c<i;c=c+4){s=e[c]|e[c+1]<<8|e[c+2]<<16|e[c+3]<<24;s=_x86Multiply(s,l);s=_x86Rotl(s,15);s=_x86Multiply(s,u);a^=s;a=_x86Rotl(a,13);a=_x86Multiply(a,5)+3864292196}s=0;switch(r){case 3:s^=e[c+2]<<16;case 2:s^=e[c+1]<<8;case 1:s^=e[c];s=_x86Multiply(s,l);s=_x86Rotl(s,15);s=_x86Multiply(s,u);a^=s}a^=e.length;a=_x86Fmix(a);return a>>>0};o.x86.hash128=function(e,t){if(o.inputValidation&&!_validBytes(e)){return n}t=t||0;var r=e.length%16;var i=e.length-r;var a=t;var s=t;var l=t;var u=t;var c=0;var f=0;var d=0;var h=0;var p=597399067;var m=2869860233;var y=951274213;var b=2716044179;for(var g=0;g<i;g=g+16){c=e[g]|e[g+1]<<8|e[g+2]<<16|e[g+3]<<24;f=e[g+4]|e[g+5]<<8|e[g+6]<<16|e[g+7]<<24;d=e[g+8]|e[g+9]<<8|e[g+10]<<16|e[g+11]<<24;h=e[g+12]|e[g+13]<<8|e[g+14]<<16|e[g+15]<<24;c=_x86Multiply(c,p);c=_x86Rotl(c,15);c=_x86Multiply(c,m);a^=c;a=_x86Rotl(a,19);a+=s;a=_x86Multiply(a,5)+1444728091;f=_x86Multiply(f,m);f=_x86Rotl(f,16);f=_x86Multiply(f,y);s^=f;s=_x86Rotl(s,17);s+=l;s=_x86Multiply(s,5)+197830471;d=_x86Multiply(d,y);d=_x86Rotl(d,17);d=_x86Multiply(d,b);l^=d;l=_x86Rotl(l,15);l+=u;l=_x86Multiply(l,5)+2530024501;h=_x86Multiply(h,b);h=_x86Rotl(h,18);h=_x86Multiply(h,p);u^=h;u=_x86Rotl(u,13);u+=a;u=_x86Multiply(u,5)+850148119}c=0;f=0;d=0;h=0;switch(r){case 15:h^=e[g+14]<<16;case 14:h^=e[g+13]<<8;case 13:h^=e[g+12];h=_x86Multiply(h,b);h=_x86Rotl(h,18);h=_x86Multiply(h,p);u^=h;case 12:d^=e[g+11]<<24;case 11:d^=e[g+10]<<16;case 10:d^=e[g+9]<<8;case 9:d^=e[g+8];d=_x86Multiply(d,y);d=_x86Rotl(d,17);d=_x86Multiply(d,b);l^=d;case 8:f^=e[g+7]<<24;case 7:f^=e[g+6]<<16;case 6:f^=e[g+5]<<8;case 5:f^=e[g+4];f=_x86Multiply(f,m);f=_x86Rotl(f,16);f=_x86Multiply(f,y);s^=f;case 4:c^=e[g+3]<<24;case 3:c^=e[g+2]<<16;case 2:c^=e[g+1]<<8;case 1:c^=e[g];c=_x86Multiply(c,p);c=_x86Rotl(c,15);c=_x86Multiply(c,m);a^=c}a^=e.length;s^=e.length;l^=e.length;u^=e.length;a+=s;a+=l;a+=u;s+=a;l+=a;u+=a;a=_x86Fmix(a);s=_x86Fmix(s);l=_x86Fmix(l);u=_x86Fmix(u);a+=s;a+=l;a+=u;s+=a;l+=a;u+=a;return("00000000"+(a>>>0).toString(16)).slice(-8)+("00000000"+(s>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)};o.x64.hash128=function(e,t){if(o.inputValidation&&!_validBytes(e)){return n}t=t||0;var r=e.length%16;var i=e.length-r;var a=[0,t];var s=[0,t];var l=[0,0];var u=[0,0];var c=[2277735313,289559509];var f=[1291169091,658871167];for(var d=0;d<i;d=d+16){l=[e[d+4]|e[d+5]<<8|e[d+6]<<16|e[d+7]<<24,e[d]|e[d+1]<<8|e[d+2]<<16|e[d+3]<<24];u=[e[d+12]|e[d+13]<<8|e[d+14]<<16|e[d+15]<<24,e[d+8]|e[d+9]<<8|e[d+10]<<16|e[d+11]<<24];l=_x64Multiply(l,c);l=_x64Rotl(l,31);l=_x64Multiply(l,f);a=_x64Xor(a,l);a=_x64Rotl(a,27);a=_x64Add(a,s);a=_x64Add(_x64Multiply(a,[0,5]),[0,1390208809]);u=_x64Multiply(u,f);u=_x64Rotl(u,33);u=_x64Multiply(u,c);s=_x64Xor(s,u);s=_x64Rotl(s,31);s=_x64Add(s,a);s=_x64Add(_x64Multiply(s,[0,5]),[0,944331445])}l=[0,0];u=[0,0];switch(r){case 15:u=_x64Xor(u,_x64LeftShift([0,e[d+14]],48));case 14:u=_x64Xor(u,_x64LeftShift([0,e[d+13]],40));case 13:u=_x64Xor(u,_x64LeftShift([0,e[d+12]],32));case 12:u=_x64Xor(u,_x64LeftShift([0,e[d+11]],24));case 11:u=_x64Xor(u,_x64LeftShift([0,e[d+10]],16));case 10:u=_x64Xor(u,_x64LeftShift([0,e[d+9]],8));case 9:u=_x64Xor(u,[0,e[d+8]]);u=_x64Multiply(u,f);u=_x64Rotl(u,33);u=_x64Multiply(u,c);s=_x64Xor(s,u);case 8:l=_x64Xor(l,_x64LeftShift([0,e[d+7]],56));case 7:l=_x64Xor(l,_x64LeftShift([0,e[d+6]],48));case 6:l=_x64Xor(l,_x64LeftShift([0,e[d+5]],40));case 5:l=_x64Xor(l,_x64LeftShift([0,e[d+4]],32));case 4:l=_x64Xor(l,_x64LeftShift([0,e[d+3]],24));case 3:l=_x64Xor(l,_x64LeftShift([0,e[d+2]],16));case 2:l=_x64Xor(l,_x64LeftShift([0,e[d+1]],8));case 1:l=_x64Xor(l,[0,e[d]]);l=_x64Multiply(l,c);l=_x64Rotl(l,31);l=_x64Multiply(l,f);a=_x64Xor(a,l)}a=_x64Xor(a,[0,e.length]);s=_x64Xor(s,[0,e.length]);a=_x64Add(a,s);s=_x64Add(s,a);a=_x64Fmix(a);s=_x64Fmix(s);a=_x64Add(a,s);s=_x64Add(s,a);return("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)};if(true){if(true&&e.exports){t=e.exports=o}t.murmurHash3=o}else{}})(this)},2548:(e,t,r)=>{"use strict";const n=r(4347);const o=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class AbortError extends Error{constructor(e){super();if(e instanceof Error){this.originalError=e;({message:e}=e)}else{this.originalError=new Error(e);this.originalError.stack=this.stack}this.name="AbortError";this.message=e}}const decorateErrorWithCounts=(e,t,r)=>{const n=r.retries-(t-1);e.attemptNumber=t;e.retriesLeft=n;return e};const isNetworkError=e=>o.includes(e);const pRetry=(e,t)=>new Promise(((r,o)=>{t={onFailedAttempt:()=>{},retries:10,...t};const i=n.operation(t);i.attempt((async n=>{try{r(await e(n))}catch(e){if(!(e instanceof Error)){o(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));return}if(e instanceof AbortError){i.stop();o(e.originalError)}else if(e instanceof TypeError&&!isNetworkError(e.message)){i.stop();o(e)}else{decorateErrorWithCounts(e,n,t);try{await t.onFailedAttempt(e)}catch(e){o(e);return}if(!i.retry(e)){o(i.mainError())}}}}))}));e.exports=pRetry;e.exports["default"]=pRetry;e.exports.AbortError=AbortError},6916:(e,t,r)=>{"use strict";e.exports=r(3242)},3242:(e,t,r)=>{"use strict";var n=t;n.build="minimal";n.Writer=r(3098);n.BufferWriter=r(1863);n.Reader=r(1011);n.BufferReader=r(339);n.util=r(1241);n.rpc=r(6444);n.roots=r(73);n.configure=configure;function configure(){n.util._configure();n.Writer._configure(n.BufferWriter);n.Reader._configure(n.BufferReader)}configure()},1011:(e,t,r)=>{"use strict";e.exports=Reader;var n=r(1241);var o;var i=n.LongBits,a=n.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var s=typeof Uint8Array!=="undefined"?function create_typed_array(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function create_array(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};var l=function create(){return n.Buffer?function create_buffer_setup(e){return(Reader.create=function create_buffer(e){return n.Buffer.isBuffer(e)?new o(e):s(e)})(e)}:s};Reader.create=l();Reader.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice;Reader.prototype.uint32=function read_uint32_setup(){var e=4294967295;return function read_uint32(){e=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return e}}();Reader.prototype.int32=function read_int32(){return this.uint32()|0};Reader.prototype.sint32=function read_sint32(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var e=new i(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function read_bool(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new i(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=n.float.readFloatLE(this.buf,this.pos);this.pos+=4;return e};Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return e};Reader.prototype.bytes=function read_bytes(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);this.pos+=e;if(Array.isArray(this.buf))return this.buf.slice(t,r);return t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)};Reader.prototype.string=function read_string(){var e=this.bytes();return a.read(e,0,e.length)};Reader.prototype.skip=function skip(e){if(typeof e==="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){o=e;Reader.create=l();o._configure();var t=n.Long?"toLong":"toNumber";n.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[t](false)},uint64:function read_uint64(){return readLongVarint.call(this)[t](true)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function read_fixed64(){return readFixed64.call(this)[t](true)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[t](false)}})}},339:(e,t,r)=>{"use strict";e.exports=BufferReader;var n=r(1011);(BufferReader.prototype=Object.create(n.prototype)).constructor=BufferReader;var o=r(1241);function BufferReader(e){n.call(this,e)}BufferReader._configure=function(){if(o.Buffer)BufferReader.prototype._slice=o.Buffer.prototype.slice};BufferReader.prototype.string=function read_string_buffer(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure()},73:e=>{"use strict";e.exports={}},6444:(e,t,r)=>{"use strict";var n=t;n.Service=r(2439)},2439:(e,t,r)=>{"use strict";e.exports=Service;var n=r(1241);(Service.prototype=Object.create(n.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function rpcCall(e,t,r,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return n.asPromise(rpcCall,a,e,t,r,o);if(!a.rpcImpl){setTimeout((function(){i(Error("already ended"))}),0);return undefined}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function rpcCallback(t,n){if(t){a.emit("error",t,e);return i(t)}if(n===null){a.end(true);return undefined}if(!(n instanceof r)){try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){a.emit("error",t,e);return i(t)}}a.emit("data",n,e);return i(null,n)}))}catch(t){a.emit("error",t,e);setTimeout((function(){i(t)}),0);return undefined}};Service.prototype.end=function end(e){if(this.rpcImpl){if(!e)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},8374:(e,t,r)=>{"use strict";e.exports=LongBits;var n=r(1241);function LongBits(e,t){this.lo=e>>>0;this.hi=t>>>0}var o=LongBits.zero=new LongBits(0,0);o.toNumber=function(){return 0};o.zzEncode=o.zzDecode=function(){return this};o.length=function(){return 1};var i=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(e){if(e===0)return o;var t=e<0;if(t)e=-e;var r=e>>>0,n=(e-r)/4294967296>>>0;if(t){n=~n>>>0;r=~r>>>0;if(++r>4294967295){r=0;if(++n>4294967295)n=0}}return new LongBits(r,n)};LongBits.from=function from(e){if(typeof e==="number")return LongBits.fromNumber(e);if(n.isString(e)){if(n.Long)e=n.Long.fromString(e);else return LongBits.fromNumber(parseInt(e,10))}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):o};LongBits.prototype.toNumber=function toNumber(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;if(!t)r=r+1>>>0;return-(t+r*4294967296)}return this.lo+this.hi*4294967296};LongBits.prototype.toLong=function toLong(e){return n.Long?new n.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(e){if(e===i)return o;return new LongBits((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)};LongBits.prototype.toHash=function toHash(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits.prototype.zzEncode=function zzEncode(){var e=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0;this.lo=(this.lo<<1^e)>>>0;return this};LongBits.prototype.zzDecode=function zzDecode(){var e=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0;this.hi=(this.hi>>>1^e)>>>0;return this};LongBits.prototype.length=function length(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},1241:function(e,t,r){"use strict";var n=t;n.asPromise=r(252);n.base64=r(6718);n.EventEmitter=r(6850);n.float=r(1843);n.inquire=r(94);n.utf8=r(9049);n.pool=r(7743);n.LongBits=r(8374);n.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);n.global=n.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;n.emptyArray=Object.freeze?Object.freeze([]):[];n.emptyObject=Object.freeze?Object.freeze({}):{};n.isInteger=Number.isInteger||function isInteger(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};n.isString=function isString(e){return typeof e==="string"||e instanceof String};n.isObject=function isObject(e){return e&&typeof e==="object"};n.isset=n.isSet=function isSet(e,t){var r=e[t];if(r!=null&&e.hasOwnProperty(t))return typeof r!=="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0;return false};n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();n._Buffer_from=null;n._Buffer_allocUnsafe=null;n.newBuffer=function newBuffer(e){return typeof e==="number"?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):typeof Uint8Array==="undefined"?e:new Uint8Array(e)};n.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long");n.key2Re=/^true|false|0|1$/;n.key32Re=/^-?(?:0|[1-9][0-9]*)$/;n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;n.longToHash=function longToHash(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash};n.longFromHash=function longFromHash(e,t){var r=n.LongBits.fromHash(e);if(n.Long)return n.Long.fromBits(r.lo,r.hi,t);return r.toNumber(Boolean(t))};function merge(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)if(e[n[o]]===undefined||!r)e[n[o]]=t[n[o]];return e}n.merge=merge;n.lcFirst=function lcFirst(e){return e.charAt(0).toLowerCase()+e.substring(1)};function newError(e){function CustomError(e,t){if(!(this instanceof CustomError))return new CustomError(e,t);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,CustomError);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(t)merge(this,t)}(CustomError.prototype=Object.create(Error.prototype)).constructor=CustomError;Object.defineProperty(CustomError.prototype,"name",{get:function(){return e}});CustomError.prototype.toString=function toString(){return this.name+": "+this.message};return CustomError}n.newError=newError;n.ProtocolError=newError("ProtocolError");n.oneOfGetter=function getOneOf(e){var t={};for(var r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(t[e[r]]===1&&this[e[r]]!==undefined&&this[e[r]]!==null)return e[r]}};n.oneOfSetter=function setOneOf(e){return function(t){for(var r=0;r<e.length;++r)if(e[r]!==t)delete this[e[r]]}};n.toJSONOptions={longs:String,enums:String,bytes:String,json:true};n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function Buffer_from(t,r){return new e(t,r)};n._Buffer_allocUnsafe=e.allocUnsafe||function Buffer_allocUnsafe(t){return new e(t)}}},3098:(e,t,r)=>{"use strict";e.exports=Writer;var n=r(1241);var o;var i=n.LongBits,a=n.base64,s=n.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var l=function create(){return n.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new o})()}:function create_array(){return new Writer}};Writer.create=l();Writer.alloc=function alloc(e){return new n.Array(e)};if(n.Array!==Array)Writer.alloc=n.pool(Writer.alloc,n.Array.prototype.subarray);Writer.prototype._push=function push(e,t,r){this.tail=this.tail.next=new Op(e,t,r);this.len+=t;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function write_uint32(e){this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len;return this};Writer.prototype.int32=function write_int32(e){return e<0?this._push(writeVarint64,10,i.fromNumber(e)):this.uint32(e)};Writer.prototype.sint32=function write_sint32(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function write_uint64(e){var t=i.from(e);return this._push(writeVarint64,t.length(),t)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function write_sint64(e){var t=i.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer.prototype.bool=function write_bool(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function write_fixed32(e){return this._push(writeFixed32,4,e>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function write_fixed64(e){var t=i.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function write_float(e){return this._push(n.float.writeFloatLE,4,e)};Writer.prototype.double=function write_double(e){return this._push(n.float.writeDoubleLE,8,e)};var u=n.Array.prototype.set?function writeBytes_set(e,t,r){t.set(e,r)}:function writeBytes_for(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function write_bytes(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(n.isString(e)){var r=Writer.alloc(t=a.length(e));a.decode(e,r,0);e=r}return this.uint32(t)._push(u,t,e)};Writer.prototype.string=function write_string(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(writeByte,1,0)};Writer.prototype.fork=function fork(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function reset(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function ldelim(){var e=this.head,t=this.tail,r=this.len;this.reset().uint32(r);if(r){this.tail.next=e.next;this.tail=t;this.len+=r}return this};Writer.prototype.finish=function finish(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e){e.fn(e.val,t,r);r+=e.len;e=e.next}return t};Writer._configure=function(e){o=e;Writer.create=l();o._configure()}},1863:(e,t,r)=>{"use strict";e.exports=BufferWriter;var n=r(3098);(BufferWriter.prototype=Object.create(n.prototype)).constructor=BufferWriter;var o=r(1241);function BufferWriter(){n.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=o._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function writeBytesBuffer_set(e,t,r){t.set(e,r)}:function writeBytesBuffer_copy(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}};BufferWriter.prototype.bytes=function write_bytes_buffer(e){if(o.isString(e))e=o._Buffer_from(e,"base64");var t=e.length>>>0;this.uint32(t);if(t)this._push(BufferWriter.writeBytesBuffer,t,e);return this};function writeStringBuffer(e,t,r){if(e.length<40)o.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function write_string_buffer(e){var t=o.Buffer.byteLength(e);this.uint32(t);if(t)this._push(writeStringBuffer,t,e);return this};BufferWriter._configure()},4580:(e,t,r)=>{const{instantiateSync:n}=r(1748);const o=r(7147);loadWebAssembly.supported=typeof WebAssembly!=="undefined";async function loadWebAssembly(e={}){if(!loadWebAssembly.supported)return null;return n(o.readFileSync(r.ab+"rabin.wasm"),e)}e.exports=loadWebAssembly},1715:(e,t,r)=>{const n=r(5519);const o=r(4580);const create=async(e,t,r,i,a)=>{const s=await o();return new n(s,e,t,r,i,a)};e.exports={Rabin:n,create:create}},5519:e=>{class Rabin{constructor(e,t=12,r=8*1024,n=32*1024,o=64,i){this.bits=t;this.min=r;this.max=n;this.asModule=e;this.rabin=new e.Rabin(t,r,n,o,i);this.polynomial=i}fingerprint(e){const{__retain:t,__release:r,__allocArray:n,__getInt32Array:o,Int32Array_ID:i,Uint8Array_ID:a}=this.asModule;const s=new Int32Array(Math.ceil(e.length/this.min));const l=t(n(i,s));const u=t(n(a,e));const c=this.rabin.fingerprint(u,l);const f=o(c);r(u);r(l);const d=f.indexOf(0);return d>=0?f.subarray(0,d):f}}e.exports=Rabin},4347:(e,t,r)=>{e.exports=r(6244)},6244:(e,t,r)=>{var n=r(5369);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===Infinity),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})};t.timeouts=function(e){if(e instanceof Array){return[].concat(e)}var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:Infinity,randomize:false};for(var r in e){t[r]=e[r]}if(t.minTimeout>t.maxTimeout){throw new Error("minTimeout is greater than maxTimeout")}var n=[];for(var o=0;o<t.retries;o++){n.push(this.createTimeout(o,t))}if(e&&e.forever&&!n.length){n.push(this.createTimeout(o,t))}n.sort((function(e,t){return e-t}));return n};t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1;var n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));n=Math.min(n,t.maxTimeout);return n};t.wrap=function(e,r,n){if(r instanceof Array){n=r;r=null}if(!n){n=[];for(var o in e){if(typeof e[o]==="function"){n.push(o)}}}for(var i=0;i<n.length;i++){var a=n[i];var s=e[a];e[a]=function retryWrapper(n){var o=t.operation(r);var i=Array.prototype.slice.call(arguments,1);var a=i.pop();i.push((function(e){if(o.retry(e)){return}if(e){arguments[0]=o.mainError()}a.apply(this,arguments)}));o.attempt((function(){n.apply(e,i)}))}.bind(e,s);e[a].options=r}}},5369:e=>{function RetryOperation(e,t){if(typeof t==="boolean"){t={forever:t}}this._originalTimeouts=JSON.parse(JSON.stringify(e));this._timeouts=e;this._options=t||{};this._maxRetryTime=t&&t.maxRetryTime||Infinity;this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;this._operationStart=null;this._timer=null;if(this._options.forever){this._cachedTimeouts=this._timeouts.slice(0)}}e.exports=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1;this._timeouts=this._originalTimeouts.slice(0)};RetryOperation.prototype.stop=function(){if(this._timeout){clearTimeout(this._timeout)}if(this._timer){clearTimeout(this._timer)}this._timeouts=[];this._cachedTimeouts=null};RetryOperation.prototype.retry=function(e){if(this._timeout){clearTimeout(this._timeout)}if(!e){return false}var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime){this._errors.push(e);this._errors.unshift(new Error("RetryOperation timeout occurred"));return false}this._errors.push(e);var r=this._timeouts.shift();if(r===undefined){if(this._cachedTimeouts){this._errors.splice(0,this._errors.length-1);r=this._cachedTimeouts.slice(-1)}else{return false}}var n=this;this._timer=setTimeout((function(){n._attempts++;if(n._operationTimeoutCb){n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout);if(n._options.unref){n._timeout.unref()}}n._fn(n._attempts)}),r);if(this._options.unref){this._timer.unref()}return true};RetryOperation.prototype.attempt=function(e,t){this._fn=e;if(t){if(t.timeout){this._operationTimeout=t.timeout}if(t.cb){this._operationTimeoutCb=t.cb}}var r=this;if(this._operationTimeoutCb){this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)}this._operationStart=(new Date).getTime();this._fn(this._attempts)};RetryOperation.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated");this.attempt(e)};RetryOperation.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated");this.attempt(e)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0){return null}var e={};var t=null;var r=0;for(var n=0;n<this._errors.length;n++){var o=this._errors[n];var i=o.message;var a=(e[i]||0)+1;e[i]=a;if(a>=r){t=o;r=a}}return t}},1128:e=>{"use strict";const t=7;e.exports=class SparseArray{constructor(){this._bitArrays=[];this._data=[];this._length=0;this._changedLength=false;this._changedData=false}set(e,t){let r=this._internalPositionFor(e,false);if(t===undefined){if(r!==-1){this._unsetInternalPos(r);this._unsetBit(e);this._changedLength=true;this._changedData=true}}else{let n=false;if(r===-1){r=this._data.length;this._setBit(e);this._changedData=true}else{n=true}this._setInternalPos(r,e,t,n);this._changedLength=true}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,true);if(t===-1){return undefined}return this._data[t][1]}push(e){this.set(this.length,e);return this.length}get length(){this._sortData();if(this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0;this._changedLength=false}return this._length}forEach(e){let t=0;while(t<this.length){e(this.get(t),t,this);t++}}map(e){let t=0;let r=new Array(this.length);while(t<this.length){r[t]=e(this.get(t),t,this);t++}return r}reduce(e,t){let r=0;let n=t;while(r<this.length){const t=this.get(r);n=e(n,t,r);r++}return n}find(e){let t=0,r,n;while(t<this.length&&!r){n=this.get(t);r=e(n);t++}return r?n:undefined}_internalPositionFor(e,r){const n=this._bytePosFor(e,r);if(n>=this._bitArrays.length){return-1}const o=this._bitArrays[n];const i=e-n*t;const a=(o&1<<i)>0;if(!a){return-1}const s=this._bitArrays.slice(0,n).reduce(popCountReduce,0);const l=~(4294967295<<i+1);const u=popCount(o&l);const c=s+u-1;return c}_bytePosFor(e,r){const n=Math.floor(e/t);const o=n+1;while(!r&&this._bitArrays.length<o){this._bitArrays.push(0)}return n}_setBit(e){const r=this._bytePosFor(e,false);this._bitArrays[r]|=1<<e-r*t}_unsetBit(e){const r=this._bytePosFor(e,false);this._bitArrays[r]&=~(1<<e-r*t)}_setInternalPos(e,t,r,n){const o=this._data;const i=[t,r];if(n){this._sortData();o[e]=i}else{if(o.length){if(o[o.length-1][0]>=t){o.push(i)}else if(o[0][0]<=t){o.unshift(i)}else{const e=Math.round(o.length/2);this._data=o.slice(0,e).concat(i).concat(o.slice(e))}}else{this._data.push(i)}this._changedData=true;this._changedLength=true}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){if(this._changedData){this._data.sort(sortInternal)}this._changedData=false}bitField(){const e=[];let t=8;let r=0;let n=0;let o;const i=this._bitArrays.slice();while(i.length||r){if(r===0){o=i.shift();r=7}const a=Math.min(r,t);const s=~(255<<a);const l=o&s;n|=l<<8-t;o=o>>>a;r-=a;t-=a;if(!t||!r&&!i.length){e.push(n);n=0;t=8}}for(var a=e.length-1;a>0;a--){const t=e[a];if(t===0){e.pop()}else{break}}return e}compactArray(){this._sortData();return this._data.map(valueOnly)}};function popCountReduce(e,t){return e+popCount(t)}function popCount(e){let t=e;t=t-(t>>1&1431655765);t=(t&858993459)+(t>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24}function sortInternal(e,t){return e[0]-t[0]}function valueOnly(e){return e[1]}},7855:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function throttledQueue(e,t,r){if(r===void 0){r=false}if(r){t=t/e;e=1}var n=[];var o=0;var i=0;var a;var dequeue=function(){var r=o+t;var s=Date.now();if(s<r){a!==undefined&&clearTimeout(a);a=setTimeout(dequeue,r-s);return}o=s;i=0;for(var l=0,u=n.splice(0,e);l<u.length;l++){var c=u[l];i++;void c()}if(n.length){a=setTimeout(dequeue,t)}else{a=undefined}};return function(r){return new Promise((function(s,l){var callback=function(){return Promise.resolve().then(r).then(s).catch(l)};var u=Date.now();if(a===undefined&&u-o>t){o=u;i=0}if(i++<e){void callback()}else{n.push(callback);if(a===undefined){a=setTimeout(dequeue,o+t-u)}}}))}}e.exports=throttledQueue;t["default"]=throttledQueue},4294:(e,t,r)=>{e.exports=r(4219)},4219:(e,t,r)=>{"use strict";var n=r(1808);var o=r(4404);var i=r(3685);var a=r(5687);var s=r(2361);var l=r(9491);var u=r(3837);t.httpOverHttp=httpOverHttp;t.httpsOverHttp=httpsOverHttp;t.httpOverHttps=httpOverHttps;t.httpsOverHttps=httpsOverHttps;function httpOverHttp(e){var t=new TunnelingAgent(e);t.request=i.request;return t}function httpsOverHttp(e){var t=new TunnelingAgent(e);t.request=i.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function httpOverHttps(e){var t=new TunnelingAgent(e);t.request=a.request;return t}function httpsOverHttps(e){var t=new TunnelingAgent(e);t.request=a.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function TunnelingAgent(e){var t=this;t.options=e||{};t.proxyOptions=t.options.proxy||{};t.maxSockets=t.options.maxSockets||i.Agent.defaultMaxSockets;t.requests=[];t.sockets=[];t.on("free",(function onFree(e,r,n,o){var i=toOptions(r,n,o);for(var a=0,s=t.requests.length;a<s;++a){var l=t.requests[a];if(l.host===i.host&&l.port===i.port){t.requests.splice(a,1);l.request.onSocket(e);return}}e.destroy();t.removeSocket(e)}))}u.inherits(TunnelingAgent,s.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(e,t,r,n){var o=this;var i=mergeOptions({request:e},o.options,toOptions(t,r,n));if(o.sockets.length>=this.maxSockets){o.requests.push(i);return}o.createSocket(i,(function(t){t.on("free",onFree);t.on("close",onCloseOrRemove);t.on("agentRemove",onCloseOrRemove);e.onSocket(t);function onFree(){o.emit("free",t,i)}function onCloseOrRemove(e){o.removeSocket(t);t.removeListener("free",onFree);t.removeListener("close",onCloseOrRemove);t.removeListener("agentRemove",onCloseOrRemove)}}))};TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this;var n={};r.sockets.push(n);var o=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:false,headers:{host:e.host+":"+e.port}});if(e.localAddress){o.localAddress=e.localAddress}if(o.proxyAuth){o.headers=o.headers||{};o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")}c("making CONNECT request");var i=r.request(o);i.useChunkedEncodingByDefault=false;i.once("response",onResponse);i.once("upgrade",onUpgrade);i.once("connect",onConnect);i.once("error",onError);i.end();function onResponse(e){e.upgrade=true}function onUpgrade(e,t,r){process.nextTick((function(){onConnect(e,t,r)}))}function onConnect(o,a,s){i.removeAllListeners();a.removeAllListeners();if(o.statusCode!==200){c("tunneling socket could not be established, statusCode=%d",o.statusCode);a.destroy();var l=new Error("tunneling socket could not be established, "+"statusCode="+o.statusCode);l.code="ECONNRESET";e.request.emit("error",l);r.removeSocket(n);return}if(s.length>0){c("got illegal response body from proxy");a.destroy();var l=new Error("got illegal response body from proxy");l.code="ECONNRESET";e.request.emit("error",l);r.removeSocket(n);return}c("tunneling connection has established");r.sockets[r.sockets.indexOf(n)]=a;return t(a)}function onError(t){i.removeAllListeners();c("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, "+"cause="+t.message);o.code="ECONNRESET";e.request.emit("error",o);r.removeSocket(n)}};TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(t===-1){return}this.sockets.splice(t,1);var r=this.requests.shift();if(r){this.createSocket(r,(function(e){r.request.onSocket(e)}))}};function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,(function(n){var i=e.request.getHeader("host");var a=mergeOptions({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host});var s=o.connect(0,a);r.sockets[r.sockets.indexOf(n)]=s;t(s)}))}function toOptions(e,t,r){if(typeof e==="string"){return{host:e,port:t,localAddress:r}}return e}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n==="object"){var o=Object.keys(n);for(var i=0,a=o.length;i<a;++i){var s=o[i];if(n[s]!==undefined){e[s]=n[s]}}}}return e}var c;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){c=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="string"){e[0]="TUNNEL: "+e[0]}else{e.unshift("TUNNEL:")}console.error.apply(console,e)}}else{c=function(){}}t.debug=c},1079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function alloc(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return globalThis.Buffer.alloc(e)}return new Uint8Array(e)}function allocUnsafe(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return globalThis.Buffer.allocUnsafe(e)}return new Uint8Array(e)}t.alloc=alloc;t.allocUnsafe=allocUnsafe},5114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1079);function concat(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=n.allocUnsafe(t);let o=0;for(const t of e){r.set(t,o);o+=t.length}return r}t.concat=concat},3538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(8552);function fromString(e,t="utf8"){const r=n[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e,"utf8")}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=fromString},8552:(e,t,r)=>{"use strict";var n=r(1046);var o=r(1079);function createCodec(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const i=createCodec("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const a=createCodec("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=o.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const s={utf8:i,"utf-8":i,hex:n.bases.base16,latin1:a,ascii:a,binary:a,...n.bases};e.exports=s},5840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"v1",{enumerable:true,get:function(){return n.default}});Object.defineProperty(t,"v3",{enumerable:true,get:function(){return o.default}});Object.defineProperty(t,"v4",{enumerable:true,get:function(){return i.default}});Object.defineProperty(t,"v5",{enumerable:true,get:function(){return a.default}});Object.defineProperty(t,"NIL",{enumerable:true,get:function(){return s.default}});Object.defineProperty(t,"version",{enumerable:true,get:function(){return l.default}});Object.defineProperty(t,"validate",{enumerable:true,get:function(){return u.default}});Object.defineProperty(t,"stringify",{enumerable:true,get:function(){return c.default}});Object.defineProperty(t,"parse",{enumerable:true,get:function(){return f.default}});var n=_interopRequireDefault(r(8628));var o=_interopRequireDefault(r(6409));var i=_interopRequireDefault(r(5122));var a=_interopRequireDefault(r(9120));var s=_interopRequireDefault(r(5332));var l=_interopRequireDefault(r(1595));var u=_interopRequireDefault(r(6900));var c=_interopRequireDefault(r(8950));var f=_interopRequireDefault(r(2746));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},4569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function md5(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("md5").update(e).digest()}var o=md5;t["default"]=o},5332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r="00000000-0000-0000-0000-000000000000";t["default"]=r},2746:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6900));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}let t;const r=new Uint8Array(16);r[0]=(t=parseInt(e.slice(0,8),16))>>>24;r[1]=t>>>16&255;r[2]=t>>>8&255;r[3]=t&255;r[4]=(t=parseInt(e.slice(9,13),16))>>>8;r[5]=t&255;r[6]=(t=parseInt(e.slice(14,18),16))>>>8;r[7]=t&255;r[8]=(t=parseInt(e.slice(19,23),16))>>>8;r[9]=t&255;r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255;r[11]=t/4294967296&255;r[12]=t>>>24&255;r[13]=t>>>16&255;r[14]=t>>>8&255;r[15]=t&255;return r}var o=parse;t["default"]=o},814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t["default"]=r},807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=rng;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const o=new Uint8Array(256);let i=o.length;function rng(){if(i>o.length-16){n.default.randomFillSync(o);i=0}return o.slice(i,i+=16)}},5274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6113));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sha1(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("sha1").update(e).digest()}var o=sha1;t["default"]=o},8950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6900));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const o=[];for(let e=0;e<256;++e){o.push((e+256).toString(16).substr(1))}function stringify(e,t=0){const r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,n.default)(r)){throw TypeError("Stringified UUID is invalid")}return r}var i=stringify;t["default"]=i},8628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(807));var o=_interopRequireDefault(r(8950));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let i;let a;let s=0;let l=0;function v1(e,t,r){let u=t&&r||0;const c=t||new Array(16);e=e||{};let f=e.node||i;let d=e.clockseq!==undefined?e.clockseq:a;if(f==null||d==null){const t=e.random||(e.rng||n.default)();if(f==null){f=i=[t[0]|1,t[1],t[2],t[3],t[4],t[5]]}if(d==null){d=a=(t[6]<<8|t[7])&16383}}let h=e.msecs!==undefined?e.msecs:Date.now();let p=e.nsecs!==undefined?e.nsecs:l+1;const m=h-s+(p-l)/1e4;if(m<0&&e.clockseq===undefined){d=d+1&16383}if((m<0||h>s)&&e.nsecs===undefined){p=0}if(p>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}s=h;l=p;a=d;h+=122192928e5;const y=((h&268435455)*1e4+p)%4294967296;c[u++]=y>>>24&255;c[u++]=y>>>16&255;c[u++]=y>>>8&255;c[u++]=y&255;const b=h/4294967296*1e4&268435455;c[u++]=b>>>8&255;c[u++]=b&255;c[u++]=b>>>24&15|16;c[u++]=b>>>16&255;c[u++]=d>>>8|128;c[u++]=d&255;for(let e=0;e<6;++e){c[u+e]=f[e]}return t||(0,o.default)(c)}var u=v1;t["default"]=u},6409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(5998));var o=_interopRequireDefault(r(4569));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=(0,n.default)("v3",48,o.default);var a=i;t["default"]=a},5998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=_default;t.URL=t.DNS=void 0;var n=_interopRequireDefault(r(8950));var o=_interopRequireDefault(r(2746));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r))}return t}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=i;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a;function _default(e,t,r){function generateUUID(e,i,a,s){if(typeof e==="string"){e=stringToBytes(e)}if(typeof i==="string"){i=(0,o.default)(i)}if(i.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let l=new Uint8Array(16+e.length);l.set(i);l.set(e,i.length);l=r(l);l[6]=l[6]&15|t;l[8]=l[8]&63|128;if(a){s=s||0;for(let e=0;e<16;++e){a[s+e]=l[e]}return a}return(0,n.default)(l)}try{generateUUID.name=e}catch(e){}generateUUID.DNS=i;generateUUID.URL=a;return generateUUID}},5122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(807));var o=_interopRequireDefault(r(8950));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v4(e,t,r){e=e||{};const i=e.random||(e.rng||n.default)();i[6]=i[6]&15|64;i[8]=i[8]&63|128;if(t){r=r||0;for(let e=0;e<16;++e){t[r+e]=i[e]}return t}return(0,o.default)(i)}var i=v4;t["default"]=i},9120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(5998));var o=_interopRequireDefault(r(5274));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=(0,n.default)("v5",80,o.default);var a=i;t["default"]=a},6900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(814));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e){return typeof e==="string"&&n.default.test(e)}var o=validate;t["default"]=o},1595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6900));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function version(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}return parseInt(e.substr(14,1),16)}var o=version;t["default"]=o},7458:e=>{e.exports=read;var t=128,r=127;function read(e,n){var o=0,n=n||0,i=0,a=n,s,l=e.length;do{if(a>=l||i>49){read.bytes=0;throw new RangeError("Could not decode varint")}s=e[a++];o+=i<28?(s&r)<<i:(s&r)*Math.pow(2,i);i+=7}while(s>=t);read.bytes=a-n;return o}},1415:e=>{e.exports=encode;var t=128,r=127,n=~r,o=Math.pow(2,31);function encode(e,r,i){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER){encode.bytes=0;throw new RangeError("Could not encode varint")}r=r||[];i=i||0;var a=i;while(e>=o){r[i++]=e&255|t;e/=128}while(e&n){r[i++]=e&255|t;e>>>=7}r[i]=e|0;encode.bytes=i-a+1;return r}},8018:(e,t,r)=>{e.exports={encode:r(1415),decode:r(7458),encodingLength:r(5235)}},5235:e=>{var t=Math.pow(2,7);var r=Math.pow(2,14);var n=Math.pow(2,21);var o=Math.pow(2,28);var i=Math.pow(2,35);var a=Math.pow(2,42);var s=Math.pow(2,49);var l=Math.pow(2,56);var u=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<o?4:e<i?5:e<a?6:e<s?7:e<l?8:e<u?9:10}},5650:function(e,t){(function(e,r){true?r(t):0})(this,(function(e){"use strict";var t=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol:function(e){return"Symbol("+e+")"};function noop(){return undefined}function getGlobals(){if(typeof self!=="undefined"){return self}else if(typeof window!=="undefined"){return window}else if(typeof global!=="undefined"){return global}return undefined}var r=getGlobals();function typeIsObject(e){return typeof e==="object"&&e!==null||typeof e==="function"}var n=noop;var o=Promise;var i=Promise.prototype.then;var a=Promise.resolve.bind(o);var s=Promise.reject.bind(o);function newPromise(e){return new o(e)}function promiseResolvedWith(e){return a(e)}function promiseRejectedWith(e){return s(e)}function PerformPromiseThen(e,t,r){return i.call(e,t,r)}function uponPromise(e,t,r){PerformPromiseThen(PerformPromiseThen(e,t,r),undefined,n)}function uponFulfillment(e,t){uponPromise(e,t)}function uponRejection(e,t){uponPromise(e,undefined,t)}function transformPromiseWith(e,t,r){return PerformPromiseThen(e,t,r)}function setPromiseIsHandledToTrue(e){PerformPromiseThen(e,undefined,n)}var l=function(){var e=r&&r.queueMicrotask;if(typeof e==="function"){return e}var t=promiseResolvedWith(undefined);return function(e){return PerformPromiseThen(t,e)}}();function reflectCall(e,t,r){if(typeof e!=="function"){throw new TypeError("Argument is not a function")}return Function.prototype.apply.call(e,t,r)}function promiseCall(e,t,r){try{return promiseResolvedWith(reflectCall(e,t,r))}catch(e){return promiseRejectedWith(e)}}var u=16384;var c=function(){function SimpleQueue(){this._cursor=0;this._size=0;this._front={_elements:[],_next:undefined};this._back=this._front;this._cursor=0;this._size=0}Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:false,configurable:true});SimpleQueue.prototype.push=function(e){var t=this._back;var r=t;if(t._elements.length===u-1){r={_elements:[],_next:undefined}}t._elements.push(e);if(r!==t){this._back=r;t._next=r}++this._size};SimpleQueue.prototype.shift=function(){var e=this._front;var t=e;var r=this._cursor;var n=r+1;var o=e._elements;var i=o[r];if(n===u){t=e._next;n=0}--this._size;this._cursor=n;if(e!==t){this._front=t}o[r]=undefined;return i};SimpleQueue.prototype.forEach=function(e){var t=this._cursor;var r=this._front;var n=r._elements;while(t!==n.length||r._next!==undefined){if(t===n.length){r=r._next;n=r._elements;t=0;if(n.length===0){break}}e(n[t]);++t}};SimpleQueue.prototype.peek=function(){var e=this._front;var t=this._cursor;return e._elements[t]};return SimpleQueue}();function ReadableStreamReaderGenericInitialize(e,t){e._ownerReadableStream=t;t._reader=e;if(t._state==="readable"){defaultReaderClosedPromiseInitialize(e)}else if(t._state==="closed"){defaultReaderClosedPromiseInitializeAsResolved(e)}else{defaultReaderClosedPromiseInitializeAsRejected(e,t._storedError)}}function ReadableStreamReaderGenericCancel(e,t){var r=e._ownerReadableStream;return ReadableStreamCancel(r,t)}function ReadableStreamReaderGenericRelease(e){if(e._ownerReadableStream._state==="readable"){defaultReaderClosedPromiseReject(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}else{defaultReaderClosedPromiseResetToRejected(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}e._ownerReadableStream._reader=undefined;e._ownerReadableStream=undefined}function readerLockException(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(e){e._closedPromise=newPromise((function(t,r){e._closedPromise_resolve=t;e._closedPromise_reject=r}))}function defaultReaderClosedPromiseInitializeAsRejected(e,t){defaultReaderClosedPromiseInitialize(e);defaultReaderClosedPromiseReject(e,t)}function defaultReaderClosedPromiseInitializeAsResolved(e){defaultReaderClosedPromiseInitialize(e);defaultReaderClosedPromiseResolve(e)}function defaultReaderClosedPromiseReject(e,t){if(e._closedPromise_reject===undefined){return}setPromiseIsHandledToTrue(e._closedPromise);e._closedPromise_reject(t);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined}function defaultReaderClosedPromiseResetToRejected(e,t){defaultReaderClosedPromiseInitializeAsRejected(e,t)}function defaultReaderClosedPromiseResolve(e){if(e._closedPromise_resolve===undefined){return}e._closedPromise_resolve(undefined);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined}var f=t("[[AbortSteps]]");var d=t("[[ErrorSteps]]");var h=t("[[CancelSteps]]");var p=t("[[PullSteps]]");var m=Number.isFinite||function(e){return typeof e==="number"&&isFinite(e)};var y=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function isDictionary(e){return typeof e==="object"||typeof e==="function"}function assertDictionary(e,t){if(e!==undefined&&!isDictionary(e)){throw new TypeError(t+" is not an object.")}}function assertFunction(e,t){if(typeof e!=="function"){throw new TypeError(t+" is not a function.")}}function isObject(e){return typeof e==="object"&&e!==null||typeof e==="function"}function assertObject(e,t){if(!isObject(e)){throw new TypeError(t+" is not an object.")}}function assertRequiredArgument(e,t,r){if(e===undefined){throw new TypeError("Parameter "+t+" is required in '"+r+"'.")}}function assertRequiredField(e,t,r){if(e===undefined){throw new TypeError(t+" is required in '"+r+"'.")}}function convertUnrestrictedDouble(e){return Number(e)}function censorNegativeZero(e){return e===0?0:e}function integerPart(e){return censorNegativeZero(y(e))}function convertUnsignedLongLongWithEnforceRange(e,t){var r=0;var n=Number.MAX_SAFE_INTEGER;var o=Number(e);o=censorNegativeZero(o);if(!m(o)){throw new TypeError(t+" is not a finite number")}o=integerPart(o);if(o<r||o>n){throw new TypeError(t+" is outside the accepted range of "+r+" to "+n+", inclusive")}if(!m(o)||o===0){return 0}return o}function assertReadableStream(e,t){if(!IsReadableStream(e)){throw new TypeError(t+" is not a ReadableStream.")}}function AcquireReadableStreamDefaultReader(e){return new b(e)}function ReadableStreamAddReadRequest(e,t){e._reader._readRequests.push(t)}function ReadableStreamFulfillReadRequest(e,t,r){var n=e._reader;var o=n._readRequests.shift();if(r){o._closeSteps()}else{o._chunkSteps(t)}}function ReadableStreamGetNumReadRequests(e){return e._reader._readRequests.length}function ReadableStreamHasDefaultReader(e){var t=e._reader;if(t===undefined){return false}if(!IsReadableStreamDefaultReader(t)){return false}return true}var b=function(){function ReadableStreamDefaultReader(e){assertRequiredArgument(e,1,"ReadableStreamDefaultReader");assertReadableStream(e,"First parameter");if(IsReadableStreamLocked(e)){throw new TypeError("This stream has already been locked for exclusive reading by another reader")}ReadableStreamReaderGenericInitialize(this,e);this._readRequests=new c}Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){if(!IsReadableStreamDefaultReader(this)){return promiseRejectedWith(defaultReaderBrandCheckException("closed"))}return this._closedPromise},enumerable:false,configurable:true});ReadableStreamDefaultReader.prototype.cancel=function(e){if(e===void 0){e=undefined}if(!IsReadableStreamDefaultReader(this)){return promiseRejectedWith(defaultReaderBrandCheckException("cancel"))}if(this._ownerReadableStream===undefined){return promiseRejectedWith(readerLockException("cancel"))}return ReadableStreamReaderGenericCancel(this,e)};ReadableStreamDefaultReader.prototype.read=function(){if(!IsReadableStreamDefaultReader(this)){return promiseRejectedWith(defaultReaderBrandCheckException("read"))}if(this._ownerReadableStream===undefined){return promiseRejectedWith(readerLockException("read from"))}var e;var t;var r=newPromise((function(r,n){e=r;t=n}));var n={_chunkSteps:function(t){return e({value:t,done:false})},_closeSteps:function(){return e({value:undefined,done:true})},_errorSteps:function(e){return t(e)}};ReadableStreamDefaultReaderRead(this,n);return r};ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this)){throw defaultReaderBrandCheckException("releaseLock")}if(this._ownerReadableStream===undefined){return}if(this._readRequests.length>0){throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled")}ReadableStreamReaderGenericRelease(this)};return ReadableStreamDefaultReader}();Object.defineProperties(b.prototype,{cancel:{enumerable:true},read:{enumerable:true},releaseLock:{enumerable:true},closed:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(b.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:true})}function IsReadableStreamDefaultReader(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_readRequests")){return false}return e instanceof b}function ReadableStreamDefaultReaderRead(e,t){var r=e._ownerReadableStream;r._disturbed=true;if(r._state==="closed"){t._closeSteps()}else if(r._state==="errored"){t._errorSteps(r._storedError)}else{r._readableStreamController[p](t)}}function defaultReaderBrandCheckException(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}var g;var _;if(typeof t.asyncIterator==="symbol"){_=(g={},g[t.asyncIterator]=function(){return this},g);Object.defineProperty(_,t.asyncIterator,{enumerable:false})}var w=function(){function ReadableStreamAsyncIteratorImpl(e,t){this._ongoingPromise=undefined;this._isFinished=false;this._reader=e;this._preventCancel=t}ReadableStreamAsyncIteratorImpl.prototype.next=function(){var e=this;var nextSteps=function(){return e._nextSteps()};this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps();return this._ongoingPromise};ReadableStreamAsyncIteratorImpl.prototype.return=function(e){var t=this;var returnSteps=function(){return t._returnSteps(e)};return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()};ReadableStreamAsyncIteratorImpl.prototype._nextSteps=function(){var e=this;if(this._isFinished){return Promise.resolve({value:undefined,done:true})}var t=this._reader;if(t._ownerReadableStream===undefined){return promiseRejectedWith(readerLockException("iterate"))}var r;var n;var o=newPromise((function(e,t){r=e;n=t}));var i={_chunkSteps:function(t){e._ongoingPromise=undefined;l((function(){return r({value:t,done:false})}))},_closeSteps:function(){e._ongoingPromise=undefined;e._isFinished=true;ReadableStreamReaderGenericRelease(t);r({value:undefined,done:true})},_errorSteps:function(r){e._ongoingPromise=undefined;e._isFinished=true;ReadableStreamReaderGenericRelease(t);n(r)}};ReadableStreamDefaultReaderRead(t,i);return o};ReadableStreamAsyncIteratorImpl.prototype._returnSteps=function(e){if(this._isFinished){return Promise.resolve({value:e,done:true})}this._isFinished=true;var t=this._reader;if(t._ownerReadableStream===undefined){return promiseRejectedWith(readerLockException("finish iterating"))}if(!this._preventCancel){var r=ReadableStreamReaderGenericCancel(t,e);ReadableStreamReaderGenericRelease(t);return transformPromiseWith(r,(function(){return{value:e,done:true}}))}ReadableStreamReaderGenericRelease(t);return promiseResolvedWith({value:e,done:true})};return ReadableStreamAsyncIteratorImpl}();var v={next:function(){if(!IsReadableStreamAsyncIterator(this)){return promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))}return this._asyncIteratorImpl.next()},return:function(e){if(!IsReadableStreamAsyncIterator(this)){return promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}return this._asyncIteratorImpl.return(e)}};if(_!==undefined){Object.setPrototypeOf(v,_)}function AcquireReadableStreamAsyncIterator(e,t){var r=AcquireReadableStreamDefaultReader(e);var n=new w(r,t);var o=Object.create(v);o._asyncIteratorImpl=n;return o}function IsReadableStreamAsyncIterator(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl")){return false}try{return e._asyncIteratorImpl instanceof w}catch(e){return false}}function streamAsyncIteratorBrandCheckException(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}var S=Number.isNaN||function(e){return e!==e};function CreateArrayFromList(e){return e.slice()}function CopyDataBlockBytes(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function TransferArrayBuffer(e){return e}function IsDetachedBuffer(e){return false}function ArrayBufferSlice(e,t,r){if(e.slice){return e.slice(t,r)}var n=r-t;var o=new ArrayBuffer(n);CopyDataBlockBytes(o,0,e,t,n);return o}function IsNonNegativeNumber(e){if(typeof e!=="number"){return false}if(S(e)){return false}if(e<0){return false}return true}function CloneAsUint8Array(e){var t=ArrayBufferSlice(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function DequeueValue(e){var t=e._queue.shift();e._queueTotalSize-=t.size;if(e._queueTotalSize<0){e._queueTotalSize=0}return t.value}function EnqueueValueWithSize(e,t,r){if(!IsNonNegativeNumber(r)||r===Infinity){throw new RangeError("Size must be a finite, non-NaN, non-negative number.")}e._queue.push({value:t,size:r});e._queueTotalSize+=r}function PeekQueueValue(e){var t=e._queue.peek();return t.value}function ResetQueue(e){e._queue=new c;e._queueTotalSize=0}var R=function(){function ReadableStreamBYOBRequest(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this)){throw byobRequestBrandCheckException("view")}return this._view},enumerable:false,configurable:true});ReadableStreamBYOBRequest.prototype.respond=function(e){if(!IsReadableStreamBYOBRequest(this)){throw byobRequestBrandCheckException("respond")}assertRequiredArgument(e,1,"respond");e=convertUnsignedLongLongWithEnforceRange(e,"First parameter");if(this._associatedReadableByteStreamController===undefined){throw new TypeError("This BYOB request has been invalidated")}if(IsDetachedBuffer(this._view.buffer));ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,e)};ReadableStreamBYOBRequest.prototype.respondWithNewView=function(e){if(!IsReadableStreamBYOBRequest(this)){throw byobRequestBrandCheckException("respondWithNewView")}assertRequiredArgument(e,1,"respondWithNewView");if(!ArrayBuffer.isView(e)){throw new TypeError("You can only respond with array buffer views")}if(this._associatedReadableByteStreamController===undefined){throw new TypeError("This BYOB request has been invalidated")}if(IsDetachedBuffer(e.buffer));ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,e)};return ReadableStreamBYOBRequest}();Object.defineProperties(R.prototype,{respond:{enumerable:true},respondWithNewView:{enumerable:true},view:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(R.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:true})}var C=function(){function ReadableByteStreamController(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this)){throw byteStreamControllerBrandCheckException("byobRequest")}return ReadableByteStreamControllerGetBYOBRequest(this)},enumerable:false,configurable:true});Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this)){throw byteStreamControllerBrandCheckException("desiredSize")}return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:false,configurable:true});ReadableByteStreamController.prototype.close=function(){if(!IsReadableByteStreamController(this)){throw byteStreamControllerBrandCheckException("close")}if(this._closeRequested){throw new TypeError("The stream has already been closed; do not close it again!")}var e=this._controlledReadableByteStream._state;if(e!=="readable"){throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed")}ReadableByteStreamControllerClose(this)};ReadableByteStreamController.prototype.enqueue=function(e){if(!IsReadableByteStreamController(this)){throw byteStreamControllerBrandCheckException("enqueue")}assertRequiredArgument(e,1,"enqueue");if(!ArrayBuffer.isView(e)){throw new TypeError("chunk must be an array buffer view")}if(e.byteLength===0){throw new TypeError("chunk must have non-zero byteLength")}if(e.buffer.byteLength===0){throw new TypeError("chunk's buffer must have non-zero byteLength")}if(this._closeRequested){throw new TypeError("stream is closed or draining")}var t=this._controlledReadableByteStream._state;if(t!=="readable"){throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to")}ReadableByteStreamControllerEnqueue(this,e)};ReadableByteStreamController.prototype.error=function(e){if(e===void 0){e=undefined}if(!IsReadableByteStreamController(this)){throw byteStreamControllerBrandCheckException("error")}ReadableByteStreamControllerError(this,e)};ReadableByteStreamController.prototype[h]=function(e){ReadableByteStreamControllerClearPendingPullIntos(this);ResetQueue(this);var t=this._cancelAlgorithm(e);ReadableByteStreamControllerClearAlgorithms(this);return t};ReadableByteStreamController.prototype[p]=function(e){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var r=this._queue.shift();this._queueTotalSize-=r.byteLength;ReadableByteStreamControllerHandleQueueDrain(this);var n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);e._chunkSteps(n);return}var o=this._autoAllocateChunkSize;if(o!==undefined){var i=void 0;try{i=new ArrayBuffer(o)}catch(t){e._errorSteps(t);return}var a={buffer:i,bufferByteLength:o,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}ReadableStreamAddReadRequest(t,e);ReadableByteStreamControllerCallPullIfNeeded(this)};return ReadableByteStreamController}();Object.defineProperties(C.prototype,{close:{enumerable:true},enqueue:{enumerable:true},error:{enumerable:true},byobRequest:{enumerable:true},desiredSize:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(C.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:true})}function IsReadableByteStreamController(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")){return false}return e instanceof C}function IsReadableStreamBYOBRequest(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")){return false}return e instanceof R}function ReadableByteStreamControllerCallPullIfNeeded(e){var t=ReadableByteStreamControllerShouldCallPull(e);if(!t){return}if(e._pulling){e._pullAgain=true;return}e._pulling=true;var r=e._pullAlgorithm();uponPromise(r,(function(){e._pulling=false;if(e._pullAgain){e._pullAgain=false;ReadableByteStreamControllerCallPullIfNeeded(e)}}),(function(t){ReadableByteStreamControllerError(e,t)}))}function ReadableByteStreamControllerClearPendingPullIntos(e){ReadableByteStreamControllerInvalidateBYOBRequest(e);e._pendingPullIntos=new c}function ReadableByteStreamControllerCommitPullIntoDescriptor(e,t){var r=false;if(e._state==="closed"){r=true}var n=ReadableByteStreamControllerConvertPullIntoDescriptor(t);if(t.readerType==="default"){ReadableStreamFulfillReadRequest(e,n,r)}else{ReadableStreamFulfillReadIntoRequest(e,n,r)}}function ReadableByteStreamControllerConvertPullIntoDescriptor(e){var t=e.bytesFilled;var r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function ReadableByteStreamControllerEnqueueChunkToQueue(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n});e._queueTotalSize+=n}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(e,t){var r=t.elementSize;var n=t.bytesFilled-t.bytesFilled%r;var o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled);var i=t.bytesFilled+o;var a=i-i%r;var s=o;var l=false;if(a>n){s=a-t.bytesFilled;l=true}var u=e._queue;while(s>0){var c=u.peek();var f=Math.min(s,c.byteLength);var d=t.byteOffset+t.bytesFilled;CopyDataBlockBytes(t.buffer,d,c.buffer,c.byteOffset,f);if(c.byteLength===f){u.shift()}else{c.byteOffset+=f;c.byteLength-=f}e._queueTotalSize-=f;ReadableByteStreamControllerFillHeadPullIntoDescriptor(e,f,t);s-=f}return l}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(e,t,r){r.bytesFilled+=t}function ReadableByteStreamControllerHandleQueueDrain(e){if(e._queueTotalSize===0&&e._closeRequested){ReadableByteStreamControllerClearAlgorithms(e);ReadableStreamClose(e._controlledReadableByteStream)}else{ReadableByteStreamControllerCallPullIfNeeded(e)}}function ReadableByteStreamControllerInvalidateBYOBRequest(e){if(e._byobRequest===null){return}e._byobRequest._associatedReadableByteStreamController=undefined;e._byobRequest._view=null;e._byobRequest=null}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e){while(e._pendingPullIntos.length>0){if(e._queueTotalSize===0){return}var t=e._pendingPullIntos.peek();if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(e,t)){ReadableByteStreamControllerShiftPendingPullInto(e);ReadableByteStreamControllerCommitPullIntoDescriptor(e._controlledReadableByteStream,t)}}}function ReadableByteStreamControllerPullInto(e,t,r){var n=e._controlledReadableByteStream;var o=1;if(t.constructor!==DataView){o=t.constructor.BYTES_PER_ELEMENT}var i=t.constructor;var a=TransferArrayBuffer(t.buffer);var s={buffer:a,bufferByteLength:a.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(s);ReadableStreamAddReadIntoRequest(n,r);return}if(n._state==="closed"){var l=new i(s.buffer,s.byteOffset,0);r._closeSteps(l);return}if(e._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(e,s)){var u=ReadableByteStreamControllerConvertPullIntoDescriptor(s);ReadableByteStreamControllerHandleQueueDrain(e);r._chunkSteps(u);return}if(e._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(e,c);r._errorSteps(c);return}}e._pendingPullIntos.push(s);ReadableStreamAddReadIntoRequest(n,r);ReadableByteStreamControllerCallPullIfNeeded(e)}function ReadableByteStreamControllerRespondInClosedState(e,t){var r=e._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(r)){while(ReadableStreamGetNumReadIntoRequests(r)>0){var n=ReadableByteStreamControllerShiftPendingPullInto(e);ReadableByteStreamControllerCommitPullIntoDescriptor(r,n)}}}function ReadableByteStreamControllerRespondInReadableState(e,t,r){ReadableByteStreamControllerFillHeadPullIntoDescriptor(e,t,r);if(r.bytesFilled<r.elementSize){return}ReadableByteStreamControllerShiftPendingPullInto(e);var n=r.bytesFilled%r.elementSize;if(n>0){var o=r.byteOffset+r.bytesFilled;var i=ArrayBufferSlice(r.buffer,o-n,o);ReadableByteStreamControllerEnqueueChunkToQueue(e,i,0,i.byteLength)}r.bytesFilled-=n;ReadableByteStreamControllerCommitPullIntoDescriptor(e._controlledReadableByteStream,r);ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e)}function ReadableByteStreamControllerRespondInternal(e,t){var r=e._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(e);var n=e._controlledReadableByteStream._state;if(n==="closed"){ReadableByteStreamControllerRespondInClosedState(e)}else{ReadableByteStreamControllerRespondInReadableState(e,t,r)}ReadableByteStreamControllerCallPullIfNeeded(e)}function ReadableByteStreamControllerShiftPendingPullInto(e){var t=e._pendingPullIntos.shift();return t}function ReadableByteStreamControllerShouldCallPull(e){var t=e._controlledReadableByteStream;if(t._state!=="readable"){return false}if(e._closeRequested){return false}if(!e._started){return false}if(ReadableStreamHasDefaultReader(t)&&ReadableStreamGetNumReadRequests(t)>0){return true}if(ReadableStreamHasBYOBReader(t)&&ReadableStreamGetNumReadIntoRequests(t)>0){return true}var r=ReadableByteStreamControllerGetDesiredSize(e);if(r>0){return true}return false}function ReadableByteStreamControllerClearAlgorithms(e){e._pullAlgorithm=undefined;e._cancelAlgorithm=undefined}function ReadableByteStreamControllerClose(e){var t=e._controlledReadableByteStream;if(e._closeRequested||t._state!=="readable"){return}if(e._queueTotalSize>0){e._closeRequested=true;return}if(e._pendingPullIntos.length>0){var r=e._pendingPullIntos.peek();if(r.bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(e,n);throw n}}ReadableByteStreamControllerClearAlgorithms(e);ReadableStreamClose(t)}function ReadableByteStreamControllerEnqueue(e,t){var r=e._controlledReadableByteStream;if(e._closeRequested||r._state!=="readable"){return}var n=t.buffer;var o=t.byteOffset;var i=t.byteLength;var a=TransferArrayBuffer(n);if(e._pendingPullIntos.length>0){var s=e._pendingPullIntos.peek();if(IsDetachedBuffer(s.buffer));s.buffer=TransferArrayBuffer(s.buffer)}ReadableByteStreamControllerInvalidateBYOBRequest(e);if(ReadableStreamHasDefaultReader(r)){if(ReadableStreamGetNumReadRequests(r)===0){ReadableByteStreamControllerEnqueueChunkToQueue(e,a,o,i)}else{if(e._pendingPullIntos.length>0){ReadableByteStreamControllerShiftPendingPullInto(e)}var l=new Uint8Array(a,o,i);ReadableStreamFulfillReadRequest(r,l,false)}}else if(ReadableStreamHasBYOBReader(r)){ReadableByteStreamControllerEnqueueChunkToQueue(e,a,o,i);ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e)}else{ReadableByteStreamControllerEnqueueChunkToQueue(e,a,o,i)}ReadableByteStreamControllerCallPullIfNeeded(e)}function ReadableByteStreamControllerError(e,t){var r=e._controlledReadableByteStream;if(r._state!=="readable"){return}ReadableByteStreamControllerClearPendingPullIntos(e);ResetQueue(e);ReadableByteStreamControllerClearAlgorithms(e);ReadableStreamError(r,t)}function ReadableByteStreamControllerGetBYOBRequest(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek();var r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled);var n=Object.create(R.prototype);SetUpReadableStreamBYOBRequest(n,e,r);e._byobRequest=n}return e._byobRequest}function ReadableByteStreamControllerGetDesiredSize(e){var t=e._controlledReadableByteStream._state;if(t==="errored"){return null}if(t==="closed"){return 0}return e._strategyHWM-e._queueTotalSize}function ReadableByteStreamControllerRespond(e,t){var r=e._pendingPullIntos.peek();var n=e._controlledReadableByteStream._state;if(n==="closed"){if(t!==0){throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}}else{if(t===0){throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream")}if(r.bytesFilled+t>r.byteLength){throw new RangeError("bytesWritten out of range")}}r.buffer=TransferArrayBuffer(r.buffer);ReadableByteStreamControllerRespondInternal(e,t)}function ReadableByteStreamControllerRespondWithNewView(e,t){var r=e._pendingPullIntos.peek();var n=e._controlledReadableByteStream._state;if(n==="closed"){if(t.byteLength!==0){throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}}else{if(t.byteLength===0){throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream")}}if(r.byteOffset+r.bytesFilled!==t.byteOffset){throw new RangeError("The region specified by view does not match byobRequest")}if(r.bufferByteLength!==t.buffer.byteLength){throw new RangeError("The buffer of view has different capacity than byobRequest")}if(r.bytesFilled+t.byteLength>r.byteLength){throw new RangeError("The region specified by view is larger than byobRequest")}var o=t.byteLength;r.buffer=TransferArrayBuffer(t.buffer);ReadableByteStreamControllerRespondInternal(e,o)}function SetUpReadableByteStreamController(e,t,r,n,o,i,a){t._controlledReadableByteStream=e;t._pullAgain=false;t._pulling=false;t._byobRequest=null;t._queue=t._queueTotalSize=undefined;ResetQueue(t);t._closeRequested=false;t._started=false;t._strategyHWM=i;t._pullAlgorithm=n;t._cancelAlgorithm=o;t._autoAllocateChunkSize=a;t._pendingPullIntos=new c;e._readableStreamController=t;var s=r();uponPromise(promiseResolvedWith(s),(function(){t._started=true;ReadableByteStreamControllerCallPullIfNeeded(t)}),(function(e){ReadableByteStreamControllerError(t,e)}))}function SetUpReadableByteStreamControllerFromUnderlyingSource(e,t,r){var n=Object.create(C.prototype);var startAlgorithm=function(){return undefined};var pullAlgorithm=function(){return promiseResolvedWith(undefined)};var cancelAlgorithm=function(){return promiseResolvedWith(undefined)};if(t.start!==undefined){startAlgorithm=function(){return t.start(n)}}if(t.pull!==undefined){pullAlgorithm=function(){return t.pull(n)}}if(t.cancel!==undefined){cancelAlgorithm=function(e){return t.cancel(e)}}var o=t.autoAllocateChunkSize;if(o===0){throw new TypeError("autoAllocateChunkSize must be greater than 0")}SetUpReadableByteStreamController(e,n,startAlgorithm,pullAlgorithm,cancelAlgorithm,r,o)}function SetUpReadableStreamBYOBRequest(e,t,r){e._associatedReadableByteStreamController=t;e._view=r}function byobRequestBrandCheckException(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function AcquireReadableStreamBYOBReader(e){return new k(e)}function ReadableStreamAddReadIntoRequest(e,t){e._reader._readIntoRequests.push(t)}function ReadableStreamFulfillReadIntoRequest(e,t,r){var n=e._reader;var o=n._readIntoRequests.shift();if(r){o._closeSteps(t)}else{o._chunkSteps(t)}}function ReadableStreamGetNumReadIntoRequests(e){return e._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(e){var t=e._reader;if(t===undefined){return false}if(!IsReadableStreamBYOBReader(t)){return false}return true}var k=function(){function ReadableStreamBYOBReader(e){assertRequiredArgument(e,1,"ReadableStreamBYOBReader");assertReadableStream(e,"First parameter");if(IsReadableStreamLocked(e)){throw new TypeError("This stream has already been locked for exclusive reading by another reader")}if(!IsReadableByteStreamController(e._readableStreamController)){throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte "+"source")}ReadableStreamReaderGenericInitialize(this,e);this._readIntoRequests=new c}Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){if(!IsReadableStreamBYOBReader(this)){return promiseRejectedWith(byobReaderBrandCheckException("closed"))}return this._closedPromise},enumerable:false,configurable:true});ReadableStreamBYOBReader.prototype.cancel=function(e){if(e===void 0){e=undefined}if(!IsReadableStreamBYOBReader(this)){return promiseRejectedWith(byobReaderBrandCheckException("cancel"))}if(this._ownerReadableStream===undefined){return promiseRejectedWith(readerLockException("cancel"))}return ReadableStreamReaderGenericCancel(this,e)};ReadableStreamBYOBReader.prototype.read=function(e){if(!IsReadableStreamBYOBReader(this)){return promiseRejectedWith(byobReaderBrandCheckException("read"))}if(!ArrayBuffer.isView(e)){return promiseRejectedWith(new TypeError("view must be an array buffer view"))}if(e.byteLength===0){return promiseRejectedWith(new TypeError("view must have non-zero byteLength"))}if(e.buffer.byteLength===0){return promiseRejectedWith(new TypeError("view's buffer must have non-zero byteLength"))}if(IsDetachedBuffer(e.buffer));if(this._ownerReadableStream===undefined){return promiseRejectedWith(readerLockException("read from"))}var t;var r;var n=newPromise((function(e,n){t=e;r=n}));var o={_chunkSteps:function(e){return t({value:e,done:false})},_closeSteps:function(e){return t({value:e,done:true})},_errorSteps:function(e){return r(e)}};ReadableStreamBYOBReaderRead(this,e,o);return n};ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this)){throw byobReaderBrandCheckException("releaseLock")}if(this._ownerReadableStream===undefined){return}if(this._readIntoRequests.length>0){throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled")}ReadableStreamReaderGenericRelease(this)};return ReadableStreamBYOBReader}();Object.defineProperties(k.prototype,{cancel:{enumerable:true},read:{enumerable:true},releaseLock:{enumerable:true},closed:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(k.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:true})}function IsReadableStreamBYOBReader(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")){return false}return e instanceof k}function ReadableStreamBYOBReaderRead(e,t,r){var n=e._ownerReadableStream;n._disturbed=true;if(n._state==="errored"){r._errorSteps(n._storedError)}else{ReadableByteStreamControllerPullInto(n._readableStreamController,t,r)}}function byobReaderBrandCheckException(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function ExtractHighWaterMark(e,t){var r=e.highWaterMark;if(r===undefined){return t}if(S(r)||r<0){throw new RangeError("Invalid highWaterMark")}return r}function ExtractSizeAlgorithm(e){var t=e.size;if(!t){return function(){return 1}}return t}function convertQueuingStrategy(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.highWaterMark;var n=e===null||e===void 0?void 0:e.size;return{highWaterMark:r===undefined?undefined:convertUnrestrictedDouble(r),size:n===undefined?undefined:convertQueuingStrategySize(n,t+" has member 'size' that")}}function convertQueuingStrategySize(e,t){assertFunction(e,t);return function(t){return convertUnrestrictedDouble(e(t))}}function convertUnderlyingSink(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.abort;var n=e===null||e===void 0?void 0:e.close;var o=e===null||e===void 0?void 0:e.start;var i=e===null||e===void 0?void 0:e.type;var a=e===null||e===void 0?void 0:e.write;return{abort:r===undefined?undefined:convertUnderlyingSinkAbortCallback(r,e,t+" has member 'abort' that"),close:n===undefined?undefined:convertUnderlyingSinkCloseCallback(n,e,t+" has member 'close' that"),start:o===undefined?undefined:convertUnderlyingSinkStartCallback(o,e,t+" has member 'start' that"),write:a===undefined?undefined:convertUnderlyingSinkWriteCallback(a,e,t+" has member 'write' that"),type:i}}function convertUnderlyingSinkAbortCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertUnderlyingSinkCloseCallback(e,t,r){assertFunction(e,r);return function(){return promiseCall(e,t,[])}}function convertUnderlyingSinkStartCallback(e,t,r){assertFunction(e,r);return function(r){return reflectCall(e,t,[r])}}function convertUnderlyingSinkWriteCallback(e,t,r){assertFunction(e,r);return function(r,n){return promiseCall(e,t,[r,n])}}function assertWritableStream(e,t){if(!IsWritableStream(e)){throw new TypeError(t+" is not a WritableStream.")}}function isAbortSignal(e){if(typeof e!=="object"||e===null){return false}try{return typeof e.aborted==="boolean"}catch(e){return false}}var T=typeof AbortController==="function";function createAbortController(){if(T){return new AbortController}return undefined}var E=function(){function WritableStream(e,t){if(e===void 0){e={}}if(t===void 0){t={}}if(e===undefined){e=null}else{assertObject(e,"First parameter")}var r=convertQueuingStrategy(t,"Second parameter");var n=convertUnderlyingSink(e,"First parameter");InitializeWritableStream(this);var o=n.type;if(o!==undefined){throw new RangeError("Invalid type is specified")}var i=ExtractSizeAlgorithm(r);var a=ExtractHighWaterMark(r,1);SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,n,a,i)}Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!IsWritableStream(this)){throw streamBrandCheckException$2("locked")}return IsWritableStreamLocked(this)},enumerable:false,configurable:true});WritableStream.prototype.abort=function(e){if(e===void 0){e=undefined}if(!IsWritableStream(this)){return promiseRejectedWith(streamBrandCheckException$2("abort"))}if(IsWritableStreamLocked(this)){return promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer"))}return WritableStreamAbort(this,e)};WritableStream.prototype.close=function(){if(!IsWritableStream(this)){return promiseRejectedWith(streamBrandCheckException$2("close"))}if(IsWritableStreamLocked(this)){return promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer"))}if(WritableStreamCloseQueuedOrInFlight(this)){return promiseRejectedWith(new TypeError("Cannot close an already-closing stream"))}return WritableStreamClose(this)};WritableStream.prototype.getWriter=function(){if(!IsWritableStream(this)){throw streamBrandCheckException$2("getWriter")}return AcquireWritableStreamDefaultWriter(this)};return WritableStream}();Object.defineProperties(E.prototype,{abort:{enumerable:true},close:{enumerable:true},getWriter:{enumerable:true},locked:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(E.prototype,t.toStringTag,{value:"WritableStream",configurable:true})}function AcquireWritableStreamDefaultWriter(e){return new A(e)}function CreateWritableStream(e,t,r,n,o,i){if(o===void 0){o=1}if(i===void 0){i=function(){return 1}}var a=Object.create(E.prototype);InitializeWritableStream(a);var s=Object.create(x.prototype);SetUpWritableStreamDefaultController(a,s,e,t,r,n,o,i);return a}function InitializeWritableStream(e){e._state="writable";e._storedError=undefined;e._writer=undefined;e._writableStreamController=undefined;e._writeRequests=new c;e._inFlightWriteRequest=undefined;e._closeRequest=undefined;e._inFlightCloseRequest=undefined;e._pendingAbortRequest=undefined;e._backpressure=false}function IsWritableStream(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")){return false}return e instanceof E}function IsWritableStreamLocked(e){if(e._writer===undefined){return false}return true}function WritableStreamAbort(e,t){var r;if(e._state==="closed"||e._state==="errored"){return promiseResolvedWith(undefined)}e._writableStreamController._abortReason=t;(r=e._writableStreamController._abortController)===null||r===void 0?void 0:r.abort();var n=e._state;if(n==="closed"||n==="errored"){return promiseResolvedWith(undefined)}if(e._pendingAbortRequest!==undefined){return e._pendingAbortRequest._promise}var o=false;if(n==="erroring"){o=true;t=undefined}var i=newPromise((function(r,n){e._pendingAbortRequest={_promise:undefined,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}}));e._pendingAbortRequest._promise=i;if(!o){WritableStreamStartErroring(e,t)}return i}function WritableStreamClose(e){var t=e._state;if(t==="closed"||t==="errored"){return promiseRejectedWith(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"))}var r=newPromise((function(t,r){var n={_resolve:t,_reject:r};e._closeRequest=n}));var n=e._writer;if(n!==undefined&&e._backpressure&&t==="writable"){defaultWriterReadyPromiseResolve(n)}WritableStreamDefaultControllerClose(e._writableStreamController);return r}function WritableStreamAddWriteRequest(e){var t=newPromise((function(t,r){var n={_resolve:t,_reject:r};e._writeRequests.push(n)}));return t}function WritableStreamDealWithRejection(e,t){var r=e._state;if(r==="writable"){WritableStreamStartErroring(e,t);return}WritableStreamFinishErroring(e)}function WritableStreamStartErroring(e,t){var r=e._writableStreamController;e._state="erroring";e._storedError=t;var n=e._writer;if(n!==undefined){WritableStreamDefaultWriterEnsureReadyPromiseRejected(n,t)}if(!WritableStreamHasOperationMarkedInFlight(e)&&r._started){WritableStreamFinishErroring(e)}}function WritableStreamFinishErroring(e){e._state="errored";e._writableStreamController[d]();var t=e._storedError;e._writeRequests.forEach((function(e){e._reject(t)}));e._writeRequests=new c;if(e._pendingAbortRequest===undefined){WritableStreamRejectCloseAndClosedPromiseIfNeeded(e);return}var r=e._pendingAbortRequest;e._pendingAbortRequest=undefined;if(r._wasAlreadyErroring){r._reject(t);WritableStreamRejectCloseAndClosedPromiseIfNeeded(e);return}var n=e._writableStreamController[f](r._reason);uponPromise(n,(function(){r._resolve();WritableStreamRejectCloseAndClosedPromiseIfNeeded(e)}),(function(t){r._reject(t);WritableStreamRejectCloseAndClosedPromiseIfNeeded(e)}))}function WritableStreamFinishInFlightWrite(e){e._inFlightWriteRequest._resolve(undefined);e._inFlightWriteRequest=undefined}function WritableStreamFinishInFlightWriteWithError(e,t){e._inFlightWriteRequest._reject(t);e._inFlightWriteRequest=undefined;WritableStreamDealWithRejection(e,t)}function WritableStreamFinishInFlightClose(e){e._inFlightCloseRequest._resolve(undefined);e._inFlightCloseRequest=undefined;var t=e._state;if(t==="erroring"){e._storedError=undefined;if(e._pendingAbortRequest!==undefined){e._pendingAbortRequest._resolve();e._pendingAbortRequest=undefined}}e._state="closed";var r=e._writer;if(r!==undefined){defaultWriterClosedPromiseResolve(r)}}function WritableStreamFinishInFlightCloseWithError(e,t){e._inFlightCloseRequest._reject(t);e._inFlightCloseRequest=undefined;if(e._pendingAbortRequest!==undefined){e._pendingAbortRequest._reject(t);e._pendingAbortRequest=undefined}WritableStreamDealWithRejection(e,t)}function WritableStreamCloseQueuedOrInFlight(e){if(e._closeRequest===undefined&&e._inFlightCloseRequest===undefined){return false}return true}function WritableStreamHasOperationMarkedInFlight(e){if(e._inFlightWriteRequest===undefined&&e._inFlightCloseRequest===undefined){return false}return true}function WritableStreamMarkCloseRequestInFlight(e){e._inFlightCloseRequest=e._closeRequest;e._closeRequest=undefined}function WritableStreamMarkFirstWriteRequestInFlight(e){e._inFlightWriteRequest=e._writeRequests.shift()}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(e){if(e._closeRequest!==undefined){e._closeRequest._reject(e._storedError);e._closeRequest=undefined}var t=e._writer;if(t!==undefined){defaultWriterClosedPromiseReject(t,e._storedError)}}function WritableStreamUpdateBackpressure(e,t){var r=e._writer;if(r!==undefined&&t!==e._backpressure){if(t){defaultWriterReadyPromiseReset(r)}else{defaultWriterReadyPromiseResolve(r)}}e._backpressure=t}var A=function(){function WritableStreamDefaultWriter(e){assertRequiredArgument(e,1,"WritableStreamDefaultWriter");assertWritableStream(e,"First parameter");if(IsWritableStreamLocked(e)){throw new TypeError("This stream has already been locked for exclusive writing by another writer")}this._ownerWritableStream=e;e._writer=this;var t=e._state;if(t==="writable"){if(!WritableStreamCloseQueuedOrInFlight(e)&&e._backpressure){defaultWriterReadyPromiseInitialize(this)}else{defaultWriterReadyPromiseInitializeAsResolved(this)}defaultWriterClosedPromiseInitialize(this)}else if(t==="erroring"){defaultWriterReadyPromiseInitializeAsRejected(this,e._storedError);defaultWriterClosedPromiseInitialize(this)}else if(t==="closed"){defaultWriterReadyPromiseInitializeAsResolved(this);defaultWriterClosedPromiseInitializeAsResolved(this)}else{var r=e._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,r);defaultWriterClosedPromiseInitializeAsRejected(this,r)}}Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){if(!IsWritableStreamDefaultWriter(this)){return promiseRejectedWith(defaultWriterBrandCheckException("closed"))}return this._closedPromise},enumerable:false,configurable:true});Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this)){throw defaultWriterBrandCheckException("desiredSize")}if(this._ownerWritableStream===undefined){throw defaultWriterLockException("desiredSize")}return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:false,configurable:true});Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){if(!IsWritableStreamDefaultWriter(this)){return promiseRejectedWith(defaultWriterBrandCheckException("ready"))}return this._readyPromise},enumerable:false,configurable:true});WritableStreamDefaultWriter.prototype.abort=function(e){if(e===void 0){e=undefined}if(!IsWritableStreamDefaultWriter(this)){return promiseRejectedWith(defaultWriterBrandCheckException("abort"))}if(this._ownerWritableStream===undefined){return promiseRejectedWith(defaultWriterLockException("abort"))}return WritableStreamDefaultWriterAbort(this,e)};WritableStreamDefaultWriter.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this)){return promiseRejectedWith(defaultWriterBrandCheckException("close"))}var e=this._ownerWritableStream;if(e===undefined){return promiseRejectedWith(defaultWriterLockException("close"))}if(WritableStreamCloseQueuedOrInFlight(e)){return promiseRejectedWith(new TypeError("Cannot close an already-closing stream"))}return WritableStreamDefaultWriterClose(this)};WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this)){throw defaultWriterBrandCheckException("releaseLock")}var e=this._ownerWritableStream;if(e===undefined){return}WritableStreamDefaultWriterRelease(this)};WritableStreamDefaultWriter.prototype.write=function(e){if(e===void 0){e=undefined}if(!IsWritableStreamDefaultWriter(this)){return promiseRejectedWith(defaultWriterBrandCheckException("write"))}if(this._ownerWritableStream===undefined){return promiseRejectedWith(defaultWriterLockException("write to"))}return WritableStreamDefaultWriterWrite(this,e)};return WritableStreamDefaultWriter}();Object.defineProperties(A.prototype,{abort:{enumerable:true},close:{enumerable:true},releaseLock:{enumerable:true},write:{enumerable:true},closed:{enumerable:true},desiredSize:{enumerable:true},ready:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(A.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:true})}function IsWritableStreamDefaultWriter(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")){return false}return e instanceof A}function WritableStreamDefaultWriterAbort(e,t){var r=e._ownerWritableStream;return WritableStreamAbort(r,t)}function WritableStreamDefaultWriterClose(e){var t=e._ownerWritableStream;return WritableStreamClose(t)}function WritableStreamDefaultWriterCloseWithErrorPropagation(e){var t=e._ownerWritableStream;var r=t._state;if(WritableStreamCloseQueuedOrInFlight(t)||r==="closed"){return promiseResolvedWith(undefined)}if(r==="errored"){return promiseRejectedWith(t._storedError)}return WritableStreamDefaultWriterClose(e)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(e,t){if(e._closedPromiseState==="pending"){defaultWriterClosedPromiseReject(e,t)}else{defaultWriterClosedPromiseResetToRejected(e,t)}}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(e,t){if(e._readyPromiseState==="pending"){defaultWriterReadyPromiseReject(e,t)}else{defaultWriterReadyPromiseResetToRejected(e,t)}}function WritableStreamDefaultWriterGetDesiredSize(e){var t=e._ownerWritableStream;var r=t._state;if(r==="errored"||r==="erroring"){return null}if(r==="closed"){return 0}return WritableStreamDefaultControllerGetDesiredSize(t._writableStreamController)}function WritableStreamDefaultWriterRelease(e){var t=e._ownerWritableStream;var r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(e,r);WritableStreamDefaultWriterEnsureClosedPromiseRejected(e,r);t._writer=undefined;e._ownerWritableStream=undefined}function WritableStreamDefaultWriterWrite(e,t){var r=e._ownerWritableStream;var n=r._writableStreamController;var o=WritableStreamDefaultControllerGetChunkSize(n,t);if(r!==e._ownerWritableStream){return promiseRejectedWith(defaultWriterLockException("write to"))}var i=r._state;if(i==="errored"){return promiseRejectedWith(r._storedError)}if(WritableStreamCloseQueuedOrInFlight(r)||i==="closed"){return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"))}if(i==="erroring"){return promiseRejectedWith(r._storedError)}var a=WritableStreamAddWriteRequest(r);WritableStreamDefaultControllerWrite(n,t,o);return a}var B={};var x=function(){function WritableStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(WritableStreamDefaultController.prototype,"abortReason",{get:function(){if(!IsWritableStreamDefaultController(this)){throw defaultControllerBrandCheckException$2("abortReason")}return this._abortReason},enumerable:false,configurable:true});Object.defineProperty(WritableStreamDefaultController.prototype,"signal",{get:function(){if(!IsWritableStreamDefaultController(this)){throw defaultControllerBrandCheckException$2("signal")}if(this._abortController===undefined){throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported")}return this._abortController.signal},enumerable:false,configurable:true});WritableStreamDefaultController.prototype.error=function(e){if(e===void 0){e=undefined}if(!IsWritableStreamDefaultController(this)){throw defaultControllerBrandCheckException$2("error")}var t=this._controlledWritableStream._state;if(t!=="writable"){return}WritableStreamDefaultControllerError(this,e)};WritableStreamDefaultController.prototype[f]=function(e){var t=this._abortAlgorithm(e);WritableStreamDefaultControllerClearAlgorithms(this);return t};WritableStreamDefaultController.prototype[d]=function(){ResetQueue(this)};return WritableStreamDefaultController}();Object.defineProperties(x.prototype,{abortReason:{enumerable:true},signal:{enumerable:true},error:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(x.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:true})}function IsWritableStreamDefaultController(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")){return false}return e instanceof x}function SetUpWritableStreamDefaultController(e,t,r,n,o,i,a,s){t._controlledWritableStream=e;e._writableStreamController=t;t._queue=undefined;t._queueTotalSize=undefined;ResetQueue(t);t._abortReason=undefined;t._abortController=createAbortController();t._started=false;t._strategySizeAlgorithm=s;t._strategyHWM=a;t._writeAlgorithm=n;t._closeAlgorithm=o;t._abortAlgorithm=i;var l=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(e,l);var u=r();var c=promiseResolvedWith(u);uponPromise(c,(function(){t._started=true;WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(function(r){t._started=true;WritableStreamDealWithRejection(e,r)}))}function SetUpWritableStreamDefaultControllerFromUnderlyingSink(e,t,r,n){var o=Object.create(x.prototype);var startAlgorithm=function(){return undefined};var writeAlgorithm=function(){return promiseResolvedWith(undefined)};var closeAlgorithm=function(){return promiseResolvedWith(undefined)};var abortAlgorithm=function(){return promiseResolvedWith(undefined)};if(t.start!==undefined){startAlgorithm=function(){return t.start(o)}}if(t.write!==undefined){writeAlgorithm=function(e){return t.write(e,o)}}if(t.close!==undefined){closeAlgorithm=function(){return t.close()}}if(t.abort!==undefined){abortAlgorithm=function(e){return t.abort(e)}}SetUpWritableStreamDefaultController(e,o,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,r,n)}function WritableStreamDefaultControllerClearAlgorithms(e){e._writeAlgorithm=undefined;e._closeAlgorithm=undefined;e._abortAlgorithm=undefined;e._strategySizeAlgorithm=undefined}function WritableStreamDefaultControllerClose(e){EnqueueValueWithSize(e,B,0);WritableStreamDefaultControllerAdvanceQueueIfNeeded(e)}function WritableStreamDefaultControllerGetChunkSize(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){WritableStreamDefaultControllerErrorIfNeeded(e,t);return 1}}function WritableStreamDefaultControllerGetDesiredSize(e){return e._strategyHWM-e._queueTotalSize}function WritableStreamDefaultControllerWrite(e,t,r){try{EnqueueValueWithSize(e,t,r)}catch(t){WritableStreamDefaultControllerErrorIfNeeded(e,t);return}var n=e._controlledWritableStream;if(!WritableStreamCloseQueuedOrInFlight(n)&&n._state==="writable"){var o=WritableStreamDefaultControllerGetBackpressure(e);WritableStreamUpdateBackpressure(n,o)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(e)}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(e){var t=e._controlledWritableStream;if(!e._started){return}if(t._inFlightWriteRequest!==undefined){return}var r=t._state;if(r==="erroring"){WritableStreamFinishErroring(t);return}if(e._queue.length===0){return}var n=PeekQueueValue(e);if(n===B){WritableStreamDefaultControllerProcessClose(e)}else{WritableStreamDefaultControllerProcessWrite(e,n)}}function WritableStreamDefaultControllerErrorIfNeeded(e,t){if(e._controlledWritableStream._state==="writable"){WritableStreamDefaultControllerError(e,t)}}function WritableStreamDefaultControllerProcessClose(e){var t=e._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(t);DequeueValue(e);var r=e._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(e);uponPromise(r,(function(){WritableStreamFinishInFlightClose(t)}),(function(e){WritableStreamFinishInFlightCloseWithError(t,e)}))}function WritableStreamDefaultControllerProcessWrite(e,t){var r=e._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(r);var n=e._writeAlgorithm(t);uponPromise(n,(function(){WritableStreamFinishInFlightWrite(r);var t=r._state;DequeueValue(e);if(!WritableStreamCloseQueuedOrInFlight(r)&&t==="writable"){var n=WritableStreamDefaultControllerGetBackpressure(e);WritableStreamUpdateBackpressure(r,n)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(e)}),(function(t){if(r._state==="writable"){WritableStreamDefaultControllerClearAlgorithms(e)}WritableStreamFinishInFlightWriteWithError(r,t)}))}function WritableStreamDefaultControllerGetBackpressure(e){var t=WritableStreamDefaultControllerGetDesiredSize(e);return t<=0}function WritableStreamDefaultControllerError(e,t){var r=e._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(e);WritableStreamStartErroring(r,t)}function streamBrandCheckException$2(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function defaultControllerBrandCheckException$2(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function defaultWriterBrandCheckException(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(e){e._closedPromise=newPromise((function(t,r){e._closedPromise_resolve=t;e._closedPromise_reject=r;e._closedPromiseState="pending"}))}function defaultWriterClosedPromiseInitializeAsRejected(e,t){defaultWriterClosedPromiseInitialize(e);defaultWriterClosedPromiseReject(e,t)}function defaultWriterClosedPromiseInitializeAsResolved(e){defaultWriterClosedPromiseInitialize(e);defaultWriterClosedPromiseResolve(e)}function defaultWriterClosedPromiseReject(e,t){if(e._closedPromise_reject===undefined){return}setPromiseIsHandledToTrue(e._closedPromise);e._closedPromise_reject(t);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined;e._closedPromiseState="rejected"}function defaultWriterClosedPromiseResetToRejected(e,t){defaultWriterClosedPromiseInitializeAsRejected(e,t)}function defaultWriterClosedPromiseResolve(e){if(e._closedPromise_resolve===undefined){return}e._closedPromise_resolve(undefined);e._closedPromise_resolve=undefined;e._closedPromise_reject=undefined;e._closedPromiseState="resolved"}function defaultWriterReadyPromiseInitialize(e){e._readyPromise=newPromise((function(t,r){e._readyPromise_resolve=t;e._readyPromise_reject=r}));e._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(e,t){defaultWriterReadyPromiseInitialize(e);defaultWriterReadyPromiseReject(e,t)}function defaultWriterReadyPromiseInitializeAsResolved(e){defaultWriterReadyPromiseInitialize(e);defaultWriterReadyPromiseResolve(e)}function defaultWriterReadyPromiseReject(e,t){if(e._readyPromise_reject===undefined){return}setPromiseIsHandledToTrue(e._readyPromise);e._readyPromise_reject(t);e._readyPromise_resolve=undefined;e._readyPromise_reject=undefined;e._readyPromiseState="rejected"}function defaultWriterReadyPromiseReset(e){defaultWriterReadyPromiseInitialize(e)}function defaultWriterReadyPromiseResetToRejected(e,t){defaultWriterReadyPromiseInitializeAsRejected(e,t)}function defaultWriterReadyPromiseResolve(e){if(e._readyPromise_resolve===undefined){return}e._readyPromise_resolve(undefined);e._readyPromise_resolve=undefined;e._readyPromise_reject=undefined;e._readyPromiseState="fulfilled"}var I=typeof DOMException!=="undefined"?DOMException:undefined;function isDOMExceptionConstructor(e){if(!(typeof e==="function"||typeof e==="object")){return false}try{new e;return true}catch(e){return false}}function createDOMExceptionPolyfill(){var e=function DOMException(e,t){this.message=e||"";this.name=t||"Error";if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}};e.prototype=Object.create(Error.prototype);Object.defineProperty(e.prototype,"constructor",{value:e,writable:true,configurable:true});return e}var D=isDOMExceptionConstructor(I)?I:createDOMExceptionPolyfill();function ReadableStreamPipeTo(e,t,r,n,o,i){var a=AcquireReadableStreamDefaultReader(e);var s=AcquireWritableStreamDefaultWriter(t);e._disturbed=true;var l=false;var u=promiseResolvedWith(undefined);return newPromise((function(c,f){var d;if(i!==undefined){d=function(){var r=new D("Aborted","AbortError");var i=[];if(!n){i.push((function(){if(t._state==="writable"){return WritableStreamAbort(t,r)}return promiseResolvedWith(undefined)}))}if(!o){i.push((function(){if(e._state==="readable"){return ReadableStreamCancel(e,r)}return promiseResolvedWith(undefined)}))}shutdownWithAction((function(){return Promise.all(i.map((function(e){return e()})))}),true,r)};if(i.aborted){d();return}i.addEventListener("abort",d)}function pipeLoop(){return newPromise((function(e,t){function next(r){if(r){e()}else{PerformPromiseThen(pipeStep(),next,t)}}next(false)}))}function pipeStep(){if(l){return promiseResolvedWith(true)}return PerformPromiseThen(s._readyPromise,(function(){return newPromise((function(e,t){ReadableStreamDefaultReaderRead(a,{_chunkSteps:function(t){u=PerformPromiseThen(WritableStreamDefaultWriterWrite(s,t),undefined,noop);e(false)},_closeSteps:function(){return e(true)},_errorSteps:t})}))}))}isOrBecomesErrored(e,a._closedPromise,(function(e){if(!n){shutdownWithAction((function(){return WritableStreamAbort(t,e)}),true,e)}else{shutdown(true,e)}}));isOrBecomesErrored(t,s._closedPromise,(function(t){if(!o){shutdownWithAction((function(){return ReadableStreamCancel(e,t)}),true,t)}else{shutdown(true,t)}}));isOrBecomesClosed(e,a._closedPromise,(function(){if(!r){shutdownWithAction((function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(s)}))}else{shutdown()}}));if(WritableStreamCloseQueuedOrInFlight(t)||t._state==="closed"){var h=new TypeError("the destination writable stream closed before all data could be piped to it");if(!o){shutdownWithAction((function(){return ReadableStreamCancel(e,h)}),true,h)}else{shutdown(true,h)}}setPromiseIsHandledToTrue(pipeLoop());function waitForWritesToFinish(){var e=u;return PerformPromiseThen(u,(function(){return e!==u?waitForWritesToFinish():undefined}))}function isOrBecomesErrored(e,t,r){if(e._state==="errored"){r(e._storedError)}else{uponRejection(t,r)}}function isOrBecomesClosed(e,t,r){if(e._state==="closed"){r()}else{uponFulfillment(t,r)}}function shutdownWithAction(e,r,n){if(l){return}l=true;if(t._state==="writable"&&!WritableStreamCloseQueuedOrInFlight(t)){uponFulfillment(waitForWritesToFinish(),doTheRest)}else{doTheRest()}function doTheRest(){uponPromise(e(),(function(){return finalize(r,n)}),(function(e){return finalize(true,e)}))}}function shutdown(e,r){if(l){return}l=true;if(t._state==="writable"&&!WritableStreamCloseQueuedOrInFlight(t)){uponFulfillment(waitForWritesToFinish(),(function(){return finalize(e,r)}))}else{finalize(e,r)}}function finalize(e,t){WritableStreamDefaultWriterRelease(s);ReadableStreamReaderGenericRelease(a);if(i!==undefined){i.removeEventListener("abort",d)}if(e){f(t)}else{c(undefined)}}}))}var O=function(){function ReadableStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this)){throw defaultControllerBrandCheckException$1("desiredSize")}return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:false,configurable:true});ReadableStreamDefaultController.prototype.close=function(){if(!IsReadableStreamDefaultController(this)){throw defaultControllerBrandCheckException$1("close")}if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)){throw new TypeError("The stream is not in a state that permits close")}ReadableStreamDefaultControllerClose(this)};ReadableStreamDefaultController.prototype.enqueue=function(e){if(e===void 0){e=undefined}if(!IsReadableStreamDefaultController(this)){throw defaultControllerBrandCheckException$1("enqueue")}if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)){throw new TypeError("The stream is not in a state that permits enqueue")}return ReadableStreamDefaultControllerEnqueue(this,e)};ReadableStreamDefaultController.prototype.error=function(e){if(e===void 0){e=undefined}if(!IsReadableStreamDefaultController(this)){throw defaultControllerBrandCheckException$1("error")}ReadableStreamDefaultControllerError(this,e)};ReadableStreamDefaultController.prototype[h]=function(e){ResetQueue(this);var t=this._cancelAlgorithm(e);ReadableStreamDefaultControllerClearAlgorithms(this);return t};ReadableStreamDefaultController.prototype[p]=function(e){var t=this._controlledReadableStream;if(this._queue.length>0){var r=DequeueValue(this);if(this._closeRequested&&this._queue.length===0){ReadableStreamDefaultControllerClearAlgorithms(this);ReadableStreamClose(t)}else{ReadableStreamDefaultControllerCallPullIfNeeded(this)}e._chunkSteps(r)}else{ReadableStreamAddReadRequest(t,e);ReadableStreamDefaultControllerCallPullIfNeeded(this)}};return ReadableStreamDefaultController}();Object.defineProperties(O.prototype,{close:{enumerable:true},enqueue:{enumerable:true},error:{enumerable:true},desiredSize:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(O.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:true})}function IsReadableStreamDefaultController(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")){return false}return e instanceof O}function ReadableStreamDefaultControllerCallPullIfNeeded(e){var t=ReadableStreamDefaultControllerShouldCallPull(e);if(!t){return}if(e._pulling){e._pullAgain=true;return}e._pulling=true;var r=e._pullAlgorithm();uponPromise(r,(function(){e._pulling=false;if(e._pullAgain){e._pullAgain=false;ReadableStreamDefaultControllerCallPullIfNeeded(e)}}),(function(t){ReadableStreamDefaultControllerError(e,t)}))}function ReadableStreamDefaultControllerShouldCallPull(e){var t=e._controlledReadableStream;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(e)){return false}if(!e._started){return false}if(IsReadableStreamLocked(t)&&ReadableStreamGetNumReadRequests(t)>0){return true}var r=ReadableStreamDefaultControllerGetDesiredSize(e);if(r>0){return true}return false}function ReadableStreamDefaultControllerClearAlgorithms(e){e._pullAlgorithm=undefined;e._cancelAlgorithm=undefined;e._strategySizeAlgorithm=undefined}function ReadableStreamDefaultControllerClose(e){if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(e)){return}var t=e._controlledReadableStream;e._closeRequested=true;if(e._queue.length===0){ReadableStreamDefaultControllerClearAlgorithms(e);ReadableStreamClose(t)}}function ReadableStreamDefaultControllerEnqueue(e,t){if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(e)){return}var r=e._controlledReadableStream;if(IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0){ReadableStreamFulfillReadRequest(r,t,false)}else{var n=void 0;try{n=e._strategySizeAlgorithm(t)}catch(t){ReadableStreamDefaultControllerError(e,t);throw t}try{EnqueueValueWithSize(e,t,n)}catch(t){ReadableStreamDefaultControllerError(e,t);throw t}}ReadableStreamDefaultControllerCallPullIfNeeded(e)}function ReadableStreamDefaultControllerError(e,t){var r=e._controlledReadableStream;if(r._state!=="readable"){return}ResetQueue(e);ReadableStreamDefaultControllerClearAlgorithms(e);ReadableStreamError(r,t)}function ReadableStreamDefaultControllerGetDesiredSize(e){var t=e._controlledReadableStream._state;if(t==="errored"){return null}if(t==="closed"){return 0}return e._strategyHWM-e._queueTotalSize}function ReadableStreamDefaultControllerHasBackpressure(e){if(ReadableStreamDefaultControllerShouldCallPull(e)){return false}return true}function ReadableStreamDefaultControllerCanCloseOrEnqueue(e){var t=e._controlledReadableStream._state;if(!e._closeRequested&&t==="readable"){return true}return false}function SetUpReadableStreamDefaultController(e,t,r,n,o,i,a){t._controlledReadableStream=e;t._queue=undefined;t._queueTotalSize=undefined;ResetQueue(t);t._started=false;t._closeRequested=false;t._pullAgain=false;t._pulling=false;t._strategySizeAlgorithm=a;t._strategyHWM=i;t._pullAlgorithm=n;t._cancelAlgorithm=o;e._readableStreamController=t;var s=r();uponPromise(promiseResolvedWith(s),(function(){t._started=true;ReadableStreamDefaultControllerCallPullIfNeeded(t)}),(function(e){ReadableStreamDefaultControllerError(t,e)}))}function SetUpReadableStreamDefaultControllerFromUnderlyingSource(e,t,r,n){var o=Object.create(O.prototype);var startAlgorithm=function(){return undefined};var pullAlgorithm=function(){return promiseResolvedWith(undefined)};var cancelAlgorithm=function(){return promiseResolvedWith(undefined)};if(t.start!==undefined){startAlgorithm=function(){return t.start(o)}}if(t.pull!==undefined){pullAlgorithm=function(){return t.pull(o)}}if(t.cancel!==undefined){cancelAlgorithm=function(e){return t.cancel(e)}}SetUpReadableStreamDefaultController(e,o,startAlgorithm,pullAlgorithm,cancelAlgorithm,r,n)}function defaultControllerBrandCheckException$1(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function ReadableStreamTee(e,t){if(IsReadableByteStreamController(e._readableStreamController)){return ReadableByteStreamTee(e)}return ReadableStreamDefaultTee(e)}function ReadableStreamDefaultTee(e,t){var r=AcquireReadableStreamDefaultReader(e);var n=false;var o=false;var i=false;var a=false;var s;var u;var c;var f;var d;var h=newPromise((function(e){d=e}));function pullAlgorithm(){if(n){o=true;return promiseResolvedWith(undefined)}n=true;var e={_chunkSteps:function(e){l((function(){o=false;var t=e;var r=e;if(!i){ReadableStreamDefaultControllerEnqueue(c._readableStreamController,t)}if(!a){ReadableStreamDefaultControllerEnqueue(f._readableStreamController,r)}n=false;if(o){pullAlgorithm()}}))},_closeSteps:function(){n=false;if(!i){ReadableStreamDefaultControllerClose(c._readableStreamController)}if(!a){ReadableStreamDefaultControllerClose(f._readableStreamController)}if(!i||!a){d(undefined)}},_errorSteps:function(){n=false}};ReadableStreamDefaultReaderRead(r,e);return promiseResolvedWith(undefined)}function cancel1Algorithm(t){i=true;s=t;if(a){var r=CreateArrayFromList([s,u]);var n=ReadableStreamCancel(e,r);d(n)}return h}function cancel2Algorithm(t){a=true;u=t;if(i){var r=CreateArrayFromList([s,u]);var n=ReadableStreamCancel(e,r);d(n)}return h}function startAlgorithm(){}c=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm);f=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm);uponRejection(r._closedPromise,(function(e){ReadableStreamDefaultControllerError(c._readableStreamController,e);ReadableStreamDefaultControllerError(f._readableStreamController,e);if(!i||!a){d(undefined)}}));return[c,f]}function ReadableByteStreamTee(e){var t=AcquireReadableStreamDefaultReader(e);var r=false;var n=false;var o=false;var i=false;var a=false;var s;var u;var c;var f;var d;var h=newPromise((function(e){d=e}));function forwardReaderError(e){uponRejection(e._closedPromise,(function(r){if(e!==t){return}ReadableByteStreamControllerError(c._readableStreamController,r);ReadableByteStreamControllerError(f._readableStreamController,r);if(!i||!a){d(undefined)}}))}function pullWithDefaultReader(){if(IsReadableStreamBYOBReader(t)){ReadableStreamReaderGenericRelease(t);t=AcquireReadableStreamDefaultReader(e);forwardReaderError(t)}var s={_chunkSteps:function(t){l((function(){n=false;o=false;var s=t;var l=t;if(!i&&!a){try{l=CloneAsUint8Array(t)}catch(t){ReadableByteStreamControllerError(c._readableStreamController,t);ReadableByteStreamControllerError(f._readableStreamController,t);d(ReadableStreamCancel(e,t));return}}if(!i){ReadableByteStreamControllerEnqueue(c._readableStreamController,s)}if(!a){ReadableByteStreamControllerEnqueue(f._readableStreamController,l)}r=false;if(n){pull1Algorithm()}else if(o){pull2Algorithm()}}))},_closeSteps:function(){r=false;if(!i){ReadableByteStreamControllerClose(c._readableStreamController)}if(!a){ReadableByteStreamControllerClose(f._readableStreamController)}if(c._readableStreamController._pendingPullIntos.length>0){ReadableByteStreamControllerRespond(c._readableStreamController,0)}if(f._readableStreamController._pendingPullIntos.length>0){ReadableByteStreamControllerRespond(f._readableStreamController,0)}if(!i||!a){d(undefined)}},_errorSteps:function(){r=false}};ReadableStreamDefaultReaderRead(t,s)}function pullWithBYOBReader(s,u){if(IsReadableStreamDefaultReader(t)){ReadableStreamReaderGenericRelease(t);t=AcquireReadableStreamBYOBReader(e);forwardReaderError(t)}var h=u?f:c;var p=u?c:f;var m={_chunkSteps:function(t){l((function(){n=false;o=false;var s=u?a:i;var l=u?i:a;if(!l){var c=void 0;try{c=CloneAsUint8Array(t)}catch(t){ReadableByteStreamControllerError(h._readableStreamController,t);ReadableByteStreamControllerError(p._readableStreamController,t);d(ReadableStreamCancel(e,t));return}if(!s){ReadableByteStreamControllerRespondWithNewView(h._readableStreamController,t)}ReadableByteStreamControllerEnqueue(p._readableStreamController,c)}else if(!s){ReadableByteStreamControllerRespondWithNewView(h._readableStreamController,t)}r=false;if(n){pull1Algorithm()}else if(o){pull2Algorithm()}}))},_closeSteps:function(e){r=false;var t=u?a:i;var n=u?i:a;if(!t){ReadableByteStreamControllerClose(h._readableStreamController)}if(!n){ReadableByteStreamControllerClose(p._readableStreamController)}if(e!==undefined){if(!t){ReadableByteStreamControllerRespondWithNewView(h._readableStreamController,e)}if(!n&&p._readableStreamController._pendingPullIntos.length>0){ReadableByteStreamControllerRespond(p._readableStreamController,0)}}if(!t||!n){d(undefined)}},_errorSteps:function(){r=false}};ReadableStreamBYOBReaderRead(t,s,m)}function pull1Algorithm(){if(r){n=true;return promiseResolvedWith(undefined)}r=true;var e=ReadableByteStreamControllerGetBYOBRequest(c._readableStreamController);if(e===null){pullWithDefaultReader()}else{pullWithBYOBReader(e._view,false)}return promiseResolvedWith(undefined)}function pull2Algorithm(){if(r){o=true;return promiseResolvedWith(undefined)}r=true;var e=ReadableByteStreamControllerGetBYOBRequest(f._readableStreamController);if(e===null){pullWithDefaultReader()}else{pullWithBYOBReader(e._view,true)}return promiseResolvedWith(undefined)}function cancel1Algorithm(t){i=true;s=t;if(a){var r=CreateArrayFromList([s,u]);var n=ReadableStreamCancel(e,r);d(n)}return h}function cancel2Algorithm(t){a=true;u=t;if(i){var r=CreateArrayFromList([s,u]);var n=ReadableStreamCancel(e,r);d(n)}return h}function startAlgorithm(){return}c=CreateReadableByteStream(startAlgorithm,pull1Algorithm,cancel1Algorithm);f=CreateReadableByteStream(startAlgorithm,pull2Algorithm,cancel2Algorithm);forwardReaderError(t);return[c,f]}function convertUnderlyingDefaultOrByteSource(e,t){assertDictionary(e,t);var r=e;var n=r===null||r===void 0?void 0:r.autoAllocateChunkSize;var o=r===null||r===void 0?void 0:r.cancel;var i=r===null||r===void 0?void 0:r.pull;var a=r===null||r===void 0?void 0:r.start;var s=r===null||r===void 0?void 0:r.type;return{autoAllocateChunkSize:n===undefined?undefined:convertUnsignedLongLongWithEnforceRange(n,t+" has member 'autoAllocateChunkSize' that"),cancel:o===undefined?undefined:convertUnderlyingSourceCancelCallback(o,r,t+" has member 'cancel' that"),pull:i===undefined?undefined:convertUnderlyingSourcePullCallback(i,r,t+" has member 'pull' that"),start:a===undefined?undefined:convertUnderlyingSourceStartCallback(a,r,t+" has member 'start' that"),type:s===undefined?undefined:convertReadableStreamType(s,t+" has member 'type' that")}}function convertUnderlyingSourceCancelCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertUnderlyingSourcePullCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertUnderlyingSourceStartCallback(e,t,r){assertFunction(e,r);return function(r){return reflectCall(e,t,[r])}}function convertReadableStreamType(e,t){e=""+e;if(e!=="bytes"){throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamType")}return e}function convertReaderOptions(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.mode;return{mode:r===undefined?undefined:convertReadableStreamReaderMode(r,t+" has member 'mode' that")}}function convertReadableStreamReaderMode(e,t){e=""+e;if(e!=="byob"){throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode")}return e}function convertIteratorOptions(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}function convertPipeOptions(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.preventAbort;var n=e===null||e===void 0?void 0:e.preventCancel;var o=e===null||e===void 0?void 0:e.preventClose;var i=e===null||e===void 0?void 0:e.signal;if(i!==undefined){assertAbortSignal(i,t+" has member 'signal' that")}return{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}function assertAbortSignal(e,t){if(!isAbortSignal(e)){throw new TypeError(t+" is not an AbortSignal.")}}function convertReadableWritablePair(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.readable;assertRequiredField(r,"readable","ReadableWritablePair");assertReadableStream(r,t+" has member 'readable' that");var n=e===null||e===void 0?void 0:e.writable;assertRequiredField(n,"writable","ReadableWritablePair");assertWritableStream(n,t+" has member 'writable' that");return{readable:r,writable:n}}var P=function(){function ReadableStream(e,t){if(e===void 0){e={}}if(t===void 0){t={}}if(e===undefined){e=null}else{assertObject(e,"First parameter")}var r=convertQueuingStrategy(t,"Second parameter");var n=convertUnderlyingDefaultOrByteSource(e,"First parameter");InitializeReadableStream(this);if(n.type==="bytes"){if(r.size!==undefined){throw new RangeError("The strategy for a byte stream cannot have a size function")}var o=ExtractHighWaterMark(r,0);SetUpReadableByteStreamControllerFromUnderlyingSource(this,n,o)}else{var i=ExtractSizeAlgorithm(r);var o=ExtractHighWaterMark(r,1);SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,n,o,i)}}Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!IsReadableStream(this)){throw streamBrandCheckException$1("locked")}return IsReadableStreamLocked(this)},enumerable:false,configurable:true});ReadableStream.prototype.cancel=function(e){if(e===void 0){e=undefined}if(!IsReadableStream(this)){return promiseRejectedWith(streamBrandCheckException$1("cancel"))}if(IsReadableStreamLocked(this)){return promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader"))}return ReadableStreamCancel(this,e)};ReadableStream.prototype.getReader=function(e){if(e===void 0){e=undefined}if(!IsReadableStream(this)){throw streamBrandCheckException$1("getReader")}var t=convertReaderOptions(e,"First parameter");if(t.mode===undefined){return AcquireReadableStreamDefaultReader(this)}return AcquireReadableStreamBYOBReader(this)};ReadableStream.prototype.pipeThrough=function(e,t){if(t===void 0){t={}}if(!IsReadableStream(this)){throw streamBrandCheckException$1("pipeThrough")}assertRequiredArgument(e,1,"pipeThrough");var r=convertReadableWritablePair(e,"First parameter");var n=convertPipeOptions(t,"Second parameter");if(IsReadableStreamLocked(this)){throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream")}if(IsWritableStreamLocked(r.writable)){throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream")}var o=ReadableStreamPipeTo(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal);setPromiseIsHandledToTrue(o);return r.readable};ReadableStream.prototype.pipeTo=function(e,t){if(t===void 0){t={}}if(!IsReadableStream(this)){return promiseRejectedWith(streamBrandCheckException$1("pipeTo"))}if(e===undefined){return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.")}if(!IsWritableStream(e)){return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"))}var r;try{r=convertPipeOptions(t,"Second parameter")}catch(e){return promiseRejectedWith(e)}if(IsReadableStreamLocked(this)){return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"))}if(IsWritableStreamLocked(e)){return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"))}return ReadableStreamPipeTo(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)};ReadableStream.prototype.tee=function(){if(!IsReadableStream(this)){throw streamBrandCheckException$1("tee")}var e=ReadableStreamTee(this);return CreateArrayFromList(e)};ReadableStream.prototype.values=function(e){if(e===void 0){e=undefined}if(!IsReadableStream(this)){throw streamBrandCheckException$1("values")}var t=convertIteratorOptions(e,"First parameter");return AcquireReadableStreamAsyncIterator(this,t.preventCancel)};return ReadableStream}();Object.defineProperties(P.prototype,{cancel:{enumerable:true},getReader:{enumerable:true},pipeThrough:{enumerable:true},pipeTo:{enumerable:true},tee:{enumerable:true},values:{enumerable:true},locked:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(P.prototype,t.toStringTag,{value:"ReadableStream",configurable:true})}if(typeof t.asyncIterator==="symbol"){Object.defineProperty(P.prototype,t.asyncIterator,{value:P.prototype.values,writable:true,configurable:true})}function CreateReadableStream(e,t,r,n,o){if(n===void 0){n=1}if(o===void 0){o=function(){return 1}}var i=Object.create(P.prototype);InitializeReadableStream(i);var a=Object.create(O.prototype);SetUpReadableStreamDefaultController(i,a,e,t,r,n,o);return i}function CreateReadableByteStream(e,t,r){var n=Object.create(P.prototype);InitializeReadableStream(n);var o=Object.create(C.prototype);SetUpReadableByteStreamController(n,o,e,t,r,0,undefined);return n}function InitializeReadableStream(e){e._state="readable";e._reader=undefined;e._storedError=undefined;e._disturbed=false}function IsReadableStream(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")){return false}return e instanceof P}function IsReadableStreamLocked(e){if(e._reader===undefined){return false}return true}function ReadableStreamCancel(e,t){e._disturbed=true;if(e._state==="closed"){return promiseResolvedWith(undefined)}if(e._state==="errored"){return promiseRejectedWith(e._storedError)}ReadableStreamClose(e);var r=e._reader;if(r!==undefined&&IsReadableStreamBYOBReader(r)){r._readIntoRequests.forEach((function(e){e._closeSteps(undefined)}));r._readIntoRequests=new c}var n=e._readableStreamController[h](t);return transformPromiseWith(n,noop)}function ReadableStreamClose(e){e._state="closed";var t=e._reader;if(t===undefined){return}defaultReaderClosedPromiseResolve(t);if(IsReadableStreamDefaultReader(t)){t._readRequests.forEach((function(e){e._closeSteps()}));t._readRequests=new c}}function ReadableStreamError(e,t){e._state="errored";e._storedError=t;var r=e._reader;if(r===undefined){return}defaultReaderClosedPromiseReject(r,t);if(IsReadableStreamDefaultReader(r)){r._readRequests.forEach((function(e){e._errorSteps(t)}));r._readRequests=new c}else{r._readIntoRequests.forEach((function(e){e._errorSteps(t)}));r._readIntoRequests=new c}}function streamBrandCheckException$1(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function convertQueuingStrategyInit(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.highWaterMark;assertRequiredField(r,"highWaterMark","QueuingStrategyInit");return{highWaterMark:convertUnrestrictedDouble(r)}}var byteLengthSizeFunction=function(e){return e.byteLength};try{Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:true})}catch(g){}var j=function(){function ByteLengthQueuingStrategy(e){assertRequiredArgument(e,1,"ByteLengthQueuingStrategy");e=convertQueuingStrategyInit(e,"First parameter");this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}Object.defineProperty(ByteLengthQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this)){throw byteLengthBrandCheckException("highWaterMark")}return this._byteLengthQueuingStrategyHighWaterMark},enumerable:false,configurable:true});Object.defineProperty(ByteLengthQueuingStrategy.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this)){throw byteLengthBrandCheckException("size")}return byteLengthSizeFunction},enumerable:false,configurable:true});return ByteLengthQueuingStrategy}();Object.defineProperties(j.prototype,{highWaterMark:{enumerable:true},size:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(j.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:true})}function byteLengthBrandCheckException(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function IsByteLengthQueuingStrategy(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")){return false}return e instanceof j}var countSizeFunction=function(){return 1};try{Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:true})}catch(g){}var W=function(){function CountQueuingStrategy(e){assertRequiredArgument(e,1,"CountQueuingStrategy");e=convertQueuingStrategyInit(e,"First parameter");this._countQueuingStrategyHighWaterMark=e.highWaterMark}Object.defineProperty(CountQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this)){throw countBrandCheckException("highWaterMark")}return this._countQueuingStrategyHighWaterMark},enumerable:false,configurable:true});Object.defineProperty(CountQueuingStrategy.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this)){throw countBrandCheckException("size")}return countSizeFunction},enumerable:false,configurable:true});return CountQueuingStrategy}();Object.defineProperties(W.prototype,{highWaterMark:{enumerable:true},size:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(W.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:true})}function countBrandCheckException(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function IsCountQueuingStrategy(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")){return false}return e instanceof W}function convertTransformer(e,t){assertDictionary(e,t);var r=e===null||e===void 0?void 0:e.flush;var n=e===null||e===void 0?void 0:e.readableType;var o=e===null||e===void 0?void 0:e.start;var i=e===null||e===void 0?void 0:e.transform;var a=e===null||e===void 0?void 0:e.writableType;return{flush:r===undefined?undefined:convertTransformerFlushCallback(r,e,t+" has member 'flush' that"),readableType:n,start:o===undefined?undefined:convertTransformerStartCallback(o,e,t+" has member 'start' that"),transform:i===undefined?undefined:convertTransformerTransformCallback(i,e,t+" has member 'transform' that"),writableType:a}}function convertTransformerFlushCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertTransformerStartCallback(e,t,r){assertFunction(e,r);return function(r){return reflectCall(e,t,[r])}}function convertTransformerTransformCallback(e,t,r){assertFunction(e,r);return function(r,n){return promiseCall(e,t,[r,n])}}var U=function(){function TransformStream(e,t,r){if(e===void 0){e={}}if(t===void 0){t={}}if(r===void 0){r={}}if(e===undefined){e=null}var n=convertQueuingStrategy(t,"Second parameter");var o=convertQueuingStrategy(r,"Third parameter");var i=convertTransformer(e,"First parameter");if(i.readableType!==undefined){throw new RangeError("Invalid readableType specified")}if(i.writableType!==undefined){throw new RangeError("Invalid writableType specified")}var a=ExtractHighWaterMark(o,0);var s=ExtractSizeAlgorithm(o);var l=ExtractHighWaterMark(n,1);var u=ExtractSizeAlgorithm(n);var c;var f=newPromise((function(e){c=e}));InitializeTransformStream(this,f,l,u,a,s);SetUpTransformStreamDefaultControllerFromTransformer(this,i);if(i.start!==undefined){c(i.start(this._transformStreamController))}else{c(undefined)}}Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!IsTransformStream(this)){throw streamBrandCheckException("readable")}return this._readable},enumerable:false,configurable:true});Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!IsTransformStream(this)){throw streamBrandCheckException("writable")}return this._writable},enumerable:false,configurable:true});return TransformStream}();Object.defineProperties(U.prototype,{readable:{enumerable:true},writable:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(U.prototype,t.toStringTag,{value:"TransformStream",configurable:true})}function InitializeTransformStream(e,t,r,n,o,i){function startAlgorithm(){return t}function writeAlgorithm(t){return TransformStreamDefaultSinkWriteAlgorithm(e,t)}function abortAlgorithm(t){return TransformStreamDefaultSinkAbortAlgorithm(e,t)}function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(e)}e._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,r,n);function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(e)}function cancelAlgorithm(t){TransformStreamErrorWritableAndUnblockWrite(e,t);return promiseResolvedWith(undefined)}e._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,o,i);e._backpressure=undefined;e._backpressureChangePromise=undefined;e._backpressureChangePromise_resolve=undefined;TransformStreamSetBackpressure(e,true);e._transformStreamController=undefined}function IsTransformStream(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")){return false}return e instanceof U}function TransformStreamError(e,t){ReadableStreamDefaultControllerError(e._readable._readableStreamController,t);TransformStreamErrorWritableAndUnblockWrite(e,t)}function TransformStreamErrorWritableAndUnblockWrite(e,t){TransformStreamDefaultControllerClearAlgorithms(e._transformStreamController);WritableStreamDefaultControllerErrorIfNeeded(e._writable._writableStreamController,t);if(e._backpressure){TransformStreamSetBackpressure(e,false)}}function TransformStreamSetBackpressure(e,t){if(e._backpressureChangePromise!==undefined){e._backpressureChangePromise_resolve()}e._backpressureChangePromise=newPromise((function(t){e._backpressureChangePromise_resolve=t}));e._backpressure=t}var L=function(){function TransformStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this)){throw defaultControllerBrandCheckException("desiredSize")}var e=this._controlledTransformStream._readable._readableStreamController;return ReadableStreamDefaultControllerGetDesiredSize(e)},enumerable:false,configurable:true});TransformStreamDefaultController.prototype.enqueue=function(e){if(e===void 0){e=undefined}if(!IsTransformStreamDefaultController(this)){throw defaultControllerBrandCheckException("enqueue")}TransformStreamDefaultControllerEnqueue(this,e)};TransformStreamDefaultController.prototype.error=function(e){if(e===void 0){e=undefined}if(!IsTransformStreamDefaultController(this)){throw defaultControllerBrandCheckException("error")}TransformStreamDefaultControllerError(this,e)};TransformStreamDefaultController.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this)){throw defaultControllerBrandCheckException("terminate")}TransformStreamDefaultControllerTerminate(this)};return TransformStreamDefaultController}();Object.defineProperties(L.prototype,{enqueue:{enumerable:true},error:{enumerable:true},terminate:{enumerable:true},desiredSize:{enumerable:true}});if(typeof t.toStringTag==="symbol"){Object.defineProperty(L.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:true})}function IsTransformStreamDefaultController(e){if(!typeIsObject(e)){return false}if(!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")){return false}return e instanceof L}function SetUpTransformStreamDefaultController(e,t,r,n){t._controlledTransformStream=e;e._transformStreamController=t;t._transformAlgorithm=r;t._flushAlgorithm=n}function SetUpTransformStreamDefaultControllerFromTransformer(e,t){var r=Object.create(L.prototype);var transformAlgorithm=function(e){try{TransformStreamDefaultControllerEnqueue(r,e);return promiseResolvedWith(undefined)}catch(e){return promiseRejectedWith(e)}};var flushAlgorithm=function(){return promiseResolvedWith(undefined)};if(t.transform!==undefined){transformAlgorithm=function(e){return t.transform(e,r)}}if(t.flush!==undefined){flushAlgorithm=function(){return t.flush(r)}}SetUpTransformStreamDefaultController(e,r,transformAlgorithm,flushAlgorithm)}function TransformStreamDefaultControllerClearAlgorithms(e){e._transformAlgorithm=undefined;e._flushAlgorithm=undefined}function TransformStreamDefaultControllerEnqueue(e,t){var r=e._controlledTransformStream;var n=r._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(n)){throw new TypeError("Readable side is not in a state that permits enqueue")}try{ReadableStreamDefaultControllerEnqueue(n,t)}catch(e){TransformStreamErrorWritableAndUnblockWrite(r,e);throw r._readable._storedError}var o=ReadableStreamDefaultControllerHasBackpressure(n);if(o!==r._backpressure){TransformStreamSetBackpressure(r,true)}}function TransformStreamDefaultControllerError(e,t){TransformStreamError(e._controlledTransformStream,t)}function TransformStreamDefaultControllerPerformTransform(e,t){var r=e._transformAlgorithm(t);return transformPromiseWith(r,undefined,(function(t){TransformStreamError(e._controlledTransformStream,t);throw t}))}function TransformStreamDefaultControllerTerminate(e){var t=e._controlledTransformStream;var r=t._readable._readableStreamController;ReadableStreamDefaultControllerClose(r);var n=new TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(t,n)}function TransformStreamDefaultSinkWriteAlgorithm(e,t){var r=e._transformStreamController;if(e._backpressure){var n=e._backpressureChangePromise;return transformPromiseWith(n,(function(){var n=e._writable;var o=n._state;if(o==="erroring"){throw n._storedError}return TransformStreamDefaultControllerPerformTransform(r,t)}))}return TransformStreamDefaultControllerPerformTransform(r,t)}function TransformStreamDefaultSinkAbortAlgorithm(e,t){TransformStreamError(e,t);return promiseResolvedWith(undefined)}function TransformStreamDefaultSinkCloseAlgorithm(e){var t=e._readable;var r=e._transformStreamController;var n=r._flushAlgorithm();TransformStreamDefaultControllerClearAlgorithms(r);return transformPromiseWith(n,(function(){if(t._state==="errored"){throw t._storedError}ReadableStreamDefaultControllerClose(t._readableStreamController)}),(function(r){TransformStreamError(e,r);throw t._storedError}))}function TransformStreamDefaultSourcePullAlgorithm(e){TransformStreamSetBackpressure(e,false);return e._backpressureChangePromise}function defaultControllerBrandCheckException(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.ByteLengthQueuingStrategy=j;e.CountQueuingStrategy=W;e.ReadableByteStreamController=C;e.ReadableStream=P;e.ReadableStreamBYOBReader=k;e.ReadableStreamBYOBRequest=R;e.ReadableStreamDefaultController=O;e.ReadableStreamDefaultReader=b;e.TransformStream=U;e.TransformStreamDefaultController=L;e.WritableStream=E;e.WritableStreamDefaultController=x;e.WritableStreamDefaultWriter=A;Object.defineProperty(e,"__esModule",{value:true})}))},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},5356:e=>{"use strict";e.exports=require("stream/web")},4404:e=>{"use strict";e.exports=require("tls")},3837:e=>{"use strict";e.exports=require("util")},8059:(e,t,r)=>{try{e.exports=r(5356)}catch(t){e.exports=r(5650)}}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var r=__webpack_module_cache__[e]={exports:{}};var n=true;try{__webpack_modules__[e].call(r.exports,r,r.exports,__nccwpck_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}return r.exports}(()=>{__nccwpck_require__.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;__nccwpck_require__.d(t,{a:t});return t}})();(()=>{__nccwpck_require__.d=(e,t)=>{for(var r in t){if(__nccwpck_require__.o(t,r)&&!__nccwpck_require__.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}}})();(()=>{__nccwpck_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{__nccwpck_require__.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";__nccwpck_require__.r(__webpack_exports__);var e={};__nccwpck_require__.r(e);__nccwpck_require__.d(e,{base58btc:()=>G,base58flickr:()=>Y});var t={};__nccwpck_require__.r(t);__nccwpck_require__.d(t,{base32:()=>J,base32hex:()=>ee,base32hexpad:()=>re,base32hexpadupper:()=>ne,base32hexupper:()=>te,base32pad:()=>K,base32padupper:()=>Z,base32upper:()=>X,base32z:()=>oe});var r={};__nccwpck_require__.r(r);__nccwpck_require__.d(r,{sha256:()=>mt,sha512:()=>yt});var n={};__nccwpck_require__.r(n);__nccwpck_require__.d(n,{code:()=>$t,createLink:()=>createLink,createNode:()=>createNode,decode:()=>src_decode,encode:()=>src_encode,name:()=>zt,prepare:()=>prepare,validate:()=>validate});var o={};__nccwpck_require__.r(o);__nccwpck_require__.d(o,{code:()=>Gt,decode:()=>raw_decode,encode:()=>raw_encode,name:()=>Qt});var i={};__nccwpck_require__.r(i);__nccwpck_require__.d(i,{identity:()=>lr});var a={};__nccwpck_require__.r(a);__nccwpck_require__.d(a,{base2:()=>ur});var s={};__nccwpck_require__.r(s);__nccwpck_require__.d(s,{base8:()=>cr});var l={};__nccwpck_require__.r(l);__nccwpck_require__.d(l,{base10:()=>fr});var u={};__nccwpck_require__.r(u);__nccwpck_require__.d(u,{base16:()=>dr,base16upper:()=>hr});var c={};__nccwpck_require__.r(c);__nccwpck_require__.d(c,{base36:()=>pr,base36upper:()=>mr});var f={};__nccwpck_require__.r(f);__nccwpck_require__.d(f,{base64:()=>yr,base64pad:()=>br,base64url:()=>gr,base64urlpad:()=>_r});var d={};__nccwpck_require__.r(d);__nccwpck_require__.d(d,{base256emoji:()=>Rr});var h={};__nccwpck_require__.r(h);__nccwpck_require__.d(h,{identity:()=>Er});var p={};__nccwpck_require__.r(p);__nccwpck_require__.d(p,{code:()=>Ir,decode:()=>json_decode,encode:()=>json_encode,name:()=>xr});var m={};__nccwpck_require__.r(m);__nccwpck_require__.d(m,{abortedError:()=>abortedError,notFoundError:()=>notFoundError});var y={};__nccwpck_require__.r(y);__nccwpck_require__.d(y,{code:()=>Cn,decode:()=>dag_cbor_esm_decode,encode:()=>dag_cbor_esm_encode,name:()=>Rn});async function*_batch(e,t){let r=[];for await(const n of t){r.push(n);if(r.length===e){yield r;r=[]}}if(r.length>0){yield r}}function*_syncBatch(e,t){let r=[];for(const n of t){r.push(n);if(r.length===e){yield r;r=[]}}if(r.length>0){yield r}}function batch(e,t){if(t===undefined){return t=>batch(e,t)}if(t[Symbol.asyncIterator]){return _batch(e,t)}return _syncBatch(e,t)}const b=Symbol("TIMEOUT");const createTimer=e=>{let t;return[new Promise((r=>{t=setTimeout((()=>r(b)),e)})),()=>{clearTimeout(t)}]};async function*_batchWithTimeout(e,t,r){const n=r[Symbol.asyncIterator]();let o;let i=[];let a;let s;const startTimer=()=>{deleteTimer();[a,s]=createTimer(t)};const deleteTimer=()=>{if(s){s()}a=undefined};o=n.next();while(true){const t=await(a?Promise.race([o,a]):o);if(t===b||t.done){if(i.length){yield i;i=[]}deleteTimer();if(t!==b){break}continue}o=n.next();i.push(t.value);if(i.length===1){startTimer()}if(i.length===e){yield i;i=[];deleteTimer();continue}}}function batchWithTimeout(e,t,r){if(r===undefined){return r=>batchWithTimeout(e,t,r)}if(r[Symbol.asyncIterator]&&t!==Infinity){return _batchWithTimeout(e,t,r)}return batch(e,r)}function getIterator(e){if(typeof e.next==="function"){return e}if(typeof e[Symbol.iterator]==="function"){return e[Symbol.iterator]()}if(typeof e[Symbol.asyncIterator]==="function"){return e[Symbol.asyncIterator]()}throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function defer(){let e;let t;const r=new Promise(((r,n)=>{t=r;e=n}));return{promise:r,reject:e,resolve:t}}function _buffer(e,t){const r=getIterator(t);const n=[];const o=[];let i=false;let a=false;function fulfillReadQueue(){while(o.length>0&&n.length>0){const e=o.shift();const{error:t,value:r}=n.shift();if(t){e.reject(t)}else{e.resolve({done:false,value:r})}}while(o.length>0&&a){const{resolve:e}=o.shift();e({done:true,value:undefined})}}async function fillQueue(){if(a){return}if(i){return}if(n.length>=e){return}i=true;try{const{done:e,value:t}=await r.next();if(e){a=true}else{n.push({value:t})}}catch(e){a=true;n.push({error:e})}fulfillReadQueue();i=false;fillQueue()}async function next(){if(n.length>0){const{error:e,value:t}=n.shift();if(e){throw e}fillQueue();return{done:false,value:t}}if(a){return{done:true,value:undefined}}const e=defer();o.push(e);fillQueue();return e.promise}const s={next:next,[Symbol.asyncIterator]:()=>s};return s}function*syncBuffer(e,t){const r=[];let n;try{for(const n of t){r.push(n);if(r.length<=e){continue}yield r.shift()}}catch(e){n=e}for(const e of r){yield e}if(n){throw n}}function buffer(e,t){if(t===undefined){return t=>buffer(e,t)}if(e===0){return t}if(t[Symbol.asyncIterator]){return _buffer(e,t)}return syncBuffer(e,t)}async function _collect(e){const t=[];for await(const r of e){t.push(r)}return t}function collect(e){if(e[Symbol.asyncIterator]){return _collect(e)}return Array.from(e)}async function*_concat(e){for await(const t of e){yield*t}}function*_syncConcat(e){for(const t of e){yield*t}}function concat(...e){const t=e.find((e=>e[Symbol.asyncIterator]!==undefined));if(t){return _concat(e)}else{return _syncConcat(e)}}async function _consume(e){for await(const t of e){}}function consume(e){if(e[Symbol.asyncIterator]){return _consume(e)}for(const t of e){}}async function*_filter(e,t){for await(const r of t){if(await e(r)){yield r}}}function filter(e,t){if(t===undefined){return t=>_filter(e,t)}return _filter(e,t)}async function*flatten(e){for await(const t of e){if(t&&typeof t!=="string"&&(t[Symbol.iterator]||t[Symbol.asyncIterator])){yield*flatten(t)}else{yield t}}}async function*_map(e,t){for await(const r of t){yield await e(r)}}function map(e,t){if(t===undefined){return t=>_map(e,t)}return _map(e,t)}function flatMap(e,t){if(t===undefined){return t=>flatMap(e,t)}return filter((e=>e!==undefined&&e!==null),flatten(map(e,t)))}function _flatTransform(e,t,r){const n=getIterator(r);const o=[];const i=[];let a=false;let s=false;let l=0;let u=null;function fulfillReadQueue(){while(i.length>0&&o.length>0){const{resolve:e}=i.shift();const t=o.shift();e({done:false,value:t})}while(i.length>0&&l===0&&a){const{resolve:e,reject:t}=i.shift();if(u){t(u);u=null}else{e({done:true,value:undefined})}}}async function fillQueue(){if(a){fulfillReadQueue();return}if(s){return}if(l+o.length>=e){return}s=true;l++;try{const{done:e,value:t}=await n.next();if(e){a=true;l--;fulfillReadQueue()}else{mapAndQueue(t)}}catch(e){a=true;l--;u=e;fulfillReadQueue()}s=false;fillQueue()}async function mapAndQueue(e){try{const r=await t(e);if(r&&r[Symbol.asyncIterator]){for await(const e of r){o.push(e)}}else{o.push(r)}}catch(e){a=true;u=e}l--;fulfillReadQueue();fillQueue()}async function next(){if(o.length===0){const e=defer();i.push(e);fillQueue();return e.promise}const e=o.shift();fillQueue();return{done:false,value:e}}const c={next:next,[Symbol.asyncIterator]:()=>c};return c}function flatTransform(e,t,r){if(t===undefined){return(t,r)=>r?flatTransform(e,t,r):flatTransform(e,t)}if(r===undefined){return r=>flatTransform(e,t,r)}return filter((e=>e!==undefined&&e!==null),flatten(_flatTransform(e,t,r)))}async function onceReadable(e){return new Promise((t=>{e.once("readable",(()=>{t()}))}))}async function*_fromStream(e){while(true){const t=e.read();if(t!==null){yield t;continue}if(e._readableState.ended){break}await onceReadable(e)}}function fromStream(e){if(typeof e[Symbol.asyncIterator]==="function"){return e}return _fromStream(e)}async function*merge(...e){const t=new Set(e.map(getIterator));while(t.size>0){for(const e of t){const r=await e.next();if(r.done){t.delete(e)}else{yield r.value}}}}function pipeline(e,...t){let r=e();for(const e of t){r=e(r)}return r}async function*_parallelMap(e,t,r){let n=null;const wrapFunc=e=>({value:t(e)});const stopOnError=async function*(e){for await(const t of e){if(n){return}yield t}};const o=pipeline((()=>r),buffer(1),stopOnError,map(wrapFunc),buffer(e-1));const i=getIterator(o);while(true){const{value:e,done:t}=await i.next();if(t){break}try{const t=await e.value;if(!n){yield t}}catch(e){n=e}}if(n){throw n}}function parallelMap(e,t,r){if(t===undefined){return(t,r)=>parallelMap(e,t,r)}if(r===undefined){return r=>parallelMap(e,t,r)}if(e===1){return map(t,r)}return _parallelMap(e,t,r)}function parallelFlatMap(e,t,r){if(t===undefined){return(t,r)=>r?parallelFlatMap(e,t,r):parallelFlatMap(e,t)}if(r===undefined){return r=>parallelFlatMap(e,t,r)}return filter((e=>e!==undefined&&e!==null),flatten(parallelMap(e,t,r)))}async function*parallelMerge(...e){const t=e.map(getIterator);const r=new Set;const n=new Map;let o=null;let i=null;let a=null;const notifyError=e=>{o=e;if(i){i(e)}};const notifyDone=e=>{if(a){a(e)}};const waitForQueue=()=>new Promise(((e,t)=>{if(o){t(o)}if(n.size>0){return e()}a=e;i=t}));const queueNext=e=>{const t=Promise.resolve(e.next()).then((async({done:o,value:i})=>{if(!o){n.set(e,i)}r.delete(t)}));r.add(t);t.then(notifyDone,notifyError)};for(const e of t){queueNext(e)}while(true){if(r.size===0&&n.size===0){return}await waitForQueue();for(const[e,t]of n){n.delete(e);yield t;queueNext(e)}}}async function _reduce(e,t,r){let n=t;for await(const t of r){n=await e(n,t)}return n}function reduce(e,t,r){if(t===undefined){return(t,r)=>r?_reduce(e,t,r):reduce(e,t)}if(r===undefined){return r=>reduce(e,t,r)}return _reduce(e,t,r)}async function*_take(e,t){let r=0;for await(const n of t){yield await n;r++;if(r>=e){break}}}function*_syncTake(e,t){let r=0;for(const n of t){yield n;r++;if(r>=e){break}}}function take(e,t){if(t===undefined){return t=>take(e,t)}if(t[Symbol.asyncIterator]){return _take(e,t)}return _syncTake(e,t)}async function*_asyncTap(e,t){for await(const r of t){await e(r);yield r}}function tap(e,t){if(t===undefined){return t=>_asyncTap(e,t)}return _asyncTap(e,t)}const sleep=e=>new Promise((t=>setTimeout(t,e)));function _throttle(e,t,r){if(!Number.isFinite(e)){throw new TypeError("Expected `limit` to be a finite number")}if(e<=0){throw new TypeError("Expected `limit` to be greater than 0")}if(!Number.isFinite(t)){throw new TypeError("Expected `interval` to be a finite number")}return async function*__throttle(){let n=0;let o;for await(const i of r){if(n<e){if(typeof o==="undefined"){o=Date.now()}n++;yield i;continue}const r=Date.now()-o;const a=t-r;if(a>0){await sleep(a)}o=Date.now();n=1;yield i}}()}function throttle(e,t,r){if(r===undefined){return r=>_throttle(e,t,r)}return _throttle(e,t,r)}function addTime(e,t){let r=e[0]+t[0];let n=e[1]+t[1];if(n>=1e9){const e=n%1e9;r+=(n-e)/1e9;n=e}return[r,n]}async function*_asyncTime(e,t){const r=t[Symbol.asyncIterator]();let n=[0,0];while(true){const t=process.hrtime();const{value:o,done:i}=await r.next();const a=process.hrtime(t);n=addTime(n,a);if(e.progress){e.progress(a,n)}if(i){if(e.total){e.total(n)}return o}yield o}}function*_syncTime(e,t){const r=t[Symbol.iterator]();let n=[0,0];while(true){const t=process.hrtime();const{value:o,done:i}=r.next();const a=process.hrtime(t);n=addTime(n,a);if(e.progress){e.progress(a,n)}if(i){if(e.total){e.total(n)}return o}yield o}}function time(e={},t){if(t===undefined){return t=>time(e,t)}if(t[Symbol.asyncIterator]!==undefined){return _asyncTime(e,t)}else{return _syncTime(e,t)}}function _transform(e,t,r){const n=getIterator(r);const o=[];const i=[];let a=false;let s=false;let l=0;let u=null;function fulfillReadQueue(){while(i.length>0&&o.length>0){const{resolve:e}=i.shift();const t=o.shift();e({done:false,value:t})}while(i.length>0&&l===0&&a){const{resolve:e,reject:t}=i.shift();if(u){t(u);u=null}else{e({done:true,value:undefined})}}}async function fillQueue(){if(a){fulfillReadQueue();return}if(s){return}if(l+o.length>=e){return}s=true;l++;try{const{done:e,value:t}=await n.next();if(e){a=true;l--;fulfillReadQueue()}else{mapAndQueue(t)}}catch(e){a=true;l--;u=e;fulfillReadQueue()}s=false;fillQueue()}async function mapAndQueue(e){try{const r=await t(e);o.push(r)}catch(e){a=true;u=e}l--;fulfillReadQueue();fillQueue()}async function next(){if(o.length===0){const e=defer();i.push(e);fillQueue();return e.promise}const e=o.shift();fillQueue();return{done:false,value:e}}const c={next:next,[Symbol.asyncIterator]:()=>c};return c}function transform(e,t,r){if(t===undefined){return(t,r)=>r?transform(e,t,r):transform(e,t)}if(r===undefined){return r=>transform(e,t,r)}return _transform(e,t,r)}async function _writeToStream(e,t){let r=null;let n=null;let o=null;const notifyError=e=>{r=e;if(n){n(e)}};const notifyDrain=()=>{if(o){o()}};const cleanup=()=>{e.removeListener("error",notifyError);e.removeListener("drain",notifyDrain)};e.once("error",notifyError);const waitForDrain=()=>new Promise(((t,i)=>{if(r){return i(r)}e.once("drain",notifyDrain);o=t;n=i}));for await(const n of t){if(e.write(n)===false){await waitForDrain()}if(r){break}}cleanup();if(r){throw r}}function writeToStream(e,t){if(t===undefined){return t=>_writeToStream(e,t)}return _writeToStream(e,t)}var g=__nccwpck_require__(2548);var _=__nccwpck_require__(7123);var w=__nccwpck_require__(7185);var v=__nccwpck_require__(7147);var S=__nccwpck_require__(3837);var R=__nccwpck_require__(8018);var C=encode;var k=128,T=127,E=~T,A=Math.pow(2,31);function encode(e,t,r){t=t||[];r=r||0;var n=r;while(e>=A){t[r++]=e&255|k;e/=128}while(e&E){t[r++]=e&255|k;e>>>=7}t[r]=e|0;encode.bytes=r-n+1;return t}var B=read;var x=128,I=127;function read(e,t){var r=0,t=t||0,n=0,o=t,i,a=e.length;do{if(o>=a){read.bytes=0;throw new RangeError("Could not decode varint")}i=e[o++];r+=n<28?(i&I)<<n:(i&I)*Math.pow(2,n);n+=7}while(i>=x);read.bytes=o-t;return r}var D=Math.pow(2,7);var O=Math.pow(2,14);var P=Math.pow(2,21);var j=Math.pow(2,28);var W=Math.pow(2,35);var U=Math.pow(2,42);var L=Math.pow(2,49);var M=Math.pow(2,56);var q=Math.pow(2,63);var varint_length=function(e){return e<D?1:e<O?2:e<P?3:e<j?4:e<W?5:e<U?6:e<L?7:e<M?8:e<q?9:10};var F={encode:C,decode:B,encodingLength:varint_length};var N=F;const z=N;const varint_decode=e=>{const t=z.decode(e);return[t,z.decode.bytes]};const encodeTo=(e,t,r=0)=>{z.encode(e,t,r);return t};const encodingLength=e=>z.encodingLength(e);const $=new Uint8Array(0);const toHex=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const fromHex=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):$};const equals=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const coerce=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const fromString=e=>(new TextEncoder).encode(e);const bytes_toString=e=>(new TextDecoder).decode(e);const create=(e,t)=>{const r=t.byteLength;const n=encodingLength(e);const o=n+encodingLength(r);const i=new Uint8Array(o+r);encodeTo(e,i,0);encodeTo(r,i,n);i.set(t,o);return new digest_Digest(e,r,t,i)};const digest_decode=e=>{const t=coerce(e);const[r,n]=varint_decode(t);const[o,i]=varint_decode(t.subarray(n));const a=t.subarray(n+i);if(a.byteLength!==o){throw new Error("Incorrect length")}return new digest_Digest(r,o,a,t)};const digest_equals=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&equals(e.bytes,t.bytes)}};class digest_Digest{constructor(e,t,r,n){this.code=e;this.size=t;this.digest=r;this.bytes=n}}function base(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var n=0;n<r.length;n++){r[n]=255}for(var o=0;o<e.length;o++){var i=e.charAt(o);var a=i.charCodeAt(0);if(r[a]!==255){throw new TypeError(i+" is ambiguous")}r[a]=o}var s=e.length;var l=e.charAt(0);var u=Math.log(s)/Math.log(256);var c=Math.log(256)/Math.log(s);function encode(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var n=0;var o=0;var i=t.length;while(o!==i&&t[o]===0){o++;r++}var a=(i-o)*c+1>>>0;var u=new Uint8Array(a);while(o!==i){var f=t[o];var d=0;for(var h=a-1;(f!==0||d<n)&&h!==-1;h--,d++){f+=256*u[h]>>>0;u[h]=f%s>>>0;f=f/s>>>0}if(f!==0){throw new Error("Non-zero carry")}n=d;o++}var p=a-n;while(p!==a&&u[p]===0){p++}var m=l.repeat(r);for(;p<a;++p){m+=e.charAt(u[p])}return m}function decodeUnsafe(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var n=0;var o=0;while(e[t]===l){n++;t++}var i=(e.length-t)*u+1>>>0;var a=new Uint8Array(i);while(e[t]){var c=r[e.charCodeAt(t)];if(c===255){return}var f=0;for(var d=i-1;(c!==0||f<o)&&d!==-1;d--,f++){c+=s*a[d]>>>0;a[d]=c%256>>>0;c=c/256>>>0}if(c!==0){throw new Error("Non-zero carry")}o=f;t++}if(e[t]===" "){return}var h=i-o;while(h!==i&&a[h]===0){h++}var p=new Uint8Array(n+(i-h));var m=n;while(h!==i){p[m++]=a[h++]}return p}function decode(e){var r=decodeUnsafe(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode}}var H=base;var V=H;const Q=V;class Encoder{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class Decoder{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const or=(e,t)=>new ComposedDecoder({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Codec{constructor(e,t,r,n){this.name=e;this.prefix=t;this.baseEncode=r;this.baseDecode=n;this.encoder=new Encoder(e,t,r);this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:e,prefix:t,encode:r,decode:n})=>new Codec(e,t,r,n);const baseX=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=Q(r,t);return from({prefix:e,name:t,encode:n,decode:e=>coerce(o(e))})};const base_decode=(e,t,r,n)=>{const o={};for(let e=0;e<t.length;++e){o[t[e]]=e}let i=e.length;while(e[i-1]==="="){--i}const a=new Uint8Array(i*r/8|0);let s=0;let l=0;let u=0;for(let t=0;t<i;++t){const i=o[e[t]];if(i===undefined){throw new SyntaxError(`Non-${n} character`)}l=l<<r|i;s+=r;if(s>=8){s-=8;a[u++]=255&l>>s}}if(s>=r||255&l<<8-s){throw new SyntaxError("Unexpected end of data")}return a};const base_encode=(e,t,r)=>{const n=t[t.length-1]==="=";const o=(1<<r)-1;let i="";let a=0;let s=0;for(let n=0;n<e.length;++n){s=s<<8|e[n];a+=8;while(a>r){a-=r;i+=t[o&s>>a]}}if(a){i+=t[o&s<<r-a]}if(n){while(i.length*r&7){i+="="}}return i};const rfc4648=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>from({prefix:t,name:e,encode(e){return base_encode(e,n,r)},decode(t){return base_decode(t,n,r,e)}});const G=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const Y=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const J=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const X=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const K=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const Z=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const ee=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const te=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const re=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const ne=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const oe=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});class cid_CID{constructor(e,t,r,n){this.code=t;this.version=e;this.multihash=r;this.bytes=n;this.byteOffset=n.byteOffset;this.byteLength=n.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:ue,byteLength:ue,code:le,version:le,multihash:le,bytes:le,_baseCache:ue,asCID:ue})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==ie){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==ae){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return cid_CID.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const r=create(e,t);return cid_CID.createV1(this.code,r)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest_equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return toStringV0(t,n,e||G.encoder);default:return toStringV1(t,n,e||J.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){deprecate(/^0\.0/,fe);return!!(e&&(e[se]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof cid_CID){return e}else if(e!=null&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:o}=e;return new cid_CID(t,r,n,o||encodeCID(t,r,n.bytes))}else if(e!=null&&e[se]===true){const{version:t,multihash:r,code:n}=e;const o=digest_decode(r);return cid_CID.create(t,n,o)}else{return null}}static create(e,t,r){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==ie){throw new Error(`Version 0 CID must use dag-pb (code: ${ie}) block encoding`)}else{return new cid_CID(e,t,r,r.bytes)}}case 1:{const n=encodeCID(e,t,r.bytes);return new cid_CID(e,t,r,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return cid_CID.create(0,ie,e)}static createV1(e,t){return cid_CID.create(1,e,t)}static decode(e){const[t,r]=cid_CID.decodeFirst(e);if(r.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=cid_CID.inspectBytes(e);const r=t.size-t.multihashSize;const n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const o=n.subarray(t.multihashSize-t.digestSize);const i=new digest_Digest(t.multihashCode,t.digestSize,o,n);const a=t.version===0?cid_CID.createV0(i):cid_CID.createV1(t.codec,i);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0;const next=()=>{const[r,n]=varint_decode(e.subarray(t));t+=n;return r};let r=next();let n=ie;if(r===18){r=0;t=0}else if(r===1){n=next()}if(r!==0&&r!==1){throw new RangeError(`Invalid CID version ${r}`)}const o=t;const i=next();const a=next();const s=t+a;const l=s-o;return{version:r,codec:n,multihashCode:i,digestSize:a,multihashSize:l,size:s}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t);const o=cid_CID.decode(n);o._baseCache.set(r,e);return o}}const parseCIDtoBytes=(e,t)=>{switch(e[0]){case"Q":{const r=t||G;return[G.prefix,r.decode(`${G.prefix}${e}`)]}case G.prefix:{const r=t||G;return[G.prefix,r.decode(e)]}case J.prefix:{const r=t||J;return[J.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const toStringV0=(e,t,r)=>{const{prefix:n}=r;if(n!==G.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const o=t.get(n);if(o==null){const o=r.encode(e).slice(1);t.set(n,o);return o}else{return o}};const toStringV1=(e,t,r)=>{const{prefix:n}=r;const o=t.get(n);if(o==null){const o=r.encode(e);t.set(n,o);return o}else{return o}};const ie=112;const ae=18;const encodeCID=(e,t,r)=>{const n=encodingLength(e);const o=n+encodingLength(t);const i=new Uint8Array(o+r.byteLength);encodeTo(e,i,0);encodeTo(t,i,n);i.set(r,o);return i};const se=Symbol.for("@ipld/js-cid/CID");const le={writable:false,configurable:false,enumerable:true};const ue={writable:false,enumerable:false,configurable:false};const ce="0.0.0-dev";const deprecate=(e,t)=>{if(e.test(ce)){console.warn(t)}else{throw new Error(t)}};const fe=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;const de=["string","number","bigint","symbol"];const he=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(e){if(e===null){return"null"}if(e===undefined){return"undefined"}if(e===true||e===false){return"boolean"}const t=typeof e;if(de.includes(t)){return t}if(t==="function"){return"Function"}if(Array.isArray(e)){return"Array"}if(isBuffer(e)){return"Buffer"}const r=getObjectType(e);if(r){return r}return"Object"}function isBuffer(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function getObjectType(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(he.includes(t)){return t}return undefined}class Type{constructor(e,t,r){this.major=e;this.majorEncoded=e<<5;this.name=t;this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",true);Type.negint=new Type(1,"negint",true);Type.bytes=new Type(2,"bytes",true);Type.string=new Type(3,"string",true);Type.array=new Type(4,"array",false);Type.map=new Type(5,"map",false);Type.tag=new Type(6,"tag",false);Type.float=new Type(7,"float",true);Type.false=new Type(7,"false",true);Type.true=new Type(7,"true",true);Type.null=new Type(7,"null",true);Type.undefined=new Type(7,"undefined",true);Type.break=new Type(7,"break",true);class Token{constructor(e,t,r){this.type=e;this.value=t;this.encodedLength=r;this.encodedBytes=undefined;this.byteValue=undefined}toString(){return`Token[${this.type}].${this.value}`}}const pe=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer==="function";const me=new TextDecoder;const ye=new TextEncoder;function byte_utils_isBuffer(e){return pe&&globalThis.Buffer.isBuffer(e)}function asU8A(e){if(!(e instanceof Uint8Array)){return Uint8Array.from(e)}return byte_utils_isBuffer(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}const be=pe?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):utf8Slice(e,t,r):(e,t,r)=>r-t>64?me.decode(e.subarray(t,r)):utf8Slice(e,t,r);const ge=pe?e=>e.length>64?globalThis.Buffer.from(e):utf8ToBytes(e):e=>e.length>64?ye.encode(e):utf8ToBytes(e);const fromArray=e=>Uint8Array.from(e);const _e=pe?(e,t,r)=>{if(byte_utils_isBuffer(e)){return new Uint8Array(e.subarray(t,r))}return e.slice(t,r)}:(e,t,r)=>e.slice(t,r);const we=pe?(e,t)=>{e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e)));return asU8A(globalThis.Buffer.concat(e,t))}:(e,t)=>{const r=new Uint8Array(t);let n=0;for(let t of e){if(n+t.length>r.length){t=t.subarray(0,r.length-n)}r.set(t,n);n+=t.length}return r};const ve=pe?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);const Se=null&&(pe?e=>{if(typeof e==="string"){return e}return globalThis.Buffer.from(toBytes(e)).toString("hex")}:e=>{if(typeof e==="string"){return e}return Array.prototype.reduce.call(toBytes(e),((e,t)=>`${e}${t.toString(16).padStart(2,"0")}`),"")});const Re=null&&(pe?e=>{if(e instanceof Uint8Array){return e}return globalThis.Buffer.from(e,"hex")}:e=>{if(e instanceof Uint8Array){return e}if(!e.length){return new Uint8Array(0)}return new Uint8Array(e.split("").map(((e,t,r)=>t%2===0?`0x${e}${r[t+1]}`:"")).filter(Boolean).map((e=>parseInt(e,16))))});function toBytes(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array"){return e}if(e instanceof ArrayBuffer){return new Uint8Array(e)}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")}function compare(e,t){if(byte_utils_isBuffer(e)&&byte_utils_isBuffer(t)){return e.compare(t)}for(let r=0;r<e.length;r++){if(e[r]===t[r]){continue}return e[r]<t[r]?-1:1}return 0}function utf8ToBytes(e,t=Infinity){let r;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!o){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)i.push(239,191,189);continue}o=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);o=r;continue}r=(o-55296<<10|r-56320)+65536}else if(o){if((t-=3)>-1)i.push(239,191,189)}o=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function utf8Slice(e,t,r){const n=[];while(t<r){const o=e[t];let i=null;let a=o>239?4:o>223?3:o>191?2:1;if(t+a<=r){let r,n,s,l;switch(a){case 1:if(o<128){i=o}break;case 2:r=e[t+1];if((r&192)===128){l=(o&31)<<6|r&63;if(l>127){i=l}}break;case 3:r=e[t+1];n=e[t+2];if((r&192)===128&&(n&192)===128){l=(o&15)<<12|(r&63)<<6|n&63;if(l>2047&&(l<55296||l>57343)){i=l}}break;case 4:r=e[t+1];n=e[t+2];s=e[t+3];if((r&192)===128&&(n&192)===128&&(s&192)===128){l=(o&15)<<18|(r&63)<<12|(n&63)<<6|s&63;if(l>65535&&l<1114112){i=l}}}}if(i===null){i=65533;a=1}else if(i>65535){i-=65536;n.push(i>>>10&1023|55296);i=56320|i&1023}n.push(i);t+=a}return decodeCodePointsArray(n)}const Ce=4096;function decodeCodePointsArray(e){const t=e.length;if(t<=Ce){return String.fromCharCode.apply(String,e)}let r="";let n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=Ce))}return r}const ke=256;class Bl{constructor(e=ke){this.chunkSize=e;this.cursor=0;this.maxCursor=-1;this.chunks=[];this._initReuseChunk=null}reset(){this.cursor=0;this.maxCursor=-1;if(this.chunks.length){this.chunks=[]}if(this._initReuseChunk!==null){this.chunks.push(this._initReuseChunk);this.maxCursor=this._initReuseChunk.length-1}}push(e){let t=this.chunks[this.chunks.length-1];const r=this.cursor+e.length;if(r<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;if(e<t.length){this.chunks[this.chunks.length-1]=t.subarray(0,e);this.maxCursor=this.cursor-1}}if(e.length<64&&e.length<this.chunkSize){t=ve(this.chunkSize);this.chunks.push(t);this.maxCursor+=t.length;if(this._initReuseChunk===null){this._initReuseChunk=t}t.set(e,0)}else{this.chunks.push(e);this.maxCursor+=e.length}}this.cursor+=e.length}toBytes(e=false){let t;if(this.chunks.length===1){const r=this.chunks[0];if(e&&this.cursor>r.length/2){t=this.cursor===r.length?r:r.subarray(0,this.cursor);this._initReuseChunk=null;this.chunks=[]}else{t=_e(r,0,this.cursor)}}else{t=we(this.chunks,this.cursor)}if(e){this.reset()}return t}}const Te="CBOR decode error:";const Ee="CBOR encode error:";const Ae=[];Ae[23]=1;Ae[24]=2;Ae[25]=3;Ae[26]=5;Ae[27]=9;function assertEnoughData(e,t,r){if(e.length-t<r){throw new Error(`${Te} not enough data for type`)}}const Be=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(e,t,r){assertEnoughData(e,t,1);const n=e[t];if(r.strict===true&&n<Be[0]){throw new Error(`${Te} integer encoded in more bytes than necessary (strict decode)`)}return n}function readUint16(e,t,r){assertEnoughData(e,t,2);const n=e[t]<<8|e[t+1];if(r.strict===true&&n<Be[1]){throw new Error(`${Te} integer encoded in more bytes than necessary (strict decode)`)}return n}function readUint32(e,t,r){assertEnoughData(e,t,4);const n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===true&&n<Be[2]){throw new Error(`${Te} integer encoded in more bytes than necessary (strict decode)`)}return n}function readUint64(e,t,r){assertEnoughData(e,t,8);const n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];const o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7];const i=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===true&&i<Be[3]){throw new Error(`${Te} integer encoded in more bytes than necessary (strict decode)`)}if(i<=Number.MAX_SAFE_INTEGER){return Number(i)}if(r.allowBigInt===true){return i}throw new Error(`${Te} integers outside of the safe integer range are not supported`)}function decodeUint8(e,t,r,n){return new Token(Type.uint,readUint8(e,t+1,n),2)}function decodeUint16(e,t,r,n){return new Token(Type.uint,readUint16(e,t+1,n),3)}function decodeUint32(e,t,r,n){return new Token(Type.uint,readUint32(e,t+1,n),5)}function decodeUint64(e,t,r,n){return new Token(Type.uint,readUint64(e,t+1,n),9)}function encodeUint(e,t){return encodeUintValue(e,0,t.value)}function encodeUintValue(e,t,r){if(r<Be[0]){const n=Number(r);e.push([t|n])}else if(r<Be[1]){const n=Number(r);e.push([t|24,n])}else if(r<Be[2]){const n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<Be[3]){const n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<Be[4]){const r=[t|27,0,0,0,0,0,0,0];let o=Number(n&BigInt(4294967295));let i=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=o&255;o=o>>8;r[7]=o&255;o=o>>8;r[6]=o&255;o=o>>8;r[5]=o&255;r[4]=i&255;i=i>>8;r[3]=i&255;i=i>>8;r[2]=i&255;i=i>>8;r[1]=i&255;e.push(r)}else{throw new Error(`${Te} encountered BigInt larger than allowable range`)}}}encodeUint.encodedSize=function encodedSize(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function encodedSize(e){if(e<Be[0]){return 1}if(e<Be[1]){return 2}if(e<Be[2]){return 3}if(e<Be[3]){return 5}return 9};encodeUint.compareTokens=function compareTokens(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function decodeNegint8(e,t,r,n){return new Token(Type.negint,-1-readUint8(e,t+1,n),2)}function decodeNegint16(e,t,r,n){return new Token(Type.negint,-1-readUint16(e,t+1,n),3)}function decodeNegint32(e,t,r,n){return new Token(Type.negint,-1-readUint32(e,t+1,n),5)}const xe=BigInt(-1);const Ie=BigInt(1);function decodeNegint64(e,t,r,n){const o=readUint64(e,t+1,n);if(typeof o!=="bigint"){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER){return new Token(Type.negint,e,9)}}if(n.allowBigInt!==true){throw new Error(`${Te} integers outside of the safe integer range are not supported`)}return new Token(Type.negint,xe-BigInt(o),9)}function encodeNegint(e,t){const r=t.value;const n=typeof r==="bigint"?r*xe-Ie:r*-1-1;encodeUintValue(e,t.type.majorEncoded,n)}encodeNegint.encodedSize=function encodedSize(e){const t=e.value;const r=typeof t==="bigint"?t*xe-Ie:t*-1-1;if(r<Be[0]){return 1}if(r<Be[1]){return 2}if(r<Be[2]){return 3}if(r<Be[3]){return 5}return 9};encodeNegint.compareTokens=function compareTokens(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function toToken(e,t,r,n){assertEnoughData(e,t,r+n);const o=_e(e,t+r,t+r+n);return new Token(Type.bytes,o,r+n)}function decodeBytesCompact(e,t,r,n){return toToken(e,t,1,r)}function decodeBytes8(e,t,r,n){return toToken(e,t,2,readUint8(e,t+1,n))}function decodeBytes16(e,t,r,n){return toToken(e,t,3,readUint16(e,t+1,n))}function decodeBytes32(e,t,r,n){return toToken(e,t,5,readUint32(e,t+1,n))}function decodeBytes64(e,t,r,n){const o=readUint64(e,t+1,n);if(typeof o==="bigint"){throw new Error(`${Te} 64-bit integer bytes lengths not supported`)}return toToken(e,t,9,o)}function tokenBytes(e){if(e.encodedBytes===undefined){e.encodedBytes=e.type===Type.string?ge(e.value):e.value}return e.encodedBytes}function encodeBytes(e,t){const r=tokenBytes(t);encodeUintValue(e,t.type.majorEncoded,r.length);e.push(r)}encodeBytes.encodedSize=function encodedSize(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length};encodeBytes.compareTokens=function compareTokens(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};function compareBytes(e,t){return e.length<t.length?-1:e.length>t.length?1:compare(e,t)}function _3string_toToken(e,t,r,n,o){const i=r+n;assertEnoughData(e,t,i);const a=new Token(Type.string,be(e,t+r,t+i),i);if(o.retainStringBytes===true){a.byteValue=_e(e,t+r,t+i)}return a}function decodeStringCompact(e,t,r,n){return _3string_toToken(e,t,1,r,n)}function decodeString8(e,t,r,n){return _3string_toToken(e,t,2,readUint8(e,t+1,n),n)}function decodeString16(e,t,r,n){return _3string_toToken(e,t,3,readUint16(e,t+1,n),n)}function decodeString32(e,t,r,n){return _3string_toToken(e,t,5,readUint32(e,t+1,n),n)}function decodeString64(e,t,r,n){const o=readUint64(e,t+1,n);if(typeof o==="bigint"){throw new Error(`${Te} 64-bit integer string lengths not supported`)}return _3string_toToken(e,t,9,o,n)}const De=encodeBytes;function _4array_toToken(e,t,r,n){return new Token(Type.array,n,r)}function decodeArrayCompact(e,t,r,n){return _4array_toToken(e,t,1,r)}function decodeArray8(e,t,r,n){return _4array_toToken(e,t,2,readUint8(e,t+1,n))}function decodeArray16(e,t,r,n){return _4array_toToken(e,t,3,readUint16(e,t+1,n))}function decodeArray32(e,t,r,n){return _4array_toToken(e,t,5,readUint32(e,t+1,n))}function decodeArray64(e,t,r,n){const o=readUint64(e,t+1,n);if(typeof o==="bigint"){throw new Error(`${Te} 64-bit integer array lengths not supported`)}return _4array_toToken(e,t,9,o)}function decodeArrayIndefinite(e,t,r,n){if(n.allowIndefinite===false){throw new Error(`${Te} indefinite length items not allowed`)}return _4array_toToken(e,t,1,Infinity)}function encodeArray(e,t){encodeUintValue(e,Type.array.majorEncoded,t.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function encodedSize(e){return encodeUintValue.encodedSize(e.value)};function _5map_toToken(e,t,r,n){return new Token(Type.map,n,r)}function decodeMapCompact(e,t,r,n){return _5map_toToken(e,t,1,r)}function decodeMap8(e,t,r,n){return _5map_toToken(e,t,2,readUint8(e,t+1,n))}function decodeMap16(e,t,r,n){return _5map_toToken(e,t,3,readUint16(e,t+1,n))}function decodeMap32(e,t,r,n){return _5map_toToken(e,t,5,readUint32(e,t+1,n))}function decodeMap64(e,t,r,n){const o=readUint64(e,t+1,n);if(typeof o==="bigint"){throw new Error(`${Te} 64-bit integer map lengths not supported`)}return _5map_toToken(e,t,9,o)}function decodeMapIndefinite(e,t,r,n){if(n.allowIndefinite===false){throw new Error(`${Te} indefinite length items not allowed`)}return _5map_toToken(e,t,1,Infinity)}function encodeMap(e,t){encodeUintValue(e,Type.map.majorEncoded,t.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function encodedSize(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(e,t,r,n){return new Token(Type.tag,r,1)}function decodeTag8(e,t,r,n){return new Token(Type.tag,readUint8(e,t+1,n),2)}function decodeTag16(e,t,r,n){return new Token(Type.tag,readUint16(e,t+1,n),3)}function decodeTag32(e,t,r,n){return new Token(Type.tag,readUint32(e,t+1,n),5)}function decodeTag64(e,t,r,n){return new Token(Type.tag,readUint64(e,t+1,n),9)}function encodeTag(e,t){encodeUintValue(e,Type.tag.majorEncoded,t.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function encodedSize(e){return encodeUintValue.encodedSize(e.value)};const Oe=20;const Pe=21;const je=22;const We=23;function decodeUndefined(e,t,r,n){if(n.allowUndefined===false){throw new Error(`${Te} undefined values are not supported`)}else if(n.coerceUndefinedToNull===true){return new Token(Type["null"],null,1)}return new Token(Type.undefined,undefined,1)}function decodeBreak(e,t,r,n){if(n.allowIndefinite===false){throw new Error(`${Te} indefinite length items not allowed`)}return new Token(Type["break"],undefined,1)}function createToken(e,t,r){if(r){if(r.allowNaN===false&&Number.isNaN(e)){throw new Error(`${Te} NaN values are not supported`)}if(r.allowInfinity===false&&(e===Infinity||e===-Infinity)){throw new Error(`${Te} Infinity values are not supported`)}}return new Token(Type.float,e,t)}function decodeFloat16(e,t,r,n){return createToken(readFloat16(e,t+1),3,n)}function decodeFloat32(e,t,r,n){return createToken(readFloat32(e,t+1),5,n)}function decodeFloat64(e,t,r,n){return createToken(readFloat64(e,t+1),9,n)}function encodeFloat(e,t,r){const n=t.value;if(n===false){e.push([Type.float.majorEncoded|Oe])}else if(n===true){e.push([Type.float.majorEncoded|Pe])}else if(n===null){e.push([Type.float.majorEncoded|je])}else if(n===undefined){e.push([Type.float.majorEncoded|We])}else{let t;let o=false;if(!r||r.float64!==true){encodeFloat16(n);t=readFloat16(Me,1);if(n===t||Number.isNaN(n)){Me[0]=249;e.push(Me.slice(0,3));o=true}else{encodeFloat32(n);t=readFloat32(Me,1);if(n===t){Me[0]=250;e.push(Me.slice(0,5));o=true}}}if(!o){encodeFloat64(n);t=readFloat64(Me,1);Me[0]=251;e.push(Me.slice(0,9))}}}encodeFloat.encodedSize=function encodedSize(e,t){const r=e.value;if(r===false||r===true||r===null||r===undefined){return 1}if(!t||t.float64!==true){encodeFloat16(r);let e=readFloat16(Me,1);if(r===e||Number.isNaN(r)){return 3}encodeFloat32(r);e=readFloat32(Me,1);if(r===e){return 5}}return 9};const Ue=new ArrayBuffer(9);const Le=new DataView(Ue,1);const Me=new Uint8Array(Ue,0);function encodeFloat16(e){if(e===Infinity){Le.setUint16(0,31744,false)}else if(e===-Infinity){Le.setUint16(0,64512,false)}else if(Number.isNaN(e)){Le.setUint16(0,32256,false)}else{Le.setFloat32(0,e);const t=Le.getUint32(0);const r=(t&2139095040)>>23;const n=t&8388607;if(r===255){Le.setUint16(0,31744,false)}else if(r===0){Le.setUint16(0,(e&2147483648)>>16|n>>13,false)}else{const e=r-127;if(e<-24){Le.setUint16(0,0)}else if(e<-14){Le.setUint16(0,(t&2147483648)>>16|1<<24+e,false)}else{Le.setUint16(0,(t&2147483648)>>16|e+15<<10|n>>13,false)}}}}function readFloat16(e,t){if(e.length-t<2){throw new Error(`${Te} not enough data for float16`)}const r=(e[t]<<8)+e[t+1];if(r===31744){return Infinity}if(r===64512){return-Infinity}if(r===32256){return NaN}const n=r>>10&31;const o=r&1023;let i;if(n===0){i=o*2**-24}else if(n!==31){i=(o+1024)*2**(n-25)}else{i=o===0?Infinity:NaN}return r&32768?-i:i}function encodeFloat32(e){Le.setFloat32(0,e,false)}function readFloat32(e,t){if(e.length-t<4){throw new Error(`${Te} not enough data for float32`)}const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,false)}function encodeFloat64(e){Le.setFloat64(0,e,false)}function readFloat64(e,t){if(e.length-t<8){throw new Error(`${Te} not enough data for float64`)}const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,false)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(e,t,r){throw new Error(`${Te} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function errorer(e){return()=>{throw new Error(`${Te} ${e}`)}}const qe=[];for(let e=0;e<=23;e++){qe[e]=invalidMinor}qe[24]=decodeUint8;qe[25]=decodeUint16;qe[26]=decodeUint32;qe[27]=decodeUint64;qe[28]=invalidMinor;qe[29]=invalidMinor;qe[30]=invalidMinor;qe[31]=invalidMinor;for(let e=32;e<=55;e++){qe[e]=invalidMinor}qe[56]=decodeNegint8;qe[57]=decodeNegint16;qe[58]=decodeNegint32;qe[59]=decodeNegint64;qe[60]=invalidMinor;qe[61]=invalidMinor;qe[62]=invalidMinor;qe[63]=invalidMinor;for(let e=64;e<=87;e++){qe[e]=decodeBytesCompact}qe[88]=decodeBytes8;qe[89]=decodeBytes16;qe[90]=decodeBytes32;qe[91]=decodeBytes64;qe[92]=invalidMinor;qe[93]=invalidMinor;qe[94]=invalidMinor;qe[95]=errorer("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++){qe[e]=decodeStringCompact}qe[120]=decodeString8;qe[121]=decodeString16;qe[122]=decodeString32;qe[123]=decodeString64;qe[124]=invalidMinor;qe[125]=invalidMinor;qe[126]=invalidMinor;qe[127]=errorer("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++){qe[e]=decodeArrayCompact}qe[152]=decodeArray8;qe[153]=decodeArray16;qe[154]=decodeArray32;qe[155]=decodeArray64;qe[156]=invalidMinor;qe[157]=invalidMinor;qe[158]=invalidMinor;qe[159]=decodeArrayIndefinite;for(let e=160;e<=183;e++){qe[e]=decodeMapCompact}qe[184]=decodeMap8;qe[185]=decodeMap16;qe[186]=decodeMap32;qe[187]=decodeMap64;qe[188]=invalidMinor;qe[189]=invalidMinor;qe[190]=invalidMinor;qe[191]=decodeMapIndefinite;for(let e=192;e<=215;e++){qe[e]=decodeTagCompact}qe[216]=decodeTag8;qe[217]=decodeTag16;qe[218]=decodeTag32;qe[219]=decodeTag64;qe[220]=invalidMinor;qe[221]=invalidMinor;qe[222]=invalidMinor;qe[223]=invalidMinor;for(let e=224;e<=243;e++){qe[e]=errorer("simple values are not supported")}qe[244]=invalidMinor;qe[245]=invalidMinor;qe[246]=invalidMinor;qe[247]=decodeUndefined;qe[248]=errorer("simple values are not supported");qe[249]=decodeFloat16;qe[250]=decodeFloat32;qe[251]=decodeFloat64;qe[252]=invalidMinor;qe[253]=invalidMinor;qe[254]=invalidMinor;qe[255]=decodeBreak;const Fe=[];for(let e=0;e<24;e++){Fe[e]=new Token(Type.uint,e,1)}for(let e=-1;e>=-24;e--){Fe[31-e]=new Token(Type.negint,e,1)}Fe[64]=new Token(Type.bytes,new Uint8Array(0),1);Fe[96]=new Token(Type.string,"",1);Fe[128]=new Token(Type.array,0,1);Fe[160]=new Token(Type.map,0,1);Fe[244]=new Token(Type["false"],false,1);Fe[245]=new Token(Type["true"],true,1);Fe[246]=new Token(Type["null"],null,1);function quickEncodeToken(e){switch(e.type){case Type["false"]:return fromArray([244]);case Type["true"]:return fromArray([245]);case Type["null"]:return fromArray([246]);case Type.bytes:if(!e.value.length){return fromArray([64])}return;case Type.string:if(e.value===""){return fromArray([96])}return;case Type.array:if(e.value===0){return fromArray([128])}return;case Type.map:if(e.value===0){return fromArray([160])}return;case Type.uint:if(e.value<24){return fromArray([Number(e.value)])}return;case Type.negint:if(e.value>=-24){return fromArray([31-Number(e.value)])}}}const Ne={float64:false,mapSorter:mapSorter,quickEncodeToken:quickEncodeToken};function makeCborEncoders(){const e=[];e[Type.uint.major]=encodeUint;e[Type.negint.major]=encodeNegint;e[Type.bytes.major]=encodeBytes;e[Type.string.major]=De;e[Type.array.major]=encodeArray;e[Type.map.major]=encodeMap;e[Type.tag.major]=encodeTag;e[Type.float.major]=encodeFloat;return e}const ze=makeCborEncoders();const $e=new Bl;class Ref{constructor(e,t){this.obj=e;this.parent=t}includes(e){let t=this;do{if(t.obj===e){return true}}while(t=t.parent);return false}static createCheck(e,t){if(e&&e.includes(t)){throw new Error(`${Ee} object contains circular references`)}return new Ref(t,e)}}const He={null:new Token(Type["null"],null),undefined:new Token(Type.undefined,undefined),true:new Token(Type["true"],true),false:new Token(Type["false"],false),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)};const Ve={number(e,t,r,n){if(!Number.isInteger(e)||!Number.isSafeInteger(e)){return new Token(Type.float,e)}else if(e>=0){return new Token(Type.uint,e)}else{return new Token(Type.negint,e)}},bigint(e,t,r,n){if(e>=BigInt(0)){return new Token(Type.uint,e)}else{return new Token(Type.negint,e)}},Uint8Array(e,t,r,n){return new Token(Type.bytes,e)},string(e,t,r,n){return new Token(Type.string,e)},boolean(e,t,r,n){return e?He.true:He.false},null(e,t,r,n){return He.null},undefined(e,t,r,n){return He.undefined},ArrayBuffer(e,t,r,n){return new Token(Type.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new Token(Type.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length){if(r.addBreakTokens===true){return[He.emptyArray,new Token(Type["break"])]}return He.emptyArray}n=Ref.createCheck(n,e);const o=[];let i=0;for(const t of e){o[i++]=objectToTokens(t,r,n)}if(r.addBreakTokens){return[new Token(Type.array,e.length),o,new Token(Type["break"])]}return[new Token(Type.array,e.length),o]},Object(e,t,r,n){const o=t!=="Object";const i=o?e.keys():Object.keys(e);const a=o?e.size:i.length;if(!a){if(r.addBreakTokens===true){return[He.emptyMap,new Token(Type["break"])]}return He.emptyMap}n=Ref.createCheck(n,e);const s=[];let l=0;for(const t of i){s[l++]=[objectToTokens(t,r,n),objectToTokens(o?e.get(t):e[t],r,n)]}sortMapEntries(s,r);if(r.addBreakTokens){return[new Token(Type.map,a),s,new Token(Type["break"])]}return[new Token(Type.map,a),s]}};Ve.Map=Ve.Object;Ve.Buffer=Ve.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" ")){Ve[`${e}Array`]=Ve.DataView}function objectToTokens(e,t={},r){const n=is(e);const o=t&&t.typeEncoders&&t.typeEncoders[n]||Ve[n];if(typeof o==="function"){const i=o(e,n,t,r);if(i!=null){return i}}const i=Ve[n];if(!i){throw new Error(`${Ee} unsupported type: ${n}`)}return i(e,n,t,r)}function sortMapEntries(e,t){if(t.mapSorter){e.sort(t.mapSorter)}}function mapSorter(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0];const n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type){return r.type.compare(n.type)}const o=r.type.major;const i=ze[o].compareTokens(r,n);if(i===0){console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone")}return i}function tokensToEncoded(e,t,r,n){if(Array.isArray(t)){for(const o of t){tokensToEncoded(e,o,r,n)}}else{r[t.type.major](e,t,n)}}function encodeCustom(e,t,r){const n=objectToTokens(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e){return e}const o=t[n.type.major];if(o.encodedSize){const e=o.encodedSize(n,r);const t=new Bl(e);o(t,n,r);if(t.chunks.length!==1){throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`)}return asU8A(t.chunks[0])}}$e.reset();tokensToEncoded($e,n,t,r);return $e.toBytes(true)}function encode_encode(e,t){t=Object.assign({},Ne,t);return encodeCustom(e,ze,t)}const Qe={strict:false,allowIndefinite:true,allowUndefined:true,allowBigInt:true};class Tokeniser{constructor(e,t={}){this.pos=0;this.data=e;this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=Fe[e];if(t===undefined){const r=qe[e];if(!r){throw new Error(`${Te} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`)}const n=e&31;t=r(this.data,this.pos,n,this.options)}this.pos+=t.encodedLength;return t}}const Ge=Symbol.for("DONE");const Ye=Symbol.for("BREAK");function tokenToArray(e,t,r){const n=[];for(let o=0;o<e.value;o++){const i=tokensToObject(t,r);if(i===Ye){if(e.value===Infinity){break}throw new Error(`${Te} got unexpected break to lengthed array`)}if(i===Ge){throw new Error(`${Te} found array but not enough entries (got ${o}, expected ${e.value})`)}n[o]=i}return n}function tokenToMap(e,t,r){const n=r.useMaps===true;const o=n?undefined:{};const i=n?new Map:undefined;for(let a=0;a<e.value;a++){const s=tokensToObject(t,r);if(s===Ye){if(e.value===Infinity){break}throw new Error(`${Te} got unexpected break to lengthed map`)}if(s===Ge){throw new Error(`${Te} found map but not enough entries (got ${a} [no key], expected ${e.value})`)}if(n!==true&&typeof s!=="string"){throw new Error(`${Te} non-string keys not supported (got ${typeof s})`)}const l=tokensToObject(t,r);if(l===Ge){throw new Error(`${Te} found map but not enough entries (got ${a} [no value], expected ${e.value})`)}if(n){i.set(s,l)}else{o[s]=l}}return n?i:o}function tokensToObject(e,t){if(e.done()){return Ge}const r=e.next();if(r.type===Type["break"]){return Ye}if(r.type.terminal){return r.value}if(r.type===Type.array){return tokenToArray(r,e,t)}if(r.type===Type.map){return tokenToMap(r,e,t)}if(r.type===Type.tag){if(t.tags&&typeof t.tags[r.value]==="function"){const n=tokensToObject(e,t);return t.tags[r.value](n)}throw new Error(`${Te} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode_decode(e,t){if(!(e instanceof Uint8Array)){throw new Error(`${Te} data to decode must be a Uint8Array`)}t=Object.assign({},Qe,t);const r=t.tokenizer||new Tokeniser(e,t);const n=tokensToObject(r,t);if(n===Ge){throw new Error(`${Te} did not find any content to decode`)}if(n===Ye){throw new Error(`${Te} got unexpected break`)}if(!r.done()){throw new Error(`${Te} too many terminals, data makes no sense`)}return n}const Je=42;function cidEncoder(e){if(e.asCID!==e){return null}const t=cid_CID.asCID(e);if(!t){return null}const r=new Uint8Array(t.bytes.byteLength+1);r.set(t.bytes,1);return[new Token(Type.tag,Je),new Token(Type.bytes,r)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(e){if(Number.isNaN(e)){throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded")}if(e===Infinity||e===-Infinity){throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded")}return null}const Xe={float64:true,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(e){if(e[0]!==0){throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00")}return cid_CID.decode(e.subarray(1))}const Ke={allowIndefinite:false,coerceUndefinedToNull:true,allowNaN:false,allowInfinity:false,allowBigInt:true,strict:true,useMaps:false,tags:[]};Ke.tags[Je]=cidDecoder;const Ze="dag-cbor";const et=113;const esm_encode=e=>encode_encode(e,Xe);const esm_decode=e=>decode_decode(e,Ke);const tt={SHA2_256:18,LENGTH:32,DAG_PB:112};async function readVarint(e){const t=await e.upTo(8);const r=R.decode(t);e.seek(R.decode.bytes);return r}async function readHeader(e){const t=await readVarint(e);if(t===0){throw new Error("Invalid CAR header (zero length)")}const r=await e.exactly(t);e.seek(t);const n=esm_decode(r);if(n==null||Array.isArray(n)||typeof n!=="object"){throw new Error("Invalid CAR header format")}if(n.version!==1){if(typeof n.version==="string"){throw new Error(`Invalid CAR version: "${n.version}"`)}throw new Error(`Invalid CAR version: ${n.version}`)}if(!Array.isArray(n.roots)){throw new Error("Invalid CAR header format")}if(Object.keys(n).filter((e=>e!=="roots"&&e!=="version")).length){throw new Error("Invalid CAR header format")}return n}async function readMultihash(e){const t=await e.upTo(8);R.decode(t);const r=R.decode.bytes;const n=R.decode(t.subarray(R.decode.bytes));const o=R.decode.bytes;const i=r+o+n;const a=await e.exactly(i);e.seek(i);return a}async function readCid(e){const t=await e.exactly(2);if(t[0]===tt.SHA2_256&&t[1]===tt.LENGTH){const t=await e.exactly(34);e.seek(34);const r=digest_decode(t);return cid_CID.create(0,tt.DAG_PB,r)}const r=await readVarint(e);if(r!==1){throw new Error(`Unexpected CID version (${r})`)}const n=await readVarint(e);const o=await readMultihash(e);const i=digest_decode(o);return cid_CID.create(r,n,i)}async function readBlockHead(e){const t=e.pos;let r=await readVarint(e);if(r===0){throw new Error("Invalid CAR section (zero length)")}r+=e.pos-t;const n=await readCid(e);const o=r-(e.pos-t);return{cid:n,length:r,blockLength:o}}async function readBlock(e){const{cid:t,blockLength:r}=await readBlockHead(e);const n=await e.exactly(r);e.seek(r);return{bytes:n,cid:t}}async function readBlockIndex(e){const t=e.pos;const{cid:r,length:n,blockLength:o}=await readBlockHead(e);const i={cid:r,length:n,blockLength:o,offset:t,blockOffset:e.pos};e.seek(i.blockLength);return i}function decoder_createDecoder(e){const t=readHeader(e);return{header:()=>t,async*blocks(){await t;while((await e.upTo(8)).length>0){yield await readBlock(e)}},async*blocksIndex(){await t;while((await e.upTo(8)).length>0){yield await readBlockIndex(e)}}}}function decoder_bytesReader(e){let t=0;return{async upTo(r){return e.subarray(t,t+Math.min(r,e.length-t))},async exactly(r){if(r>e.length-t){throw new Error("Unexpected end of data")}return e.subarray(t,t+r)},seek(e){t+=e},get pos(){return t}}}function chunkReader(e){let t=0;let r=0;let n=0;let o=new Uint8Array(0);const read=async t=>{r=o.length-n;const i=[o.subarray(n)];while(r<t){const t=await e();if(t==null){break}if(r<0){if(t.length>r){i.push(t.subarray(-r))}}else{i.push(t)}r+=t.length}o=new Uint8Array(i.reduce(((e,t)=>e+t.length),0));let a=0;for(const e of i){o.set(e,a);a+=e.length}n=0};return{async upTo(e){if(o.length-n<e){await read(e)}return o.subarray(n,n+Math.min(o.length-n,e))},async exactly(e){if(o.length-n<e){await read(e)}if(o.length-n<e){throw new Error("Unexpected end of data")}return o.subarray(n,n+e)},seek(e){t+=e;n+=e},get pos(){return t}}}function decoder_asyncIterableReader(e){const t=e[Symbol.asyncIterator]();async function readChunk(){const e=await t.next();if(e.done){return null}return e.value}return chunkReader(readChunk)}class reader_browser_CarReader{constructor(e,t,r){this._version=e;this._roots=t;this._blocks=r;this._keys=r.map((e=>e.cid.toString()))}get version(){return this._version}async getRoots(){return this._roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){const t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:undefined}async*blocks(){for(const e of this._blocks){yield e}}async*cids(){for(const e of this._blocks){yield e.cid}}static async fromBytes(e){if(!(e instanceof Uint8Array)){throw new TypeError("fromBytes() requires a Uint8Array")}return decodeReaderComplete(decoder_bytesReader(e))}static async fromIterable(e){if(!e||!(typeof e[Symbol.asyncIterator]==="function")){throw new TypeError("fromIterable() requires an async iterable")}return decodeReaderComplete(decoder_asyncIterableReader(e))}}async function decodeReaderComplete(e){const t=decoder_createDecoder(e);const{version:r,roots:n}=await t.header();const o=[];for await(const e of t.blocks()){o.push(e)}return new reader_browser_CarReader(r,n,o)}const rt=true;const nt=(0,S.promisify)(v.read);class CarReader extends reader_browser_CarReader{static async readRaw(e,t){const{cid:r,blockLength:n,blockOffset:o}=t;const i=new Uint8Array(n);let a;if(typeof e==="number"){a=(await nt(e,i,0,n,o)).bytesRead}else if(typeof e==="object"&&typeof e.read==="function"){a=(await e.read(i,0,n,o)).bytesRead}else{throw new TypeError("Bad fd")}if(a!==n){throw new Error(`Failed to read entire block (${a} instead of ${n})`)}return{cid:r,bytes:i}}}const ot=false;class indexer_CarIndexer{constructor(e,t,r){this._version=e;this._roots=t;this._iterator=r}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(e){if(!(e instanceof Uint8Array)){throw new TypeError("fromBytes() requires a Uint8Array")}return decodeIndexerComplete(bytesReader(e))}static async fromIterable(e){if(!e||!(typeof e[Symbol.asyncIterator]==="function")){throw new TypeError("fromIterable() requires an async iterable")}return decodeIndexerComplete(asyncIterableReader(e))}}async function decodeIndexerComplete(e){const t=createDecoder(e);const{version:r,roots:n}=await t.header();return new indexer_CarIndexer(r,n,t.blocksIndex())}class CarIteratorBase{constructor(e,t,r){this._version=e;this._roots=t;this._iterable=r;this._decoded=false}get version(){return this._version}async getRoots(){return this._roots}}class CarBlockIterator extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded){throw new Error("Cannot decode more than once")}if(!this._iterable){throw new Error("Block iterable not found")}this._decoded=true;return this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:r,iterator:n}=await fromBytes(e);return new CarBlockIterator(t,r,n)}static async fromIterable(e){const{version:t,roots:r,iterator:n}=await fromIterable(e);return new CarBlockIterator(t,r,n)}}class CarCIDIterator extends(null&&CarIteratorBase){[Symbol.asyncIterator](){if(this._decoded){throw new Error("Cannot decode more than once")}if(!this._iterable){throw new Error("Block iterable not found")}this._decoded=true;const e=this._iterable[Symbol.asyncIterator]();return{async next(){const t=await e.next();if(t.done){return t}return{done:false,value:t.value.cid}}}}static async fromBytes(e){const{version:t,roots:r,iterator:n}=await fromBytes(e);return new CarCIDIterator(t,r,n)}static async fromIterable(e){const{version:t,roots:r,iterator:n}=await fromIterable(e);return new CarCIDIterator(t,r,n)}}async function fromBytes(e){if(!(e instanceof Uint8Array)){throw new TypeError("fromBytes() requires a Uint8Array")}return decodeIterator(decoder_bytesReader(e))}async function fromIterable(e){if(!e||!(typeof e[Symbol.asyncIterator]==="function")){throw new TypeError("fromIterable() requires an async iterable")}return decodeIterator(decoder_asyncIterableReader(e))}async function decodeIterator(e){const t=decoder_createDecoder(e);const{version:r,roots:n}=await t.header();return{version:r,roots:n,iterator:t.blocks()}}function createHeader(e){const t=esm_encode({version:1,roots:e});const r=R.encode(t.length);const n=new Uint8Array(r.length+t.length);n.set(r,0);n.set(t,r.length);return n}function createEncoder(e){return{async setRoots(t){const r=createHeader(t);await e.write(r)},async writeBlock(t){const{cid:r,bytes:n}=t;await e.write(new Uint8Array(R.encode(r.bytes.length+n.length)));await e.write(r.bytes);if(n.length){await e.write(n)}},async close(){return e.end()}}}function noop(){}function iterator_channel_create(){const e=[];let t=null;let r=noop;let n=false;let o=null;let i=noop;const makeDrainer=()=>{if(!t){t=new Promise((e=>{r=()=>{t=null;r=noop;e()}}))}return t};const a={write(t){e.push(t);const r=makeDrainer();i();return r},async end(){n=true;const e=makeDrainer();i();return e}};const s={async next(){const t=e.shift();if(t){if(e.length===0){r()}return{done:false,value:t}}if(n){r();return{done:true,value:undefined}}if(!o){o=new Promise((e=>{i=()=>{o=null;i=noop;return e(s.next())}}))}return o}};return{writer:a,iterator:s}}class writer_browser_CarWriter{constructor(e,t){this._encoder=t;this._mutex=t.setRoots(e);this._ended=false}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid){throw new TypeError("Can only write {cid, bytes} objects")}if(this._ended){throw new Error("Already closed")}const t=cid_CID.asCID(e.cid);if(!t){throw new TypeError("Can only write {cid, bytes} objects")}this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})));return this._mutex}async close(){if(this._ended){throw new Error("Already closed")}await this._mutex;this._ended=true;return this._encoder.close()}static create(e){e=toRoots(e);const{encoder:t,iterator:r}=encodeWriter();const n=new writer_browser_CarWriter(e,t);const o=new CarWriterOut(r);return{writer:n,out:o}}static createAppender(){const{encoder:e,iterator:t}=encodeWriter();e.setRoots=()=>Promise.resolve();const r=new writer_browser_CarWriter([],e);const n=new CarWriterOut(t);return{writer:r,out:n}}static async updateRootsInBytes(e,t){const r=decoder_bytesReader(e);await readHeader(r);const n=createHeader(t);if(r.pos!==n.length){throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`)}e.set(n,0);return e}}class CarWriterOut{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating){throw new Error("Multiple iterator not supported")}this._iterating=true;return this._iterator}}function encodeWriter(){const e=iterator_channel_create();const{writer:t,iterator:r}=e;const n=createEncoder(t);return{encoder:n,iterator:r}}function toRoots(e){if(e===undefined){return[]}if(!Array.isArray(e)){const t=cid_CID.asCID(e);if(!t){throw new TypeError("roots must be a single CID or an array of CIDs")}return[t]}const t=[];for(const r of e){const e=cid_CID.asCID(r);if(!e){throw new TypeError("roots must be a single CID or an array of CIDs")}t.push(e)}return t}const it=true;const at=(0,S.promisify)(v.read);const st=(0,S.promisify)(v.write);class writer_CarWriter extends writer_browser_CarWriter{static async updateRootsInFile(e,t){const r=256;let n;let o=0;let i;if(typeof e==="number"){i=async()=>(await at(e,n,0,r,o)).bytesRead}else if(typeof e==="object"&&typeof e.read==="function"){i=async()=>(await e.read(n,0,r,o)).bytesRead}else{throw new TypeError("Bad fd")}const a=chunkReader((async()=>{n=new Uint8Array(r);const e=await i();o+=e;return e<r?n.subarray(0,e):n}));await readHeader(a);const s=createHeader(t);if(a.pos!==s.length){throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${a.pos} bytes, new header is ${s.length} bytes)`)}if(typeof e==="number"){await st(e,s,0,s.length,0)}else if(typeof e==="object"&&typeof e.read==="function"){await e.write(s,0,s.length,0)}}}const lt=false;var ut=__nccwpck_require__(2781);class CarIndexedReader{constructor(e,t,r,n,o){this._version=e;this._path=t;this._roots=r;this._index=n;this._order=o;this._fd=null}get version(){return this._version}async getRoots(){return this._roots}async has(e){return this._index.has(e.toString())}async get(e){const t=this._index.get(e.toString());if(!t){return undefined}if(!this._fd){this._fd=await fs.promises.open(this._path,"r")}const r={cid:e,length:0,offset:0,blockLength:t.blockLength,blockOffset:t.blockOffset};return NodeCarReader.readRaw(this._fd,r)}async*blocks(){for(const e of this._order){const t=await this.get(CID.parse(e));if(!t){throw new Error("Unexpected internal error")}yield t}}async*cids(){for(const e of this._order){yield CID.parse(e)}}async close(){if(this._fd){return this._fd.close()}}static async fromFile(e){if(typeof e!=="string"){throw new TypeError("fromFile() requires a file path string")}const t=await CarIndexer.fromIterable(Readable.from(fs.createReadStream(e)));const r=new Map;const n=[];for await(const{cid:e,blockLength:o,blockOffset:i}of t){const t=e.toString();r.set(t,{blockLength:o,blockOffset:i});n.push(t)}return new CarIndexedReader(t.version,e,await t.getRoots(),r,n)}}const ct=false;var ft=__nccwpck_require__(6615);var dt=__nccwpck_require__(2555);const ht=dt;var pt=__nccwpck_require__(6113);const hasher_from=({name:e,code:t,encode:r})=>new Hasher(e,t,r);class Hasher{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create(this.code,t):t.then((e=>create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}const mt=hasher_from({name:"sha2-256",code:18,encode:e=>coerce(pt.createHash("sha256").update(e).digest())});const yt=hasher_from({name:"sha2-512",code:19,encode:e=>coerce(pt.createHash("sha512").update(e).digest())});var bt=__nccwpck_require__(7214);function fromNumberTo32BitBuf(e){const t=new Array(4);for(let r=0;r<4;r++){t[r]=e&255;e=e>>8}return new Uint8Array(t)}const gt=hasher_from({name:"murmur3-32",code:35,encode:e=>fromNumberTo32BitBuf(bt.x86.hash32(e))});const _t=hasher_from({name:"murmur3-128",code:34,encode:e=>fromHex(bt.x64.hash128(e))});async function hamtHashFn(e){return(await _t.encode(e)).slice(0,8).reverse()}const wt={chunker:"fixed",strategy:"balanced",rawLeaves:false,onlyHash:false,reduceSingleLeafToSelf:true,hasher:mt,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:false,recursive:false,hidden:false,timeout:undefined,hamtHashFn:hamtHashFn,hamtHashCode:34,hamtBucketBits:8};const src_options=(e={})=>{const t=ht.bind({ignoreUndefined:true});return t(wt,e)};var vt=__nccwpck_require__(2997);var St=__nccwpck_require__(6916);const Rt=St.Reader,Ct=St.Writer,kt=St.util;const Tt=St.roots["ipfs-unixfs"]||(St.roots["ipfs-unixfs"]={});const Et=Tt.Data=(()=>{function Data(e){this.blocksizes=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}Data.prototype.Type=0;Data.prototype.Data=kt.newBuffer([]);Data.prototype.filesize=kt.Long?kt.Long.fromBits(0,0,true):0;Data.prototype.blocksizes=kt.emptyArray;Data.prototype.hashType=kt.Long?kt.Long.fromBits(0,0,true):0;Data.prototype.fanout=kt.Long?kt.Long.fromBits(0,0,true):0;Data.prototype.mode=0;Data.prototype.mtime=null;Data.encode=function encode(e,t){if(!t)t=Ct.create();t.uint32(8).int32(e.Type);if(e.Data!=null&&Object.hasOwnProperty.call(e,"Data"))t.uint32(18).bytes(e.Data);if(e.filesize!=null&&Object.hasOwnProperty.call(e,"filesize"))t.uint32(24).uint64(e.filesize);if(e.blocksizes!=null&&e.blocksizes.length){for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r])}if(e.hashType!=null&&Object.hasOwnProperty.call(e,"hashType"))t.uint32(40).uint64(e.hashType);if(e.fanout!=null&&Object.hasOwnProperty.call(e,"fanout"))t.uint32(48).uint64(e.fanout);if(e.mode!=null&&Object.hasOwnProperty.call(e,"mode"))t.uint32(56).uint32(e.mode);if(e.mtime!=null&&Object.hasOwnProperty.call(e,"mtime"))Tt.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim();return t};Data.decode=function decode(e,t){if(!(e instanceof Rt))e=Rt.create(e);var r=t===undefined?e.len:e.pos+t,n=new Tt.Data;while(e.pos<r){var o=e.uint32();switch(o>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(!(n.blocksizes&&n.blocksizes.length))n.blocksizes=[];if((o&7)===2){var i=e.uint32()+e.pos;while(e.pos<i)n.blocksizes.push(e.uint64())}else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=Tt.UnixTime.decode(e,e.uint32());break;default:e.skipType(o&7);break}}if(!n.hasOwnProperty("Type"))throw kt.ProtocolError("missing required 'Type'",{instance:n});return n};Data.fromObject=function fromObject(e){if(e instanceof Tt.Data)return e;var t=new Tt.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5;break}if(e.Data!=null){if(typeof e.Data==="string")kt.base64.decode(e.Data,t.Data=kt.newBuffer(kt.base64.length(e.Data)),0);else if(e.Data.length)t.Data=e.Data}if(e.filesize!=null){if(kt.Long)(t.filesize=kt.Long.fromValue(e.filesize)).unsigned=true;else if(typeof e.filesize==="string")t.filesize=parseInt(e.filesize,10);else if(typeof e.filesize==="number")t.filesize=e.filesize;else if(typeof e.filesize==="object")t.filesize=new kt.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(true)}if(e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r){if(kt.Long)(t.blocksizes[r]=kt.Long.fromValue(e.blocksizes[r])).unsigned=true;else if(typeof e.blocksizes[r]==="string")t.blocksizes[r]=parseInt(e.blocksizes[r],10);else if(typeof e.blocksizes[r]==="number")t.blocksizes[r]=e.blocksizes[r];else if(typeof e.blocksizes[r]==="object")t.blocksizes[r]=new kt.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(true)}}if(e.hashType!=null){if(kt.Long)(t.hashType=kt.Long.fromValue(e.hashType)).unsigned=true;else if(typeof e.hashType==="string")t.hashType=parseInt(e.hashType,10);else if(typeof e.hashType==="number")t.hashType=e.hashType;else if(typeof e.hashType==="object")t.hashType=new kt.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(true)}if(e.fanout!=null){if(kt.Long)(t.fanout=kt.Long.fromValue(e.fanout)).unsigned=true;else if(typeof e.fanout==="string")t.fanout=parseInt(e.fanout,10);else if(typeof e.fanout==="number")t.fanout=e.fanout;else if(typeof e.fanout==="object")t.fanout=new kt.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(true)}if(e.mode!=null){t.mode=e.mode>>>0}if(e.mtime!=null){if(typeof e.mtime!=="object")throw TypeError(".Data.mtime: object expected");t.mtime=Tt.UnixTime.fromObject(e.mtime)}return t};Data.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.arrays||t.defaults){r.blocksizes=[]}if(t.defaults){r.Type=t.enums===String?"Raw":0;if(t.bytes===String)r.Data="";else{r.Data=[];if(t.bytes!==Array)r.Data=kt.newBuffer(r.Data)}if(kt.Long){var n=new kt.Long(0,0,true);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(kt.Long){var n=new kt.Long(0,0,true);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(kt.Long){var n=new kt.Long(0,0,true);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0;r.mtime=null}if(e.Type!=null&&e.hasOwnProperty("Type")){r.Type=t.enums===String?Tt.Data.DataType[e.Type]:e.Type}if(e.Data!=null&&e.hasOwnProperty("Data")){r.Data=t.bytes===String?kt.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data}if(e.filesize!=null&&e.hasOwnProperty("filesize")){if(typeof e.filesize==="number")r.filesize=t.longs===String?String(e.filesize):e.filesize;else r.filesize=t.longs===String?kt.Long.prototype.toString.call(e.filesize):t.longs===Number?new kt.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(true):e.filesize}if(e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var o=0;o<e.blocksizes.length;++o){if(typeof e.blocksizes[o]==="number")r.blocksizes[o]=t.longs===String?String(e.blocksizes[o]):e.blocksizes[o];else r.blocksizes[o]=t.longs===String?kt.Long.prototype.toString.call(e.blocksizes[o]):t.longs===Number?new kt.LongBits(e.blocksizes[o].low>>>0,e.blocksizes[o].high>>>0).toNumber(true):e.blocksizes[o]}}if(e.hashType!=null&&e.hasOwnProperty("hashType")){if(typeof e.hashType==="number")r.hashType=t.longs===String?String(e.hashType):e.hashType;else r.hashType=t.longs===String?kt.Long.prototype.toString.call(e.hashType):t.longs===Number?new kt.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(true):e.hashType}if(e.fanout!=null&&e.hasOwnProperty("fanout")){if(typeof e.fanout==="number")r.fanout=t.longs===String?String(e.fanout):e.fanout;else r.fanout=t.longs===String?kt.Long.prototype.toString.call(e.fanout):t.longs===Number?new kt.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(true):e.fanout}if(e.mode!=null&&e.hasOwnProperty("mode")){r.mode=e.mode}if(e.mtime!=null&&e.hasOwnProperty("mtime")){r.mtime=Tt.UnixTime.toObject(e.mtime,t)}return r};Data.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,St.util.toJSONOptions)};Data.DataType=function(){const e={},t=Object.create(e);t[e[0]="Raw"]=0;t[e[1]="Directory"]=1;t[e[2]="File"]=2;t[e[3]="Metadata"]=3;t[e[4]="Symlink"]=4;t[e[5]="HAMTShard"]=5;return t}();return Data})();const At=Tt.UnixTime=(()=>{function UnixTime(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}UnixTime.prototype.Seconds=kt.Long?kt.Long.fromBits(0,0,false):0;UnixTime.prototype.FractionalNanoseconds=0;UnixTime.encode=function encode(e,t){if(!t)t=Ct.create();t.uint32(8).int64(e.Seconds);if(e.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(e,"FractionalNanoseconds"))t.uint32(21).fixed32(e.FractionalNanoseconds);return t};UnixTime.decode=function decode(e,t){if(!(e instanceof Rt))e=Rt.create(e);var r=t===undefined?e.len:e.pos+t,n=new Tt.UnixTime;while(e.pos<r){var o=e.uint32();switch(o>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(o&7);break}}if(!n.hasOwnProperty("Seconds"))throw kt.ProtocolError("missing required 'Seconds'",{instance:n});return n};UnixTime.fromObject=function fromObject(e){if(e instanceof Tt.UnixTime)return e;var t=new Tt.UnixTime;if(e.Seconds!=null){if(kt.Long)(t.Seconds=kt.Long.fromValue(e.Seconds)).unsigned=false;else if(typeof e.Seconds==="string")t.Seconds=parseInt(e.Seconds,10);else if(typeof e.Seconds==="number")t.Seconds=e.Seconds;else if(typeof e.Seconds==="object")t.Seconds=new kt.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber()}if(e.FractionalNanoseconds!=null){t.FractionalNanoseconds=e.FractionalNanoseconds>>>0}return t};UnixTime.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){if(kt.Long){var n=new kt.Long(0,0,false);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}if(e.Seconds!=null&&e.hasOwnProperty("Seconds")){if(typeof e.Seconds==="number")r.Seconds=t.longs===String?String(e.Seconds):e.Seconds;else r.Seconds=t.longs===String?kt.Long.prototype.toString.call(e.Seconds):t.longs===Number?new kt.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds}if(e.FractionalNanoseconds!=null&&e.hasOwnProperty("FractionalNanoseconds")){r.FractionalNanoseconds=e.FractionalNanoseconds}return r};UnixTime.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,St.util.toJSONOptions)};return UnixTime})();const Bt=Tt.Metadata=(()=>{function Metadata(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}Metadata.prototype.MimeType="";Metadata.encode=function encode(e,t){if(!t)t=Ct.create();if(e.MimeType!=null&&Object.hasOwnProperty.call(e,"MimeType"))t.uint32(10).string(e.MimeType);return t};Metadata.decode=function decode(e,t){if(!(e instanceof Rt))e=Rt.create(e);var r=t===undefined?e.len:e.pos+t,n=new Tt.Metadata;while(e.pos<r){var o=e.uint32();switch(o>>>3){case 1:n.MimeType=e.string();break;default:e.skipType(o&7);break}}return n};Metadata.fromObject=function fromObject(e){if(e instanceof Tt.Metadata)return e;var t=new Tt.Metadata;if(e.MimeType!=null){t.MimeType=String(e.MimeType)}return t};Metadata.toObject=function toObject(e,t){if(!t)t={};var r={};if(t.defaults){r.MimeType=""}if(e.MimeType!=null&&e.hasOwnProperty("MimeType")){r.MimeType=e.MimeType}return r};Metadata.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,St.util.toJSONOptions)};return Metadata})();const xt=Et;const It=["raw","directory","file","metadata","symlink","hamt-sharded-directory"];const Dt=["directory","hamt-sharded-directory"];const Ot=parseInt("0644",8);const Pt=parseInt("0755",8);function parseMode(e){if(e==null){return undefined}if(typeof e==="number"){return e&4095}e=e.toString();if(e.substring(0,1)==="0"){return parseInt(e,8)&4095}return parseInt(e,10)&4095}function parseMtime(e){if(e==null){return undefined}let t;if(e.secs!=null){t={secs:e.secs,nsecs:e.nsecs}}if(e.Seconds!=null){t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}}if(Array.isArray(e)){t={secs:e[0],nsecs:e[1]}}if(e instanceof Date){const r=e.getTime();const n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(!Object.prototype.hasOwnProperty.call(t,"secs")){return undefined}if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999)){throw vt(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS")}return t}class UnixFS{static unmarshal(e){const t=xt.decode(e);const r=xt.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const n=new UnixFS({type:It[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:undefined});n._originalMode=r.mode||0;return n}constructor(e={type:"file"}){const{type:t,data:r,blockSizes:n,hashType:o,fanout:i,mtime:a,mode:s}=e;if(t&&!It.includes(t)){throw vt(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}this.type=t||"file";this.data=r;this.hashType=o;this.fanout=i;this.blockSizes=n||[];this._originalMode=0;this.mode=parseMode(s);if(a){this.mtime=parseMtime(a);if(this.mtime&&!this.mtime.nsecs){this.mtime.nsecs=0}}}set mode(e){this._mode=this.isDirectory()?Pt:Ot;const t=parseMode(e);if(t!==undefined){this._mode=t}}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Dt.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory()){return 0}let e=0;this.blockSizes.forEach((t=>{e+=t}));if(this.data){e+=this.data.length}return e}marshal(){let e;switch(this.type){case"raw":e=xt.DataType.Raw;break;case"directory":e=xt.DataType.Directory;break;case"file":e=xt.DataType.File;break;case"metadata":e=xt.DataType.Metadata;break;case"symlink":e=xt.DataType.Symlink;break;case"hamt-sharded-directory":e=xt.DataType.HAMTShard;break;default:throw vt(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;if(!this.data||!this.data.length){t=undefined}let r;if(this.mode!=null){r=this._originalMode&4294963200|(parseMode(this.mode)||0);if(r===Ot&&!this.isDirectory()){r=undefined}if(r===Pt&&this.isDirectory()){r=undefined}}let n;if(this.mtime!=null){const e=parseMtime(this.mtime);if(e){n={Seconds:e.secs,FractionalNanoseconds:e.nsecs};if(n.FractionalNanoseconds===0){delete n.FractionalNanoseconds}}}const o={Type:e,Data:t,filesize:this.isDirectory()?undefined:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:r,mtime:n};return xt.encode(o).finish()}}const jt=new TextDecoder;function decodeVarint(e,t){let r=0;for(let n=0;;n+=7){if(n>=64){throw new Error("protobuf: varint overflow")}if(t>=e.length){throw new Error("protobuf: unexpected end of data")}const o=e[t++];r+=n<28?(o&127)<<n:(o&127)*2**n;if(o<128){break}}return[r,t]}function decodeBytes(e,t){let r;[r,t]=decodeVarint(e,t);const n=t+r;if(r<0||n<0){throw new Error("protobuf: invalid length")}if(n>e.length){throw new Error("protobuf: unexpected end of data")}return[e.subarray(t,n),n]}function decodeKey(e,t){let r;[r,t]=decodeVarint(e,t);return[r&7,r>>3,t]}function decodeLink(e){const t={};const r=e.length;let n=0;while(n<r){let r,o;[r,o,n]=decodeKey(e,n);if(o===1){if(t.Hash){throw new Error("protobuf: (PBLink) duplicate Hash section")}if(r!==2){throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`)}if(t.Name!==undefined){throw new Error("protobuf: (PBLink) invalid order, found Name before Hash")}if(t.Tsize!==undefined){throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash")}[t.Hash,n]=decodeBytes(e,n)}else if(o===2){if(t.Name!==undefined){throw new Error("protobuf: (PBLink) duplicate Name section")}if(r!==2){throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`)}if(t.Tsize!==undefined){throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name")}let o;[o,n]=decodeBytes(e,n);t.Name=jt.decode(o)}else if(o===3){if(t.Tsize!==undefined){throw new Error("protobuf: (PBLink) duplicate Tsize section")}if(r!==0){throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`)}[t.Tsize,n]=decodeVarint(e,n)}else{throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}}if(n>r){throw new Error("protobuf: (PBLink) unexpected end of data")}return t}function decodeNode(e){const t=e.length;let r=0;let n;let o=false;let i;while(r<t){let t,a;[t,a,r]=decodeKey(e,r);if(t!==2){throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`)}if(a===1){if(i){throw new Error("protobuf: (PBNode) duplicate Data section")}[i,r]=decodeBytes(e,r);if(n){o=true}}else if(a===2){if(o){throw new Error("protobuf: (PBNode) duplicate Links section")}else if(!n){n=[]}let t;[t,r]=decodeBytes(e,r);n.push(decodeLink(t))}else{throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`)}}if(r>t){throw new Error("protobuf: (PBNode) unexpected end of data")}const a={};if(i){a.Data=i}a.Links=n||[];return a}const Wt=new TextEncoder;const Ut=2**32;const Lt=2**31;function encodeLink(e,t){let r=t.length;if(typeof e.Tsize==="number"){if(e.Tsize<0){throw new Error("Tsize cannot be negative")}if(!Number.isSafeInteger(e.Tsize)){throw new Error("Tsize too large for encoding")}r=encodeVarint(t,r,e.Tsize)-1;t[r]=24}if(typeof e.Name==="string"){const n=Wt.encode(e.Name);r-=n.length;t.set(n,r);r=encodeVarint(t,r,n.length)-1;t[r]=18}if(e.Hash){r-=e.Hash.length;t.set(e.Hash,r);r=encodeVarint(t,r,e.Hash.length)-1;t[r]=10}return t.length-r}function encodeNode(e){const t=sizeNode(e);const r=new Uint8Array(t);let n=t;if(e.Data){n-=e.Data.length;r.set(e.Data,n);n=encodeVarint(r,n,e.Data.length)-1;r[n]=10}if(e.Links){for(let t=e.Links.length-1;t>=0;t--){const o=encodeLink(e.Links[t],r.subarray(0,n));n-=o;n=encodeVarint(r,n,o)-1;r[n]=18}}return r}function sizeLink(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+sov(r)}if(typeof e.Name==="string"){const r=Wt.encode(e.Name).length;t+=1+r+sov(r)}if(typeof e.Tsize==="number"){t+=1+sov(e.Tsize)}return t}function sizeNode(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+sov(r)}if(e.Links){for(const r of e.Links){const e=sizeLink(r);t+=1+e+sov(e)}}return t}function encodeVarint(e,t,r){t-=sov(r);const n=t;while(r>=Lt){e[t++]=r&127|128;r/=128}while(r>=128){e[t++]=r&127|128;r>>>=7}e[t]=r;return n}function sov(e){if(e%2===0){e++}return Math.floor((len64(e)+6)/7)}function len64(e){let t=0;if(e>=Ut){e=Math.floor(e/Ut);t=32}if(e>=1<<16){e>>>=16;t+=16}if(e>=1<<8){e>>>=8;t+=8}return t+Mt[e]}const Mt=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];const qt=["Data","Links"];const Ft=["Hash","Name","Tsize"];const Nt=new TextEncoder;function linkComparator(e,t){if(e===t){return 0}const r=e.Name?Nt.encode(e.Name):[];const n=t.Name?Nt.encode(t.Name):[];let o=r.length;let i=n.length;for(let e=0,t=Math.min(o,i);e<t;++e){if(r[e]!==n[e]){o=r[e];i=n[e];break}}return o<i?-1:i<o?1:0}function hasOnlyProperties(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function asLink(e){if(typeof e.asCID==="object"){const t=cid_CID.asCID(e);if(!t){throw new TypeError("Invalid DAG-PB form")}return{Hash:t}}if(typeof e!=="object"||Array.isArray(e)){throw new TypeError("Invalid DAG-PB form")}const t={};if(e.Hash){let r=cid_CID.asCID(e.Hash);try{if(!r){if(typeof e.Hash==="string"){r=cid_CID.parse(e.Hash)}else if(e.Hash instanceof Uint8Array){r=cid_CID.decode(e.Hash)}}}catch(e){throw new TypeError(`Invalid DAG-PB form: ${e.message}`)}if(r){t.Hash=r}}if(!t.Hash){throw new TypeError("Invalid DAG-PB form")}if(typeof e.Name==="string"){t.Name=e.Name}if(typeof e.Tsize==="number"){t.Tsize=e.Tsize}return t}function prepare(e){if(e instanceof Uint8Array||typeof e==="string"){e={Data:e}}if(typeof e!=="object"||Array.isArray(e)){throw new TypeError("Invalid DAG-PB form")}const t={};if(e.Data!==undefined){if(typeof e.Data==="string"){t.Data=Nt.encode(e.Data)}else if(e.Data instanceof Uint8Array){t.Data=e.Data}else{throw new TypeError("Invalid DAG-PB form")}}if(e.Links!==undefined){if(Array.isArray(e.Links)){t.Links=e.Links.map(asLink);t.Links.sort(linkComparator)}else{throw new TypeError("Invalid DAG-PB form")}}else{t.Links=[]}return t}function validate(e){if(!e||typeof e!=="object"||Array.isArray(e)){throw new TypeError("Invalid DAG-PB form")}if(!hasOnlyProperties(e,qt)){throw new TypeError("Invalid DAG-PB form (extraneous properties)")}if(e.Data!==undefined&&!(e.Data instanceof Uint8Array)){throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)")}if(!Array.isArray(e.Links)){throw new TypeError("Invalid DAG-PB form (Links must be an array)")}for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||typeof r!=="object"||Array.isArray(r)){throw new TypeError("Invalid DAG-PB form (bad link object)")}if(!hasOnlyProperties(r,Ft)){throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)")}if(!r.Hash){throw new TypeError("Invalid DAG-PB form (link must have a Hash)")}if(r.Hash.asCID!==r.Hash){throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)")}if(r.Name!==undefined&&typeof r.Name!=="string"){throw new TypeError("Invalid DAG-PB form (link Name must be a string)")}if(r.Tsize!==undefined&&(typeof r.Tsize!=="number"||r.Tsize%1!==0)){throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)")}if(t>0&&linkComparator(r,e.Links[t-1])===-1){throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}}function createNode(e,t=[]){return prepare({Data:e,Links:t})}function createLink(e,t,r){return asLink({Hash:r,Name:e,Tsize:t})}const zt="dag-pb";const $t=112;function src_encode(e){validate(e);const t={};if(e.Links){t.Links=e.Links.map((e=>{const t={};if(e.Hash){t.Hash=e.Hash.bytes}if(e.Name!==undefined){t.Name=e.Name}if(e.Tsize!==undefined){t.Tsize=e.Tsize}return t}))}if(e.Data){t.Data=e.Data}return encodeNode(t)}function src_decode(e){const t=decodeNode(e);const r={};if(t.Data){r.Data=t.Data}if(t.Links){r.Links=t.Links.map((e=>{const t={};try{t.Hash=cid_CID.decode(e.Hash)}catch(e){}if(!t.Hash){throw new Error("Invalid Hash field found in link, expected CID")}if(e.Name!==undefined){t.Name=e.Name}if(e.Tsize!==undefined){t.Tsize=e.Tsize}return t}))}return r}const persist=async(e,t,r)=>{if(!r.codec){r.codec=n}if(!r.hasher){r.hasher=mt}if(r.cidVersion===undefined){r.cidVersion=1}if(r.codec===n&&r.hasher!==mt){r.cidVersion=1}const o=await r.hasher.digest(e);const i=cid_CID.create(r.cidVersion,r.codec.code,o);if(!r.onlyHash){await t.put(i,e,{signal:r.signal})}return i};const Ht=persist;const dirBuilder=async(e,t,r)=>{const n=new UnixFS({type:"directory",mtime:e.mtime,mode:e.mode});const o=src_encode(prepare({Data:n.marshal()}));const i=await Ht(o,t,r);const a=e.path;return{cid:i,path:a,unixfs:n,size:o.length}};const Vt=dirBuilder;const Qt="raw";const Gt=85;const raw_encode=e=>coerce(e);const raw_decode=e=>coerce(e);var Yt=__nccwpck_require__(5810);async function flat(e,t){return t(await Yt(e))}const Jt=flat;var Xt=__nccwpck_require__(3454);function balanced(e,t,r){return reduceToParents(e,t,r)}async function reduceToParents(e,t,r){const n=[];for await(const o of Xt(e,r.maxChildrenPerNode)){n.push(await t(o))}if(n.length>1){return reduceToParents(n,t,r)}return n[0]}const Kt=balanced;async function trickleStream(e,t,r){const n=new Root(r.layerRepeat);let o=0;let i=1;let a=n;for await(const s of Xt(e,r.maxChildrenPerNode)){if(a.isFull()){if(a!==n){n.addChild(await a.reduce(t))}if(o&&o%r.layerRepeat===0){i++}a=new SubTree(i,r.layerRepeat,o);o++}a.append(s)}if(a&&a!==n){n.addChild(await a.reduce(t))}return n.reduce(t)}const Zt=trickleStream;class SubTree{constructor(e,t,r=0){this.maxDepth=e;this.layerRepeat=t;this.currentDepth=1;this.iteration=r;this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data){return false}if(this.currentDepth<this.maxDepth&&this.node.maxChildren){this._addNextNodeToParent(this.node);return false}const e=this._findParent(this.node,this.currentDepth);if(e){this._addNextNodeToParent(e);return false}return true}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t);this.currentDepth=t.depth;this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];if(e.children.length){r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))}return t((e.data||[]).concat(r))}_findParent(e,t){const r=e.parent;if(!r||r.depth===0){return}if(r.children.length===r.maxChildren||!r.maxChildren){return this._findParent(r,t)}return r}}class Root extends SubTree{constructor(e){super(0,e);this.root.depth=0;this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}async function*bufferImporter(e,t,r){for await(let i of e.content){yield async()=>{r.progress(i.length,e.path);let a;const s={codec:n,cidVersion:r.cidVersion,hasher:r.hasher,onlyHash:r.onlyHash};if(r.rawLeaves){s.codec=o;s.cidVersion=1}else{a=new UnixFS({type:r.leafType,data:i});i=src_encode({Data:a.marshal(),Links:[]})}return{cid:await Ht(i,t,s),unixfs:a,size:i.length}}}}const er=bufferImporter;const tr={flat:Jt,balanced:Kt,trickle:Zt};async function*buildFileBatch(e,t,r){let n=-1;let o;let i;if(typeof r.bufferImporter==="function"){i=r.bufferImporter}else{i=er}for await(const a of ft(i(e,t,r),r.blockWriteConcurrency)){n++;if(n===0){o=a;continue}else if(n===1&&o){yield o;o=null}yield a}if(o){o.single=true;yield o}}const file_reduce=(e,t,r)=>{async function reducer(o){if(o.length===1&&o[0].single&&r.reduceSingleLeafToSelf){const i=o[0];if(e.mtime!==undefined||e.mode!==undefined){let o=await t.get(i.cid);i.unixfs=new UnixFS({type:"file",mtime:e.mtime,mode:e.mode,data:o});o=src_encode(prepare({Data:i.unixfs.marshal()}));i.cid=await Ht(o,t,{...r,codec:n,hasher:r.hasher,cidVersion:r.cidVersion});i.size=o.length}return{cid:i.cid,path:e.path,unixfs:i.unixfs,size:i.size}}const i=new UnixFS({type:"file",mtime:e.mtime,mode:e.mode});const a=o.filter((e=>{if(e.cid.code===Gt&&e.size){return true}if(e.unixfs&&!e.unixfs.data&&e.unixfs.fileSize()){return true}return Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((e=>{if(e.cid.code===Gt){i.addBlockSize(e.size);return{Name:"",Tsize:e.size,Hash:e.cid}}if(!e.unixfs||!e.unixfs.data){i.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0)}else{i.addBlockSize(e.unixfs.data.length)}return{Name:"",Tsize:e.size,Hash:e.cid}}));const s={Data:i.marshal(),Links:a};const l=src_encode(prepare(s));const u=await Ht(l,t,r);return{cid:u,path:e.path,unixfs:i,size:l.length+s.Links.reduce(((e,t)=>e+t.Tsize),0)}}return reducer};function fileBuilder(e,t,r){const n=tr[r.strategy];if(!n){throw vt(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY")}return n(buildFileBatch(e,t,r),file_reduce(e,t,r),r)}const rr=fileBuilder;var nr=__nccwpck_require__(3664);var ir=__nccwpck_require__(1715);async function*rabinChunker(e,t){let r,n,o;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize){o=t.avgChunkSize;r=t.minChunkSize;n=t.maxChunkSize}else if(!t.avgChunkSize){throw vt(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE")}else{o=t.avgChunkSize;r=o/3;n=o+o/2}if(r<16){throw vt(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE")}if(n<r){n=r}if(o<r){o=r}const i=Math.floor(Math.log2(o));for await(const o of rabin_rabin(e,{min:r,max:n,bits:i,window:t.window,polynomial:t.polynomial})){yield o}}const ar=rabinChunker;async function*rabin_rabin(e,t){const r=await(0,ir.create)(t.bits,t.min,t.max,t.window);const n=new nr;for await(const t of e){n.append(t);const e=r.fingerprint(t);for(let t=0;t<e.length;t++){const r=e[t];const o=n.slice(0,r);n.consume(r);yield o}}if(n.length){yield n.slice(0)}}async function*fixedSizeChunker(e,t){let r=new nr;let n=0;let o=false;const i=t.maxChunkSize;for await(const t of e){r.append(t);n+=t.length;while(n>=i){yield r.slice(0,i);o=true;if(i===r.length){r=new nr;n=0}else{const e=new nr;e.append(r.shallowSlice(i));r=e;n-=i}}}if(!o||n){yield r.slice(0,n)}}const sr=fixedSizeChunker;const lr=from({prefix:"\0",name:"identity",encode:e=>bytes_toString(e),decode:e=>fromString(e)});const ur=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});const cr=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});const fr=baseX({prefix:"9",name:"base10",alphabet:"0123456789"});const dr=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const hr=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});const pr=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const mr=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const yr=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const br=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const gr=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const _r=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const wr=Array.from("");const vr=wr.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const Sr=wr.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function base256emoji_encode(e){return e.reduce(((e,t)=>{e+=vr[t];return e}),"")}function base256emoji_decode(e){const t=[];for(const r of e){const e=Sr[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const Rr=from({prefix:"",name:"base256emoji",encode:base256emoji_encode,decode:base256emoji_decode});const Cr=0;const kr="identity";const Tr=coerce;const digest=e=>create(Cr,Tr(e));const Er={code:Cr,name:kr,encode:Tr,digest:digest};const Ar=new TextEncoder;const Br=new TextDecoder;const xr="json";const Ir=512;const json_encode=e=>Ar.encode(JSON.stringify(e));const json_decode=e=>JSON.parse(Br.decode(e));const Dr={...i,...a,...s,...l,...u,...t,...c,...e,...f,...d};const Or={...r,...h};const Pr={raw:o,json:p};function alloc_alloc(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return globalThis.Buffer.alloc(e)}return new Uint8Array(e)}function allocUnsafe(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return globalThis.Buffer.allocUnsafe(e)}return new Uint8Array(e)}function createCodec(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const jr=createCodec("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const Wr=createCodec("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const Ur={utf8:jr,"utf-8":jr,hex:Dr.base16,latin1:Wr,ascii:Wr,binary:Wr,...Dr};const Lr=Ur;function from_string_fromString(e,t="utf8"){const r=Lr[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e,"utf8")}return r.decoder.decode(`${r.prefix}${e}`)}async function*validateChunks(e){for await(const t of e){if(t.length===undefined){throw vt(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}if(typeof t==="string"||t instanceof String){yield from_string_fromString(t.toString())}else if(Array.isArray(t)){yield Uint8Array.from(t)}else if(t instanceof Uint8Array){yield t}else{throw vt(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}}const Mr=validateChunks;function isIterable(e){return Symbol.iterator in e}function isAsyncIterable(e){return Symbol.asyncIterator in e}function contentAsAsyncIterable(e){try{if(e instanceof Uint8Array){return async function*(){yield e}()}else if(isIterable(e)){return async function*(){yield*e}()}else if(isAsyncIterable(e)){return e}}catch{throw vt(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw vt(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(e,t,r){for await(const n of e){if(n.path){if(n.path.substring(0,2)==="./"){r.wrapWithDirectory=true}n.path=n.path.split("/").filter((e=>e&&e!==".")).join("/")}if(n.content){let e;if(typeof r.chunker==="function"){e=r.chunker}else if(r.chunker==="rabin"){e=ar}else{e=sr}let o;if(typeof r.chunkValidator==="function"){o=r.chunkValidator}else{o=Mr}const i={path:n.path,mtime:n.mtime,mode:n.mode,content:e(o(contentAsAsyncIterable(n.content),r),r)};yield()=>rr(i,t,r)}else if(n.path){const e={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>Vt(e,t,r)}else{throw new Error("Import candidate must have content or path or both")}}}const qr=dagBuilder;class Dir{constructor(e,t){this.options=t||{};this.root=e.root;this.dir=e.dir;this.path=e.path;this.dirty=e.dirty;this.flat=e.flat;this.parent=e.parent;this.parentKey=e.parentKey;this.unixfs=e.unixfs;this.mode=e.mode;this.mtime=e.mtime;this.cid=undefined;this.size=undefined}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}const Fr=Dir;class DirFlat extends Fr{constructor(e,t){super(e,t);this._children={}}async put(e,t){this.cid=undefined;this.size=undefined;this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e){const t=Object.keys(this._children);const r=[];for(let n=0;n<t.length;n++){let o=this._children[t[n]];if(o instanceof Fr){for await(const t of o.flush(e)){o=t;yield o}}if(o.size!=null&&o.cid){r.push({Name:t[n],Tsize:o.size,Hash:o.cid})}}const n=new UnixFS({type:"directory",mtime:this.mtime,mode:this.mode});const o={Data:n.marshal(),Links:r};const i=src_encode(prepare(o));const a=await Ht(i,e,this.options);const s=i.length+o.Links.reduce(((e,t)=>e+(t.Tsize==null?0:t.Tsize)),0);this.cid=a;this.size=s;yield{cid:a,unixfs:n,path:this.path,size:s}}}const Nr=DirFlat;var zr=__nccwpck_require__(7820);class DirSharded extends Fr{constructor(e,t){super(e,t);this._bucket=(0,zr.createHAMT)({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries()){yield{key:e,child:t}}}async*flush(e){for await(const t of flush(this._bucket,e,this,this.options)){yield{...t,path:this.path}}}}const $r=DirSharded;async function*flush(e,t,r,n){const o=e._children;const i=[];let a=0;for(let e=0;e<o.length;e++){const r=o.get(e);if(!r){continue}const s=e.toString(16).toUpperCase().padStart(2,"0");if(r instanceof zr.Bucket){let e;for await(const o of await flush(r,t,null,n)){e=o}if(!e){throw new Error("Could not flush sharded directory, no subshard found")}i.push({Name:s,Tsize:e.size,Hash:e.cid});a+=e.size}else if(typeof r.value.flush==="function"){const e=r.value;let n;for await(const r of e.flush(t)){n=r;yield n}const o=s+r.key;i.push({Name:o,Tsize:n.size,Hash:n.cid});a+=n.size}else{const e=r.value;if(!e.cid){continue}const t=s+r.key;const n=e.size;i.push({Name:t,Tsize:n,Hash:e.cid});a+=n}}const s=Uint8Array.from(o.bitField().reverse());const l=new UnixFS({type:"hamt-sharded-directory",data:s,fanout:e.tableSize(),hashType:n.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode});const u={Data:l.marshal(),Links:i};const c=src_encode(prepare(u));const f=await Ht(c,t,n);const d=c.length+a;yield{cid:f,unixfs:l,size:d}}async function flatToShard(e,t,r,n){let o=t;if(t instanceof Nr&&t.directChildrenCount()>=r){o=await convertToShard(t,n)}const i=o.parent;if(i){if(o!==t){if(e){e.parent=o}if(!o.parentKey){throw new Error("No parent key found")}await i.put(o.parentKey,o)}return flatToShard(o,i,r,n)}return o}async function convertToShard(e,t){const r=new $r({root:e.root,dir:true,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:false,mtime:e.mtime,mode:e.mode},t);for await(const{key:t,child:n}of e.eachChildSeries()){await r.put(t,n)}return r}const Hr=flatToShard;const toPathComponents=(e="")=>(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);const Vr=toPathComponents;async function addToTree(e,t,r){const n=Vr(e.path||"");const o=n.length-1;let i=t;let a="";for(let s=0;s<n.length;s++){const l=n[s];a+=`${a?"/":""}${l}`;const u=s===o;i.dirty=true;i.cid=undefined;i.size=undefined;if(u){await i.put(l,e);t=await Hr(null,i,r.shardSplitThreshold,r)}else{let e=await i.get(l);if(!e||!(e instanceof Fr)){e=new Nr({root:false,dir:true,parent:i,parentKey:l,path:a,dirty:true,flat:true,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},r)}await i.put(l,e);i=e}}return t}async function*flushAndYield(e,t){if(!(e instanceof Fr)){if(e&&e.unixfs&&e.unixfs.isDirectory()){yield e}return}yield*e.flush(t)}async function*treeBuilder(e,t,r){let n=new Nr({root:true,dir:true,path:"",dirty:true,flat:true},r);for await(const t of e){if(!t){continue}n=await addToTree(t,n,r);if(!t.unixfs||!t.unixfs.isDirectory()){yield t}}if(r.wrapWithDirectory){yield*flushAndYield(n,t)}else{for await(const e of n.eachChildSeries()){if(!e){continue}yield*flushAndYield(e.child,t)}}}const Qr=treeBuilder;async function*importer(e,t,r={}){const n=src_options(r);let o;if(typeof r.dagBuilder==="function"){o=r.dagBuilder}else{o=qr}let i;if(typeof r.treeBuilder==="function"){i=r.treeBuilder}else{i=Qr}let a;if(Symbol.asyncIterator in e||Symbol.iterator in e){a=e}else{a=[e]}for await(const e of i(ft(o(a,t,n),n.fileImportConcurrency),t,n)){yield{cid:e.cid,path:e.path,unixfs:e.unixfs,size:e.size}}}var Gr=__nccwpck_require__(664);var Yr=__nccwpck_require__(7842);var Jr=__nccwpck_require__(2276);var Xr=__nccwpck_require__(8753);function isBytes(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function isBlob(e){return e.constructor&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream==="function"}function isFileObject(e){return typeof e==="object"&&(e.path||e.content)}const isReadableStream=e=>e&&typeof e.getReader==="function";async function*toAsyncIterable(e){yield e}async function normaliseContent(e){if(isBytes(e)){return toAsyncIterable(normalise_content_toBytes(e))}if(typeof e==="string"||e instanceof String){return toAsyncIterable(normalise_content_toBytes(e.toString()))}if(isBlob(e)){return Yr(e)}if(isReadableStream(e)){e=Gr(e)}if(Symbol.iterator in e||Symbol.asyncIterator in e){const t=Jr(e);const{value:r,done:n}=await t.peek();if(n){return toAsyncIterable(new Uint8Array(0))}t.push(r);if(Number.isInteger(r)){return toAsyncIterable(Uint8Array.from(await Yt(t)))}if(isBytes(r)||typeof r==="string"||r instanceof String){return Xr(t,normalise_content_toBytes)}}throw vt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function normalise_content_toBytes(e){if(e instanceof Uint8Array){return e}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(e instanceof ArrayBuffer){return new Uint8Array(e)}if(Array.isArray(e)){return Uint8Array.from(e)}return from_string_fromString(e.toString())}async function*normaliseCandidateSingle(e,t){if(e===null||e===undefined){throw vt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}if(typeof e==="string"||e instanceof String){yield toFileObject(e.toString(),t);return}if(isBytes(e)||isBlob(e)){yield toFileObject(e,t);return}if(isReadableStream(e)){e=Gr(e)}if(Symbol.iterator in e||Symbol.asyncIterator in e){const r=Jr(e);const{value:n,done:o}=await r.peek();if(o){yield{content:[]};return}r.push(n);if(Number.isInteger(n)||isBytes(n)||typeof n==="string"||n instanceof String){yield toFileObject(r,t);return}throw vt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(e)){yield toFileObject(e,t);return}throw vt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(e,t){const{path:r,mode:n,mtime:o,content:i}=e;const a={path:r||"",mode:parseMode(n),mtime:parseMtime(o)};if(i){a.content=await t(i)}else if(!r){a.content=await t(e)}return a}function normaliseInput(e){return normaliseCandidateSingle(e,normaliseContent)}async function*normaliseCandidateMultiple(e,t){if(typeof e==="string"||e instanceof String||isBytes(e)||isBlob(e)||e._readableState){throw vt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT")}if(isReadableStream(e)){e=Gr(e)}if(Symbol.iterator in e||Symbol.asyncIterator in e){const r=Jr(e);const{value:n,done:o}=await r.peek();if(o){yield*[];return}r.push(n);if(Number.isInteger(n)){throw vt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT")}if(n._readableState){yield*Xr(r,(e=>normalise_candidate_multiple_toFileObject({content:e},t)));return}if(isBytes(n)){yield normalise_candidate_multiple_toFileObject({content:r},t);return}if(isFileObject(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||isReadableStream(n)||isBlob(n)){yield*Xr(r,(e=>normalise_candidate_multiple_toFileObject(e,t)));return}}if(isFileObject(e)){throw vt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT")}throw vt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function normalise_candidate_multiple_toFileObject(e,t){const{path:r,mode:n,mtime:o,content:i}=e;const a={path:r||"",mode:parseMode(n),mtime:parseMtime(o)};if(i){a.content=await t(i)}else if(!r){a.content=await t(e)}return a}function normalise_input_multiple_normaliseInput(e){return normaliseCandidateMultiple(e,normaliseContent)}function normalise_input_isBytes(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function normalise_input_isBlob(e){return Boolean(e.constructor)&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream==="function"}function isSingle(e){return typeof e==="string"||e instanceof String||normalise_input_isBytes(e)||normalise_input_isBlob(e)||"_readableState"in e}function getNormaliser(e){if(isSingle(e)){return normaliseInput(e)}else{return normalise_input_multiple_normaliseInput(e)}}function notFoundError(e){e=e||new Error("Not Found");return vt(e,"ERR_NOT_FOUND")}function abortedError(e){e=e||new Error("Aborted");return vt(e,"ERR_ABORTED")}var Kr=__nccwpck_require__(7351);var Zr=__nccwpck_require__(2220);var en=__nccwpck_require__(2360);const sortAll=(e,t)=>async function*(){const r=await Yt(e);yield*r.sort(t)}();class base_BaseBlockstore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e){await this.put(r,n,t);yield{key:r,value:n}}}async*getMany(e,t={}){for await(const r of e){yield this.get(r,t)}}async*deleteMany(e,t={}){for await(const r of e){await this.delete(r,t);yield r}}batch(){let e=[];let t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await Kr(this.putMany(e,r));e=[];await Kr(this.deleteMany(t,r));t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(e.prefix!=null){r=Zr(r,(t=>t.key.toString().startsWith(e.prefix||"")))}if(Array.isArray(e.filters)){r=e.filters.reduce(((e,t)=>Zr(e,t)),r)}if(Array.isArray(e.orders)){r=e.orders.reduce(((e,t)=>sortAll(e,t)),r)}if(e.offset!=null){let t=0;r=Zr(r,(()=>t++>=(e.offset||0)))}if(e.limit!=null){r=en(r,e.limit)}return r}queryKeys(e,t){let r=this._allKeys(e,t);if(e.prefix!=null){r=Zr(r,(t=>t.toString().startsWith(e.prefix||"")))}if(Array.isArray(e.filters)){r=e.filters.reduce(((e,t)=>Zr(e,t)),r)}if(Array.isArray(e.orders)){r=e.orders.reduce(((e,t)=>sortAll(e,t)),r)}if(e.offset!=null){let t=0;r=Zr(r,(()=>t++>=e.offset))}if(e.limit!=null){r=en(r,e.limit)}return r}}class MemoryBlockstore extends(null&&BaseBlockstore){constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[base32.encode(e.multihash.bytes)]=t}async get(e){const t=await this.has(e);if(!t)throw Errors.notFoundError();return this.data[base32.encode(e.multihash.bytes)]}async has(e){return this.data[base32.encode(e.multihash.bytes)]!==undefined}async delete(e){delete this.data[base32.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map((([e,t])=>({key:CID.createV1(raw.code,Digest.decode(base32.decode(e))),value:t})))}async*_allKeys(){yield*Object.entries(this.data).map((([e])=>CID.createV1(raw.code,Digest.decode(base32.decode(e)))))}}const tn={...m};class MemoryBlockStore extends base_BaseBlockstore{constructor(){super();this.store=new Map}async*blocks(){for(const[e,t]of this.store.entries()){yield{cid:cid_CID.parse(e),bytes:t}}}put(e,t){this.store.set(e.toString(),t);return Promise.resolve()}get(e){const t=this.store.get(e.toString());if(!t){throw new Error(`block with cid ${e.toString()} no found`)}return Promise.resolve(t)}has(e){return Promise.resolve(this.store.has(e.toString()))}close(){this.store.clear();return Promise.resolve()}}const rn={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:mt,rawLeaves:true,wrapWithDirectory:true,maxChildrenPerNode:174};async function pack({input:e,blockstore:t,hasher:r,maxChunkSize:n,maxChildrenPerNode:o,wrapWithDirectory:i,rawLeaves:a}){if(!e||Array.isArray(e)&&!e.length){throw new Error("missing input file(s)")}const s=t?t:new MemoryBlockStore;const l=await _(w(getNormaliser(e),(e=>importer(e,s,{...rn,hasher:r||rn.hasher,maxChunkSize:n||rn.maxChunkSize,maxChildrenPerNode:o||rn.maxChildrenPerNode,wrapWithDirectory:i===false?false:rn.wrapWithDirectory,rawLeaves:a==null?rn.rawLeaves:a}))));if(!l||!l.cid){throw new Error("given input could not be parsed correctly")}const u=l.cid;const{writer:c,out:f}=await writer_CarWriter.create([u]);const d=f[Symbol.asyncIterator]();let h;const writeAll=async()=>{for await(const e of s.blocks()){await c.put(e)}await c.close();if(!t){await s.close()}};const p={[Symbol.asyncIterator](){if(h!=null){throw new Error("Multiple iterator not supported")}h=writeAll();return{async next(){const e=await d.next();if(e.done){await h}return e}}}};return{root:u,out:p}}const nn=2e3;const an=false;function hasRel(e){return e&&e.rel}function intoRels(e,t){function splitRel(r){e[r]=Object.assign({},t,{rel:r})}t.rel.split(/\s+/).forEach(splitRel);return e}function createObjects(e,t){const r=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);if(r)e[r[1]]=r[2];return e}function parseLink(e){try{const t=e.match(/<?([^>]*)>(.*)/);const r=t[1];const n=t[2].split(";");const o={};const i=new URL(r,"https://example.com");for(const[e,t]of i.searchParams){o[e]=t}n.shift();let a=n.reduce(createObjects,{});a=Object.assign({},o,a);a.url=r;return a}catch{return null}}function checkHeader(e,t){if(!e)return false;t=t||{};const r=t.maxHeaderLength||nn;const n=t.throwOnMaxHeaderLengthExceeded||an;if(e.length>r){if(n){throw new Error("Input string too long, it should be under "+r+" characters.")}else{return false}}return true}function parseLinkHeader(e,t){if(!checkHeader(e,t))return null;return e.split(/,\s*</).map(parseLink).filter(hasRel).reduce(intoRels,{})}const hashFn=async function(e){return(await _t.encode(e)).slice(0,8).reverse()};const addLinksToHamtBucket=(e,t,r)=>Promise.all(e.map((e=>{if(e.Name==null){throw new Error("Unexpected Link without a Name")}if(e.Name.length===2){const n=parseInt(e.Name,16);return t._putObjectAt(n,new zr.Bucket({hash:r._options.hash,bits:r._options.bits},t,n))}return r.put(e.Name.substring(2),true)})));const toPrefix=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2);const toBucketPath=e=>{let t=e.bucket;const r=[];while(t._parent){r.push(t);t=t._parent}r.push(t);return r.reverse()};const findShardCid=async(e,t,r,n,o)=>{if(!n){const e=(0,zr.createHAMT)({hashFn:hashFn});n={rootBucket:e,hamtDepth:1,lastBucket:e}}await addLinksToHamtBucket(e.Links,n.lastBucket,n.rootBucket);const i=await n.rootBucket._findNewBucketAndPos(t);let a=toPrefix(i.pos);const s=toBucketPath(i);if(s.length>n.hamtDepth){n.lastBucket=s[n.hamtDepth];a=toPrefix(n.lastBucket._posAtParent)}const l=e.Links.find((e=>{if(e.Name==null){return false}const r=e.Name.substring(0,2);const n=e.Name.substring(2);if(r!==a){return false}if(n&&n!==t){return false}return true}));if(!l){return null}if(l.Name!=null&&l.Name.substring(2)===t){return l.Hash}n.hamtDepth++;const u=await r.get(l.Hash,o);e=src_decode(u);return findShardCid(e,t,r,n,o)};const sn=findShardCid;function extractDataFromBlock(e,t,r,n){const o=e.length;const i=t+o;if(r>=i||n<t){return new Uint8Array(0)}if(n>=t&&n<i){e=e.slice(0,n-t)}if(r>=t&&r<i){e=e.slice(r-t)}return e}const ln=extractDataFromBlock;const validateOffsetAndLength=(e,t,r)=>{if(!t){t=0}if(t<0){throw vt(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS")}if(t>e){throw vt(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS")}if(!r&&r!==0){r=e-t}if(r<0){throw vt(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS")}if(t+r>e){r=e-t}return{offset:t,length:r}};const un=validateOffsetAndLength;async function*emitBytes(e,t,r,n,o=0,i){if(t instanceof Uint8Array){const e=ln(t,o,r,n);if(e.length){yield e}o+=e.length;return o}if(t.Data==null){throw vt(new Error("no data in PBNode"),"ERR_NOT_UNIXFS")}let a;try{a=UnixFS.unmarshal(t.Data)}catch(e){throw vt(e,"ERR_NOT_UNIXFS")}if(a.data&&a.data.length){const e=ln(a.data,o,r,n);if(e.length){yield e}o+=a.data.length}let s=o;for(let l=0;l<t.Links.length;l++){const u=t.Links[l];const c=o+a.blockSizes[l];if(r>=s&&r<c||n>s&&n<=c||r<s&&n>c){const t=await e.get(u.Hash,{signal:i.signal});let a;switch(u.Hash.code){case $t:a=await src_decode(t);break;case Gt:a=t;break;case et:a=await esm_decode(t);break;default:throw Error(`Unsupported codec: ${u.Hash.code}`)}for await(const t of emitBytes(e,a,r,n,o,i)){o+=t.length;yield t}}o=c;s=c+1}}const fileContent=(e,t,r,n,o,i,a)=>{function yieldFileContent(e={}){const n=r.fileSize();if(n===undefined){throw new Error("File was a directory")}const{offset:o,length:i}=un(n,e.offset,e.length);const s=o;const l=o+i;return emitBytes(a,t,s,l,0,e)}return yieldFileContent};const cn=fileContent;const directoryContent=(e,t,r,n,o,i,a)=>{async function*yieldDirectoryContent(e={}){const r=e.offset||0;const s=e.length||t.Links.length;const l=t.Links.slice(r,s);for(const t of l){const r=await o(t.Hash,t.Name||"",`${n}/${t.Name||""}`,[],i+1,a,e);if(r.entry){yield r.entry}}}return yieldDirectoryContent};const fn=directoryContent;const hamtShardedDirectoryContent=(e,t,r,n,o,i,a)=>{function yieldHamtDirectoryContent(e={}){return listDirectory(t,n,o,i,a,e)}return yieldHamtDirectoryContent};async function*listDirectory(e,t,r,n,o,i){const a=e.Links;for(const s of a){const a=s.Name!=null?s.Name.substring(2):null;if(a){const e=await r(s.Hash,a,`${t}/${a}`,[],n+1,o,i);yield e.entry}else{const a=await o.get(s.Hash);e=src_decode(a);for await(const a of listDirectory(e,t,r,n,o,i)){yield a}}}}const dn=hamtShardedDirectoryContent;const findLinkCid=(e,t)=>{const r=e.Links.find((e=>e.Name===t));return r&&r.Hash};const hn={raw:cn,file:cn,directory:fn,"hamt-sharded-directory":dn,metadata:(e,t,r,n,o,i,a)=>()=>[],symlink:(e,t,r,n,o,i,a)=>()=>[]};const unixFsResolver=async(e,t,r,n,o,i,a,s)=>{const l=await a.get(e,s);const u=src_decode(l);let c;let f;if(!t){t=e.toString()}if(u.Data==null){throw vt(new Error("no data in PBNode"),"ERR_NOT_UNIXFS")}try{c=UnixFS.unmarshal(u.Data)}catch(e){throw vt(e,"ERR_NOT_UNIXFS")}if(!r){r=t}if(n.length){let e;if(c&&c.type==="hamt-sharded-directory"){e=await sn(u,n[0],a)}else{e=findLinkCid(u,n[0])}if(!e){throw vt(new Error("file does not exist"),"ERR_NOT_FOUND")}const t=n.shift();const o=`${r}/${t}`;f={cid:e,toResolve:n,name:t||"",path:o}}return{entry:{type:c.isDirectory()?"directory":"file",name:t,path:r,cid:e,content:hn[c.type](e,u,c,r,o,i,a),unixfs:c,depth:i,node:u,size:c.fileSize()},next:f}};const pn=unixFsResolver;const rawContent=e=>{async function*contentGenerator(t={}){const{offset:r,length:n}=un(e.length,t.offset,t.length);yield ln(e,0,r,r+n)}return contentGenerator};const resolve=async(e,t,r,n,o,i,a,s)=>{if(n.length){throw vt(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND")}const l=await a.get(e,s);return{entry:{type:"raw",name:t,path:r,cid:e,content:rawContent(l),depth:i,size:l.length,node:l}}};const mn=resolve;const dag_cbor_resolve=async(e,t,r,n,o,i,a,s)=>{const l=await a.get(e);const u=esm_decode(l);let c=u;let f=r;while(n.length){const o=n[0];if(o in c){n.shift();f=`${f}/${o}`;const a=cid_CID.asCID(c[o]);if(a){return{entry:{type:"object",name:t,path:r,cid:e,node:l,depth:i,size:l.length,content:async function*(){yield u}},next:{cid:a,name:o,path:f,toResolve:n}}}c=c[o]}else{throw vt(new Error(`No property named ${o} found in cbor node ${e}`),"ERR_NO_PROP")}}return{entry:{type:"object",name:t,path:r,cid:e,node:l,depth:i,size:l.length,content:async function*(){yield u}}}};const yn=dag_cbor_resolve;const identity_rawContent=e=>{async function*contentGenerator(t={}){const{offset:r,length:n}=un(e.length,t.offset,t.length);yield ln(e,0,r,r+n)}return contentGenerator};const identity_resolve=async(e,t,r,n,o,i,a,s)=>{if(n.length){throw vt(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND")}const l=await digest_decode(e.multihash.bytes);return{entry:{type:"identity",name:t,path:r,cid:e,content:identity_rawContent(l.digest),depth:i,size:l.digest.length,node:l.digest}}};const bn=identity_resolve;const gn={[$t]:pn,[Gt]:mn,[et]:yn,[Er.code]:bn};function resolvers_resolve(e,t,r,n,o,i,a){const s=gn[e.code];if(!s){throw vt(new Error(`No resolver for code ${e.code}`),"ERR_NO_RESOLVER")}return s(e,t,r,n,resolvers_resolve,o,i,a)}const _n=resolvers_resolve;const src_toPathComponents=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);const cidAndRest=e=>{if(e instanceof Uint8Array){return{cid:cid_CID.decode(e),toResolve:[]}}const t=cid_CID.asCID(e);if(t){return{cid:t,toResolve:[]}}if(typeof e==="string"){if(e.indexOf("/ipfs/")===0){e=e.substring(6)}const t=src_toPathComponents(e);return{cid:cid_CID.parse(t[0]),toResolve:t.slice(1)}}throw vt(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")};async function*walkPath(e,t,r={}){let{cid:n,toResolve:o}=cidAndRest(e);let i=n.toString();let a=i;const s=o.length;while(true){const l=await _n(n,i,a,o,s,t,r);if(!l.entry&&!l.next){throw vt(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND")}if(l.entry){yield l.entry}if(!l.next){return}o=l.next.toResolve;n=l.next.cid;i=l.next.name;a=l.next.path}}async function exporter(e,t,r={}){const n=await _(walkPath(e,t,r));if(!n){throw vt(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND")}return n}async function*recursive(e,t,r={}){const n=await exporter(e,t,r);if(!n){return}yield n;if(n.type==="directory"){for await(const e of recurse(n,r)){yield e}}async function*recurse(e,t){for await(const r of e.content(t)){yield r;if(r instanceof Uint8Array){continue}if(r.type==="directory"){yield*recurse(r,t)}}}}function equals_equals(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}class verifying_get_only_blockstore_VerifyingGetOnlyBlockStore extends base_BaseBlockstore{constructor(e){super();this.store=e}async get(e){const t=await this.store.get(e);if(!t){throw new Error(`Incomplete CAR. Block missing for CID ${e}`)}if(!isValid({cid:e,bytes:t})){throw new Error(`Invalid CAR. Hash of block data does not match CID ${e}`)}return t}static fromBlockstore(e){return new verifying_get_only_blockstore_VerifyingGetOnlyBlockStore(e)}static fromCarReader(e){return new verifying_get_only_blockstore_VerifyingGetOnlyBlockStore({get:async t=>{const r=await e.get(t);return r===null||r===void 0?void 0:r.bytes}})}}async function isValid({cid:e,bytes:t}){const r=await mt.digest(t);return equals_equals(r.digest,e.multihash.digest)}async function*unpack(e,t){const r=VerifyingGetOnlyBlockStore.fromCarReader(e);if(!t||t.length===0){t=await e.getRoots()}for(const e of t){yield*unixFsExporter(e,r,{})}}async function*unpackStream(e,{roots:t,blockstore:r}={}){const n=await CarBlockIterator.fromIterable(asAsyncIterable(e));const o=r||new MemoryBlockStore;for await(const e of n){await o.put(e.cid,e.bytes)}const i=verifying_get_only_blockstore_VerifyingGetOnlyBlockStore.fromBlockstore(o);if(!t||t.length===0){t=await n.getRoots()}for(const e of t){yield*recursive(e,i)}}function asAsyncIterable(e){return Symbol.asyncIterator in e?e:Gr(e)}const block_readonly=({enumerable:e=true,configurable:t=false}={})=>({enumerable:e,configurable:t,writable:false});const links=function*(e,t){if(e==null)return;if(e instanceof Uint8Array)return;for(const[r,n]of Object.entries(e)){const e=[...t,r];if(n!=null&&typeof n==="object"){if(Array.isArray(n)){for(const[t,r]of n.entries()){const n=[...e,t];const o=cid_CID.asCID(r);if(o){yield[n.join("/"),o]}else if(typeof r==="object"){yield*links(r,n)}}}else{const t=cid_CID.asCID(n);if(t){yield[e.join("/"),t]}else{yield*links(n,e)}}}}};const tree=function*(e,t){if(e==null)return;for(const[r,n]of Object.entries(e)){const e=[...t,r];yield e.join("/");if(n!=null&&!(n instanceof Uint8Array)&&typeof n==="object"&&!cid_CID.asCID(n)){if(Array.isArray(n)){for(const[t,r]of n.entries()){const n=[...e,t];yield n.join("/");if(typeof r==="object"&&!cid_CID.asCID(r)){yield*tree(r,n)}}}else{yield*tree(n,e)}}}};const get=(e,t)=>{let r=e;for(const[e,n]of t.entries()){r=r[n];if(r==null){throw new Error(`Object has no property at ${t.slice(0,e+1).map((e=>`[${JSON.stringify(e)}]`)).join("")}`)}const o=cid_CID.asCID(r);if(o){return{value:o,remaining:t.slice(e+1).join("/")}}}return{value:r}};class Block{constructor({cid:e,bytes:t,value:r}){if(!e||!t||typeof r==="undefined")throw new Error("Missing required argument");this.cid=e;this.bytes=t;this.value=r;this.asBlock=this;Object.defineProperties(this,{cid:block_readonly(),bytes:block_readonly(),value:block_readonly(),asBlock:block_readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get(this.value,e.split("/").filter(Boolean))}}const block_encode=async({value:e,codec:t,hasher:r})=>{if(typeof e==="undefined")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");const n=t.encode(e);const o=await r.digest(n);const i=CID.create(1,t.code,o);return new Block({value:e,bytes:n,cid:i})};const block_decode=async({bytes:e,codec:t,hasher:r})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");const n=t.decode(e);const o=await r.digest(e);const i=CID.create(1,t.code,o);return new Block({value:n,bytes:e,cid:i})};const createUnsafe=({bytes:e,cid:t,value:r,codec:n})=>{const o=r!==undefined?r:n&&n.decode(e);if(o===undefined)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block({cid:t,bytes:e,value:o})};const block_create=async({bytes:e,cid:t,hasher:r,codec:n})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');const o=n.decode(e);const i=await r.digest(e);if(!binary.equals(t.multihash.bytes,i.bytes)){throw new Error("CID hash does not match bytes")}return createUnsafe({bytes:e,cid:t,value:o,codec:n})};const wn=42;function esm_cidEncoder(e){if(e.asCID!==e){return null}const t=cid_CID.asCID(e);if(!t){return null}const r=new Uint8Array(t.bytes.byteLength+1);r.set(t.bytes,1);return[new Token(Type.tag,wn),new Token(Type.bytes,r)]}function esm_undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function esm_numberEncoder(e){if(Number.isNaN(e)){throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded")}if(e===Infinity||e===-Infinity){throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded")}return null}const vn={float64:true,typeEncoders:{Object:esm_cidEncoder,undefined:esm_undefinedEncoder,number:esm_numberEncoder}};function esm_cidDecoder(e){if(e[0]!==0){throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00")}return cid_CID.decode(e.subarray(1))}const Sn={allowIndefinite:false,allowUndefined:false,allowNaN:false,allowInfinity:false,allowBigInt:true,strict:true,useMaps:false,tags:[]};Sn.tags[wn]=esm_cidDecoder;const Rn="dag-cbor";const Cn=113;const dag_cbor_esm_encode=e=>encode_encode(e,vn);const dag_cbor_esm_decode=e=>decode_decode(e,Sn);class TreewalkCarSplitter{constructor(e,t,r={}){if(typeof t!=="number"||t<=0){throw new Error("invalid target chunk size")}this._reader=e;this._targetSize=t;this._decoders=[n,o,y,...r.decoders||[]]}async*cars(){const e=await this._reader.getRoots();if(e.length!==1)throw new Error(`unexpected number of roots: ${e.length}`);let t;for await(const r of this._cars(e[0])){t=r.channel;if(r.out)yield r.out}if(!t){throw new Error("missing CAR writer channel")}t.writer.close();yield t.out}async _get(e){const t=await this._reader.get(e);if(!t)throw new Error(`missing block for ${e}`);const{bytes:r}=t;const n=this._decoders.find((t=>t.code===e.code));if(!n)throw new Error(`missing decoder for ${e.code}`);return new Block({cid:e,bytes:r,value:n.decode(r)})}async*_cars(e,t=[],r=undefined){const n=await this._get(e);r=r||Object.assign(writer_CarWriter.create(e),{size:0});if(r.size>0&&r.size+n.bytes.byteLength>=this._targetSize){r.writer.close();const{out:e}=r;r=newCar(t);yield{channel:r,out:e}}t=t.concat(n);r.size+=n.bytes.byteLength;r.writer.put(n);for(const[,e]of n.links()){for await(const n of this._cars(e,t,r)){r=n.channel;yield n}}if(!r){throw new Error("missing CAR writer channel")}yield{channel:r}}static async fromIterable(e,t,r){const n=await CarReader.fromIterable(e);return new TreewalkCarSplitter(n,t,r)}static async fromBlob(e,t,r){const n=await e.arrayBuffer();const o=await CarReader.fromBytes(new Uint8Array(n));return new TreewalkCarSplitter(o,t,r)}}function newCar(e){const t=Object.assign(writer_CarWriter.create(e[0].cid),{size:e.reduce(((e,t)=>e+t.bytes.byteLength),0)});for(const r of e){t.writer.put(r)}return t}class TreewalkCarJoiner{constructor(e){this._cars=Array.from(e);if(!this._cars.length)throw new Error("missing CARs")}async*car(){const e=this._cars[0];const t=await e.getRoots();const{writer:r,out:n}=CarWriter.create(t);const writeCar=async()=>{const t=new Set;const writeBlocks=async e=>{for await(const n of e.blocks()){if(t.has(n.cid.toString()))continue;await r.put(n);t.add(n.cid.toString())}};try{await writeBlocks(e);for(const e of this._cars.slice(1)){await writeBlocks(e)}}catch(e){console.error(e)}finally{await r.close()}};writeCar();yield*n}}var kn=__nccwpck_require__(1017);var Tn=__nccwpck_require__(7758);var En=__nccwpck_require__(402);const An=(0,S.promisify)(Tn.stat);async function getFilesFromPath(e,t){const r=[];for await(const n of filesFromPath(e,t)){r.push(n)}return r}async function*filesFromPath(e,t){t=t||{};if(typeof e==="string"){e=[e]}const r={recursive:true,glob:{dot:Boolean(t.hidden),ignore:Array.isArray(t.ignore)?t.ignore:[],follow:t.followSymlinks!=null?t.followSymlinks:true}};for await(const n of e){if(typeof n!=="string"){throw vt(new Error("Path must be a string"),"ERR_INVALID_PATH",{path:n})}const e=kn.resolve(process.cwd(),n);const o=await An(e);const i=t.pathPrefix||kn.dirname(e);let a=t.mode;if(t.preserveMode){a=o.mode}let s=t.mtime;if(t.preserveMtime){s=o.mtime}yield*toGlobSource({path:n,type:o.isDirectory()?"dir":"file",prefix:i,mode:a,mtime:s,size:o.size,preserveMode:t.preserveMode,preserveMtime:t.preserveMtime},r)}}async function*toGlobSource({path:e,type:t,prefix:r,mode:n,mtime:o,size:i,preserveMode:a,preserveMtime:s},l){l=l||{};const u=kn.basename(e);if(t==="file"){yield{name:`/${u.replace(r,"")}`,stream:()=>Tn.createReadStream(kn.isAbsolute(e)?e:kn.join(process.cwd(),e)),mode:n,mtime:o,size:i};return}const c=Object.assign({},l.glob,{cwd:e,nodir:false,realpath:false,absolute:true});for await(const t of En(e,"**/*",c)){const e=await An(t);if(!e.isFile()){continue}if(a||s){if(a){n=e.mode}if(s){o=e.mtime}}yield{name:toPosix(t.replace(r,"")),stream:()=>Tn.createReadStream(t),mode:n,mtime:o,size:e.size}}}const toPosix=e=>e.replace(/\\/g,"/");var Bn=__nccwpck_require__(7855);var xn=__nccwpck_require__(3685);var In=__nccwpck_require__(5687);const Dn=require("zlib");var On=__nccwpck_require__(2371);const Pn=TextEncoder;const jn=TextDecoder;var Wn=__nccwpck_require__(8059);const{ReadableStream:Un,ReadableStreamDefaultReader:Ln,ReadableStreamBYOBReader:Mn,ReadableStreamBYOBRequest:qn,ReadableByteStreamController:Fn,ReadableStreamDefaultController:Nn,TransformStream:zn,TransformStreamDefaultController:$n,WritableStream:Hn,WritableStreamDefaultWriter:Vn,WritableStreamDefaultController:Qn,ByteLengthQueuingStrategy:Gn,CountQueuingStrategy:Yn,TextEncoderStream:Jn,TextDecoderStream:Xn}=Wn;const Kn=class Blob{constructor(e=[],t={}){const r=[];let n=0;for(const t of e){if(typeof t==="string"){const e=(new Pn).encode(t);r.push(e);n+=e.byteLength}else if(t instanceof Kn){n+=t.size;r.push(...t._parts)}else if(t instanceof ArrayBuffer){r.push(new Uint8Array(t));n+=t.byteLength}else if(t instanceof Uint8Array){r.push(t);n+=t.byteLength}else if(ArrayBuffer.isView(t)){const{buffer:e,byteOffset:o,byteLength:i}=t;r.push(new Uint8Array(e,o,i));n+=i}else{const e=(new Pn).encode(String(t));r.push(e);n+=e.byteLength}}this._size=n;this._type=readType(t.type);this._parts=r;Object.defineProperties(this,{_size:{enumerable:false},_type:{enumerable:false},_parts:{enumerable:false}})}get type(){return this._type}get size(){return this._size}slice(e=0,t=this.size,r=""){const{size:n,_parts:o}=this;let i=e<0?Math.max(n+e,0):Math.min(e,n);let a=t<0?Math.max(n+t,0):Math.min(t,n);const s=Math.max(a-i,0);const l=new Blob([],{type:r});if(s===0){return l}let u=0;const c=[];for(const e of o){const{byteLength:t}=e;if(i>0&&t<=i){i-=t;a-=t}else{const r=e.subarray(i,Math.min(t,a));c.push(r);u+=r.byteLength;i=0;if(u>=s){break}}}l._parts=c;l._size=u;return l}async arrayBuffer(){const e=new ArrayBuffer(this.size);const t=new Uint8Array(e);let r=0;for(const e of this._parts){t.set(e,r);r+=e.byteLength}return e}async text(){const e=new jn;let t="";for(const r of this._parts){t+=e.decode(r)}return t}stream(){return new BlobStream(this._parts)}toString(){return"[object Blob]"}get[Symbol.toStringTag](){return"Blob"}};const Zn=Kn;class BlobStream extends Un{constructor(e){super(new BlobStreamController(e.values()),{type:"bytes"});this._chunks=e}async*[Symbol.asyncIterator](e){const t=this.getReader();yield*this._chunks;t.releaseLock()}}class BlobStreamController{constructor(e){this.chunks=e}start(e){this.work(e);this.isWorking=false;this.isCancelled=false}async work(e){const{chunks:t}=this;this.isWorking=true;while(!this.isCancelled&&(e.desiredSize||0)>0){let r=null;try{r=t.next()}catch(t){e.error(t);break}if(r){if(!r.done&&!this.isCancelled){e.enqueue(r.value)}else{e.close()}}}this.isWorking=false}pull(e){if(!this.isWorking){this.work(e)}}cancel(){this.isCancelled=true}}const readType=(e="")=>{const t=String(e).toLowerCase();return/[^\u0020-\u007E]/.test(t)?"":t};const eo=globalThis.Blob||Zn;class FetchBaseError extends Error{constructor(e,t){super(e);Error.captureStackTrace(this,this.constructor);this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class FetchError extends FetchBaseError{constructor(e,t,r){super(e,t);if(r){this.code=this.errno=r.code;this.erroredSysCall=r.syscall}}}function stringToArray(e){const t=unescape(encodeURIComponent(e));return Uint8Array.from(t,((e,r)=>t.charCodeAt(r)))}function utils_arrayToString(e){const t=String.fromCharCode.apply(null,e);return decodeURIComponent(escape(t))}function utils_mergeArrays(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;for(const n of e){t.set(n,r);r+=n.length}return t}function arraysEqual(e,t){if(e.length!==t.length){return false}for(let r=0;r<e.length;r++){if(e[r]!==t[r]){return false}}return true}function search_coerce(e){if(e instanceof Uint8Array){return t=>e[t]}return e}function jsmemcmp(e,t,r,n,o){const i=search_coerce(e);const a=search_coerce(r);for(let e=0;e<o;++e){if(i(t+e)!==a(n+e)){return false}}return true}function createOccurenceTable(e){const t=new Array(256).fill(e.length);if(e.length>1){for(let r=0;r<e.length-1;r++){t[e[r]]=e.length-1-r}}return t}const to=Symbol("Match");class StreamSearch{constructor(e){this._lookbehind=new Uint8Array;if(typeof e==="string"){this._needle=e=stringToArray(e)}else{this._needle=e}this._lastChar=e[e.length-1];this._occ=createOccurenceTable(e)}feed(e){let t=0;let r;const n=[];while(t!==e.length){[t,...r]=this._feed(e,t);n.push(...r)}return n}end(){const e=this._lookbehind;this._lookbehind=new Uint8Array;return e}_feed(e,t){const r=[];let n=-this._lookbehind.length;if(n<0){while(n<0&&n<=e.length-this._needle.length){const t=this._charAt(e,n+this._needle.length-1);if(t===this._lastChar&&this._memcmp(e,n,this._needle.length-1)){if(n>-this._lookbehind.length){r.push(this._lookbehind.slice(0,this._lookbehind.length+n))}r.push(to);this._lookbehind=new Uint8Array;return[n+this._needle.length,...r]}else{n+=this._occ[t]}}if(n<0){while(n<0&&!this._memcmp(e,n,e.length-n)){n++}}if(n>=0){r.push(this._lookbehind);this._lookbehind=new Uint8Array}else{const t=this._lookbehind.length+n;if(t>0){r.push(this._lookbehind.slice(0,t));this._lookbehind=this._lookbehind.slice(t)}this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+e.length),((t,r)=>this._charAt(e,r-this._lookbehind.length)));return[e.length,...r]}}n+=t;while(n<=e.length-this._needle.length){const o=e[n+this._needle.length-1];if(o===this._lastChar&&e[n]===this._needle[0]&&jsmemcmp(this._needle,0,e,n,this._needle.length-1)){if(n>t){r.push(e.slice(t,n))}r.push(to);return[n+this._needle.length,...r]}else{n+=this._occ[o]}}if(n<e.length){while(n<e.length&&(e[n]!==this._needle[0]||!jsmemcmp(e,n,this._needle,0,e.length-n))){++n}if(n<e.length){this._lookbehind=e.slice(n)}}if(n>0){r.push(e.slice(t,n<e.length?n:e.length))}return[e.length,...r]}_charAt(e,t){if(t<0){return this._lookbehind[this._lookbehind.length+t]}return e[t]}_memcmp(e,t,r){return jsmemcmp(this._charAt.bind(this,e),t,this._needle,0,r)}}class ReadableStreamSearch{constructor(e,t){this._readableStream=t;this._search=new StreamSearch(e)}async*[Symbol.asyncIterator](){const e=this._readableStream.getReader();try{while(true){const t=await e.read();if(t.done){break}yield*this._search.feed(t.value)}const t=this._search.end();if(t.length){yield t}}finally{e.releaseLock()}}}const ro=Symbol("End of Queue");class QueueableStreamSearch{constructor(e){this._chunksQueue=[];this._closed=false;this._search=new StreamSearch(e)}push(...e){if(this._closed){throw new Error("cannot call push after close")}this._chunksQueue.push(...e);if(this._notify){this._notify()}}close(){if(this._closed){throw new Error("close was already called")}this._closed=true;this._chunksQueue.push(ro);if(this._notify){this._notify()}}async*[Symbol.asyncIterator](){while(true){let e;while(!(e=this._chunksQueue.shift())){await new Promise((e=>this._notify=e));this._notify=undefined}if(e===ro){break}yield*this._search.feed(e)}const e=this._search.end();if(e.length){yield e}}}function splitChunks(e,t){const r=new StreamSearch(t);const n=[[]];for(const t of e){for(const e of r.feed(t)){if(e===to){n.push([])}else{n[n.length-1].push(e)}}}const o=r.end();n[n.length-1].push(o);return n.map((e=>mergeArrays(...e)))}function split(e,t){return splitChunks([e],t)}async function*chunksIterator(e){let t=[];for await(const r of e){if(r===to){yield t;t=[]}else{t.push(r)}}yield t}async function*stringIterator(e){for await(const t of chunksIterator(e)){yield t.map(arrayToString).join("")}}async function allStrings(e){const t=[];for await(const r of stringIterator(e)){t.push(r)}return t}async function*arrayIterator(e){for await(const t of chunksIterator(e)){yield mergeArrays(...t)}}const no=Function.prototype.apply.bind(utils_mergeArrays,undefined);const oo=stringToArray("--");const io=stringToArray("\r\n");function parseContentDisposition(e){const t=e.split(";").map((e=>e.trim()));if(t.shift()!=="form-data"){throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(t)+"`")}const r={};for(const n of t){const t=n.split("=",2);if(t.length!==2){throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+e+"`")}const[o,i]=t;if(i[0]==='"'&&i[i.length-1]==='"'){r[o]=i.slice(1,-1).replace(/\\"/g,'"')}else if(i[0]!=='"'&&i[i.length-1]!=='"'){r[o]=i}else if(i[0]==='"'&&i[i.length-1]!=='"'||i[0]!=='"'&&i[i.length-1]==='"'){throw new Error("malformed content-disposition header: mismatched quotations in `"+e+"`")}}if(!r.name){throw new Error("malformed content-disposition header: missing field name in `"+e+"`")}return r}function parsePartHeaders(e){const t=[];let r=false;let n;while(typeof(n=e.shift())!=="undefined"){const e=n.indexOf(":");if(e===-1){throw new Error("malformed multipart-form header: missing colon")}const o=n.slice(0,e).trim().toLowerCase();const i=n.slice(e+1).trim();switch(o){case"content-disposition":r=true;t.push(...Object.entries(parseContentDisposition(i)));break;case"content-type":t.push(["contentType",i])}}if(!r){throw new Error("malformed multipart-form header: missing content-disposition")}return Object.fromEntries(t)}async function readHeaderLines(e,t){let r=true;let n=false;const o=[[]];const i=new StreamSearch(io);for(;;){const a=await e.next();if(a.done){throw new Error("malformed multipart-form data: unexpected end of stream")}if(r&&a.value!==to&&arraysEqual(a.value.slice(0,2),oo)){return[undefined,new Uint8Array]}let s;if(a.value!==to){s=a.value}else if(!n){s=t}else{throw new Error("malformed multipart-form data: unexpected boundary")}if(!s.length){continue}if(r){r=false}const l=i.feed(s);for(const[e,t]of l.entries()){const r=t===to;if(!r&&!t.length){continue}if(n&&r){l.push(i.end());return[o.filter((e=>e.length)).map(no).map(utils_arrayToString),utils_mergeArrays(...l.slice(e+1).map((e=>e===to?io:e)))]}if(n=r){o.push([])}else{o[o.length-1].push(t)}}}}async function*streamMultipart(e,t){const r=utils_mergeArrays(oo,stringToArray(t));const n=new ReadableStreamSearch(r,e)[Symbol.asyncIterator]();for(;;){const e=await n.next();if(e.done){return}if(e.value===to){break}}const o=new StreamSearch(io);for(;;){const[e,t]=await readHeaderLines(n,r);if(!e){return}async function nextToken(){const e=await n.next();if(e.done){throw new Error("malformed multipart-form data: unexpected end of stream")}return e}let i=false;function feedChunk(e){const t=[];for(const r of o.feed(e)){if(i){t.push(io)}if(!(i=r===to)){t.push(r)}}return utils_mergeArrays(...t)}let a=false;async function nextChunk(){const e=await nextToken();let t;if(e.value!==to){t=e.value}else if(!i){t=io}else{a=true;return{value:o.end()}}return{value:feedChunk(t)}}const s=[{value:feedChunk(t)}];yield{...parsePartHeaders(e),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){const e=s.shift();if(!e){break}if(e.value.length>0){return e}}for(;;){if(a){return{done:a,value:undefined}}const e=await nextChunk();if(e.value.length>0){return e}}}}};while(!a){s.push(await nextChunk())}}}async function*iterateMultipart(e,t){for await(const r of streamMultipart(e,t)){const e=[];for await(const t of r.data){e.push(t)}yield{...r,data:utils_mergeArrays(...e)}}}const ao=Symbol.toStringTag;const isURLSearchParameters=e=>typeof e==="object"&&typeof e.append==="function"&&typeof e.delete==="function"&&typeof e.get==="function"&&typeof e.getAll==="function"&&typeof e.has==="function"&&typeof e.set==="function"&&typeof e.sort==="function"&&e[ao]==="URLSearchParams";const is_isBlob=e=>typeof e==="object"&&typeof e.arrayBuffer==="function"&&typeof e.type==="string"&&typeof e.stream==="function"&&typeof e.constructor==="function"&&/^(Blob|File)$/.test(e[ao]);function isFormData(e){return typeof e==="object"&&typeof e.append==="function"&&typeof e.set==="function"&&typeof e.get==="function"&&typeof e.getAll==="function"&&typeof e.delete==="function"&&typeof e.keys==="function"&&typeof e.values==="function"&&typeof e.entries==="function"&&typeof e.constructor==="function"&&e[ao]==="FormData"}const isMultipartFormDataStream=e=>e instanceof ut===true&&typeof e.getBoundary==="function"&&typeof e.hasKnownLength==="function"&&typeof e.getLengthSync==="function";const isAbortSignal=e=>typeof e==="object"&&(e[ao]==="AbortSignal"||e[ao]==="EventTarget");const is_isReadableStream=e=>typeof e==="object"&&typeof e.getReader==="function"&&typeof e.cancel==="function"&&typeof e.tee==="function";const is_isIterable=e=>e&&Symbol.iterator in e;const so="\r\n";const lo="-".repeat(2);const uo=Buffer.byteLength(so);const getFooter=e=>`${lo}${e}${lo}${so.repeat(2)}`;function getHeader(e,t,r){let n="";n+=`${lo}${e}${so}`;n+=`Content-Disposition: form-data; name="${t}"`;if(is_isBlob(r)){const{name:e="blob",type:t}=r;n+=`; filename="${e}"${so}`;n+=`Content-Type: ${t||"application/octet-stream"}`}return`${n}${so.repeat(2)}`}const getBoundary=()=>(0,pt.randomBytes)(8).toString("hex");async function*formDataIterator(e,t){for(const[r,n]of e){yield getHeader(t,r,n);if(is_isBlob(n)){yield*n.stream()}else{yield n}yield so}yield getFooter(t)}function getFormDataLength(e,t){let r=0;for(const[n,o]of e){r+=Buffer.byteLength(getHeader(t,n,o));if(is_isBlob(o)){r+=o.size}else{r+=Buffer.byteLength(String(o))}r+=uo}r+=Buffer.byteLength(getFooter(t));return r}const toFormData=async({body:e,headers:t})=>{const r=t?.get("Content-Type")||"";const[n,o]=r.split(/\s*;\s*boundary=/);if(n==="multipart/form-data"&&o!=null&&e!=null){const t=new FormData;const r=iterateMultipart(e,o);for await(const{name:e,data:n,filename:o,contentType:i}of r){if(o){t.append(e,new File([n],o,{type:i}))}else{t.append(e,(new TextDecoder).decode(n),o)}}return t}else{throw new TypeError("Could not parse content as FormData.")}};const co=new S.TextEncoder;const fo=new S.TextDecoder;const utf8_encode=e=>co.encode(e);const utf8_decode=e=>fo.decode(e);const{readableHighWaterMark:ho}=new ut.Readable;const po=Symbol("Body internals");class Body{constructor(e,{size:t=0}={}){const r={body:null,type:null,size:null,boundary:null,disturbed:false,error:null};this[po]=r;if(e===null){r.body=null;r.size=0}else if(isURLSearchParameters(e)){const t=utf8_encode(e.toString());r.body=body_fromBytes(t);r.size=t.byteLength;r.type="application/x-www-form-urlencoded;charset=UTF-8"}else if(is_isBlob(e)){r.size=e.size;r.type=e.type||null;r.body=e.stream()}else if(e instanceof Uint8Array){r.body=body_fromBytes(e);r.size=e.byteLength}else if(S.types.isAnyArrayBuffer(e)){const t=new Uint8Array(e);r.body=body_fromBytes(t);r.size=t.byteLength}else if(ArrayBuffer.isView(e)){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.body=body_fromBytes(t);r.size=t.byteLength}else if(is_isReadableStream(e)){r.body=e}else if(isFormData(e)){const t=`NodeFetchFormDataBoundary${getBoundary()}`;r.type=`multipart/form-data; boundary=${t}`;r.size=getFormDataLength(e,t);r.body=fromAsyncIterable(formDataIterator(e,t))}else if(isMultipartFormDataStream(e)){r.type=`multipart/form-data; boundary=${e.getBoundary()}`;r.size=e.hasKnownLength()?e.getLengthSync():null;r.body=body_fromStream(e)}else if(e instanceof ut){r.body=body_fromStream(e)}else{const t=utf8_encode(String(e));r.type="text/plain;charset=UTF-8";r.size=t.byteLength;r.body=body_fromBytes(t)}this.size=t}get headers(){throw new TypeError(`'get headers' called on an object that does not implements interface.`)}get body(){return this[po].body}get bodyUsed(){return this[po].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await consumeBody(this);return e.slice(t,t+r)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[po].body&&this[po].type||"";const t=await consumeBody(this);return new eo([t],{type:e})}async json(){return JSON.parse(await this.text())}async text(){const e=await consumeBody(this);return utf8_decode(e)}async formData(){return toFormData(this)}}Object.defineProperties(Body.prototype,{body:{enumerable:true},bodyUsed:{enumerable:true},arrayBuffer:{enumerable:true},blob:{enumerable:true},json:{enumerable:true},text:{enumerable:true},formData:{enumerable:true}});async function consumeBody(e){const t=e[po];if(t.disturbed){throw new TypeError(`body used already for: ${e.url}`)}t.disturbed=true;if(t.error){throw t.error}const{body:r}=t;if(r===null){return new Uint8Array(0)}const[n,o,i]=e.size>0?[new Uint8Array(e.size),[],e.size]:[null,[],Infinity];let a=0;const s=streamIterator(r);try{for await(const t of s){const r=t instanceof Uint8Array?t:Buffer.from(t);if(a+r.byteLength>i){const t=new FetchError(`content size at ${e.url} over limit: ${i}`,"max-size");s.throw(t);throw t}else if(n){n.set(r,a)}else{o.push(r)}a+=r.byteLength}if(n){if(a<n.byteLength){throw new FetchError(`Premature close of server response while trying to fetch ${e.url}`,"premature-close")}else{return n}}else{return writeBytes(new Uint8Array(a),o)}}catch(t){if(t instanceof FetchBaseError){throw t}else if(t&&t.name==="AbortError"){throw t}else{const r=t;throw new FetchError(`Invalid response body while trying to fetch ${e.url}: ${r.message}`,"system",r)}}}const clone=e=>{const{body:t}=e;if(e.bodyUsed){throw new Error("cannot clone body after it is used")}const[r,n]=t.tee();e[po].body=r;return n};const extractContentType=e=>e[po].type;const getTotalBytes=e=>e[po].size;const body_writeToStream=(e,{body:t})=>{if(t===null){e.end()}else{ut.Readable.from(streamIterator(t)).pipe(e)}};class StreamIterableIterator{constructor(e){this.stream=e;this.reader=null}[Symbol.asyncIterator](){return this}getReader(){if(this.reader){return this.reader}const e=this.stream.getReader();this.reader=e;return e}next(){return this.getReader().read()}async return(){if(this.reader){await this.reader.cancel()}return{done:true,value:undefined}}async throw(e){await this.getReader().cancel(e);return{done:true,value:undefined}}}const streamIterator=e=>new StreamIterableIterator(e);const writeBytes=(e,t)=>{let r=0;for(const n of t){e.set(n,r);r+=n.byteLength}return e};const body_fromBytes=e=>new Un({start(t){t.enqueue(e);t.close()}});const fromAsyncIterable=e=>new Un(new AsyncIterablePump(e));class AsyncIterablePump{constructor(e){this.source=e[Symbol.asyncIterator]()}async pull(e){try{while(e.desiredSize||0>0){const t=await this.source.next();if(t.done){e.close();break}else{e.enqueue(t.value)}}}catch(t){e.error(t)}}cancel(e){if(e){if(typeof this.source.throw==="function"){this.source.throw(e)}else if(typeof this.source.return==="function"){this.source.return()}}else if(typeof this.source.return==="function"){this.source.return()}}}const body_fromStream=e=>{const t=new StreamPump(e);const r=new Un(t,t);return r};class StreamPump{constructor(e){this.highWaterMark=e.readableHighWaterMark||ho;this.accumalatedSize=0;this.stream=e;this.enqueue=this.enqueue.bind(this);this.error=this.error.bind(this);this.close=this.close.bind(this)}size(e){return e?.byteLength||0}start(e){this.controller=e;this.stream.on("data",this.enqueue);this.stream.once("error",this.error);this.stream.once("end",this.close);this.stream.once("close",this.close)}pull(){this.resume()}cancel(e){if(this.stream.destroy){this.stream.destroy(e)}this.stream.off("data",this.enqueue);this.stream.off("error",this.error);this.stream.off("end",this.close);this.stream.off("close",this.close)}enqueue(e){if(this.controller){try{const t=e instanceof Uint8Array?e:Buffer.from(e);const r=(this.controller.desiredSize||0)-t.byteLength;this.controller.enqueue(t);if(r<=0){this.pause()}}catch{this.controller.error(new Error("Could not create Buffer, chunk must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object"));this.cancel()}}}pause(){if(this.stream.pause){this.stream.pause()}}resume(){if(this.stream.readable&&this.stream.resume){this.stream.resume()}}close(){if(this.controller){this.controller.close();delete this.controller}}error(e){if(this.controller){this.controller.error(e);delete this.controller}}}const mo=xn;const yo=typeof mo.validateHeaderName==="function"?mo.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"});throw t}};const bo=typeof mo.validateHeaderValue==="function"?mo.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"});throw t}};class Headers extends URLSearchParams{constructor(e){let t=[];if(e instanceof Headers){const r=e.raw();for(const[e,n]of Object.entries(r)){t.push(...n.map((t=>[e,t])))}}else if(e==null){}else if(is_isIterable(e)){t=[...e].map((e=>{if(typeof e!=="object"||S.types.isBoxedPrimitive(e)){throw new TypeError("Each header pair must be an iterable object")}return[...e]})).map((e=>{if(e.length!==2){throw new TypeError("Each header pair must be a name/value tuple")}return[...e]}))}else if(typeof e==="object"&&e!==null){t.push(...Object.entries(e))}else{throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)")}t=t.length>0?t.map((([e,t])=>{yo(e);bo(e,String(t));return[String(e).toLowerCase(),String(t)]})):[];super(t);return new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(e,n)=>{yo(e);bo(e,String(n));return URLSearchParams.prototype[t].call(r,String(e).toLowerCase(),String(n))};case"delete":case"has":case"getAll":return e=>{yo(e);return URLSearchParams.prototype[t].call(r,String(e).toLowerCase())};case"keys":return()=>{e.sort();return new Set(URLSearchParams.prototype.keys.call(e)).keys()};default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(t.length===0){return null}let r=t.join(", ");if(/^content-encoding$/i.test(e)){r=r.toLowerCase()}return r}forEach(e,t=undefined){for(const r of this.keys()){Reflect.apply(e,t,[this.get(r),r,this])}}*values(){for(const e of this.keys()){yield this.get(e)}}*entries(){for(const e of this.keys()){yield[e,this.get(e)]}}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>{e[t]=this.getAll(t);return e}),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const r=this.getAll(t);if(t==="host"){e[t]=r[0]}else{e[t]=r.length>1?r:r[0]}return e}),{})}}Object.defineProperties(Headers.prototype,["get","entries","forEach","values"].reduce(((e,t)=>{e[t]={enumerable:true};return e}),{}));function fromRawHeaders(e=[]){return new Headers(e.reduce(((e,t,r,n)=>{if(r%2===0){e.push(n.slice(r,r+2))}return e}),[]).filter((([e,t])=>{try{yo(e);bo(e,String(t));return true}catch{return false}})))}const go=new Set([301,302,303,307,308]);const isRedirect=e=>go.has(e);const _o=Symbol("Response internals");class Response extends Body{constructor(e=null,t={}){super(e,t);const r=t.status||200;const n=new Headers(t.headers);if(e!==null&&!n.has("Content-Type")){const e=extractContentType(this);if(e){n.append("Content-Type",e)}}this[_o]={url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter||0,highWaterMark:t.highWaterMark}}get type(){return"default"}get url(){return this[_o].url||""}get status(){return this[_o].status}get ok(){return this[_o].status>=200&&this[_o].status<300}get redirected(){return this[_o].counter>0}get statusText(){return this[_o].statusText}get headers(){return this[_o].headers}get highWaterMark(){return this[_o].highWaterMark}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,size:this.size})}static redirect(e,t=302){if(!isRedirect(t)){throw new RangeError('Failed to execute "redirect" on "response": Invalid status code')}return new Response(null,{headers:{location:new URL(e).toString()},status:t})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Response.prototype,{url:{enumerable:true},status:{enumerable:true},ok:{enumerable:true},redirected:{enumerable:true},statusText:{enumerable:true},headers:{enumerable:true},clone:{enumerable:true}});const wo=require("url");const getSearch=e=>{if(e.search){return e.search}const t=e.href.length-1;const r=e.hash||(e.href[t]==="#"?"#":"");return e.href[t-r.length]==="?"?"?":""};const vo=Symbol("Request internals");const isRequest=e=>typeof e==="object"&&typeof e[vo]==="object";class Request extends Body{constructor(e,t={}){let r;let n;if(isRequest(e)){r=new URL(e.url);n=e}else{r=new URL(e);n={}}let o=t.method||n.method||"GET";o=o.toUpperCase();const i=t.body!=null?t.body:isRequest(e)&&e.body!==null?clone(e):null;if(i!=null&&(o==="GET"||o==="HEAD")){throw new TypeError("Request with GET/HEAD method cannot have body")}super(i,{size:t.size||n.size||0});const a=n;const s=new Headers(t.headers||a.headers||{});if(i!==null&&!s.has("Content-Type")){const e=extractContentType(this);if(e){s.append("Content-Type",e)}}let l="signal"in t?t.signal:isRequest(a)?a.signal:null;if(l!=null&&!isAbortSignal(l)){throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget")}this[vo]={method:o,redirect:t.redirect||a.redirect||"follow",headers:s,parsedURL:r,signal:l||null};this.keepalive;this.follow=t.follow===undefined?a.follow===undefined?20:a.follow:t.follow;this.compress=t.compress===undefined?a.compress===undefined?true:a.compress:t.compress;this.counter=t.counter||a.counter||0;this.agent=t.agent||a.agent;this.highWaterMark=t.highWaterMark||a.highWaterMark||16384;this.insecureHTTPParser=t.insecureHTTPParser||a.insecureHTTPParser||false}get cache(){return"default"}get credentials(){return"same-origin"}get destination(){return""}get integrity(){return""}get mode(){return"cors"}get referrer(){return""}get referrerPolicy(){return""}get method(){return this[vo].method}get url(){return(0,wo.format)(this[vo].parsedURL)}get headers(){return this[vo].headers}get redirect(){return this[vo].redirect}get signal(){return this[vo].signal}clone(){return new Request(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Request.prototype,{method:{enumerable:true},url:{enumerable:true},headers:{enumerable:true},redirect:{enumerable:true},clone:{enumerable:true},signal:{enumerable:true}});const getNodeRequestOptions=e=>{const{parsedURL:t}=e[vo];const r=new Headers(e[vo].headers);if(!r.has("Accept")){r.set("Accept","*/*")}let n=null;if(e.body===null&&/^(post|put)$/i.test(e.method)){n="0"}if(e.body!==null){const t=getTotalBytes(e);if(typeof t==="number"&&!Number.isNaN(t)){n=String(t)}}if(n){r.set("Content-Length",n)}if(!r.has("User-Agent")){r.set("User-Agent","node-fetch")}if(e.compress&&!r.has("Accept-Encoding")){r.set("Accept-Encoding","gzip,deflate,br")}let{agent:o}=e;if(typeof o==="function"){o=o(t)}if(!r.has("Connection")&&!o){r.set("Connection","close")}const i=getSearch(t);const a={path:t.pathname+i,pathname:t.pathname,hostname:t.hostname,protocol:t.protocol,port:t.port,hash:t.hash,search:t.search,query:t.query,href:t.href,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o};return a};class AbortError extends FetchBaseError{constructor(e,t="aborted"){super(e,t)}}const So=new Set(["data:","http:","https:"]);async function src_fetch(e,t={}){return new Promise(((r,n)=>{const o=new Request(e,t);const i=getNodeRequestOptions(o);if(!So.has(i.protocol)){throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${i.protocol.replace(/:$/,"")}" is not supported.`)}if(i.protocol==="data:"){const e=On(o.url.toString());const t=new Response(e,{headers:{"Content-Type":e.typeFull}});r(t);return}const a=(i.protocol==="https:"?In:xn).request;const{signal:s}=o;let l=null;let u=null;const abort=()=>{const e=new AbortError("The operation was aborted.");n(e);if(o.body){o.body.cancel(e)}if(!u){return}u.emit("error",e)};if(s&&s.aborted){abort();return}const abortAndFinalize=()=>{abort();finalize()};const c=a(i);if(s){s.addEventListener("abort",abortAndFinalize)}const finalize=()=>{c.abort();if(s){s.removeEventListener("abort",abortAndFinalize)}};c.on("error",(e=>{n(new FetchError(`request to ${o.url} failed, reason: ${e.message}`,"system",e));finalize()}));fixResponseChunkedTransferBadEnding(c,(e=>{if(s&&s.aborted){return}u?.emit("error",e)}));if(parseInt(process.version.substring(1))<14){c.on("socket",(e=>{e.prependListener("close",(t=>{const r=e.listenerCount("data")>0;if(l&&r&&!t&&!(s&&s.aborted)){const e=Object.assign(new Error("Premature close"),{code:"ERR_STREAM_PREMATURE_CLOSE"});u?.emit("error",e)}}))}))}c.on("response",(e=>{u=e;c.setTimeout(0);const i=fromRawHeaders(u.rawHeaders);if(isRedirect(Number(u.statusCode))){const e=i.get("Location");const a=e===null?null:new URL(e,o.url);switch(o.redirect){case"error":n(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect"));finalize();return;case"manual":if(a!==null){i.set("Location",a.toString())}break;case"follow":{if(a===null){break}if(o.counter>=o.follow){n(new FetchError(`maximum redirect reached at: ${o.url}`,"max-redirect"));finalize();return}const e={headers:new Headers(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:t.body,signal:o.signal,size:o.size};const i=e.body instanceof Un||e.body instanceof ut.Readable;if(u.statusCode!==303&&i){n(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect"));finalize();return}if(u.statusCode===303||(u.statusCode===301||u.statusCode===302)&&o.method==="POST"){e.method="GET";e.body=undefined;e.headers.delete("content-length")}src_fetch(new Request(a.href,e)).then(r,n);finalize();return}default:return n(new TypeError(`Redirect option '${o.redirect}' is not a valid value of RequestRedirect`))}}if(s){u.once("end",(()=>{s.removeEventListener("abort",abortAndFinalize)}))}let a=(0,ut.pipeline)(u,new ut.PassThrough,n);if(process.version<"v12.10"){u.on("aborted",abortAndFinalize)}const f={url:o.url,status:u.statusCode,statusText:u.statusMessage,headers:i,size:o.size,counter:o.counter,highWaterMark:o.highWaterMark};const d=i.get("Content-Encoding");if(!o.compress||o.method==="HEAD"||d===null||u.statusCode===204||u.statusCode===304){l=new Response(a,f);r(l);return}const h={flush:Dn.Z_SYNC_FLUSH,finishFlush:Dn.Z_SYNC_FLUSH};if(d==="gzip"||d==="x-gzip"){a=(0,ut.pipeline)(a,Dn.createGunzip(h),n);l=new Response(fromAsyncIterable(a),f);r(l);return}if(d==="deflate"||d==="x-deflate"){const e=(0,ut.pipeline)(u,new ut.PassThrough,n);e.once("data",(e=>{if((e[0]&15)===8){a=(0,ut.pipeline)(a,Dn.createInflate(),n)}else{a=(0,ut.pipeline)(a,Dn.createInflateRaw(),n)}l=new Response(fromAsyncIterable(a),f);r(l)}));return}if(d==="br"){a=(0,ut.pipeline)(a,Dn.createBrotliDecompress(),n);l=new Response(fromAsyncIterable(a),f);r(l);return}l=new Response(fromAsyncIterable(a),f);r(l)}));body_writeToStream(c,o)}))}function fixResponseChunkedTransferBadEnding(e,t){let r;e.on("socket",(e=>{r=e}));e.on("response",(e=>{const{headers:n}=e;if(n["transfer-encoding"]==="chunked"&&!n["content-length"]){r.prependListener("close",(e=>{const n=r.listenerCount("data")>0;if(n&&!e){const e=Object.assign(new Error("Premature close"),{code:"ERR_STREAM_PREMATURE_CLOSE"});t(e)}}))}}))}class file_File extends eo{constructor(e,t=panic(new TypeError("File constructor requires name argument")),r={}){super(e,r);this._name=t;this._lastModified=r.lastModified||Date.now()}get name(){return this._name}get webkitRelativePath(){return""}get lastModified(){return this._lastModified}get[Symbol.toStringTag](){return"File"}}const panic=e=>{throw e};const Ro=typeof globalThis.File==="function"?globalThis.File:file_File;var Co=__nccwpck_require__(2037);class FsBlockStore extends base_BaseBlockstore{constructor(){super();this.path=`${Co.tmpdir()}/${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`;this._opened=false}async _open(){if(this._opening){await this._opening}else{this._opening=v.promises.mkdir(this.path);await this._opening;this._opened=true}}async put(e,t){if(!this._opened){await this._open()}const r=e.toString();const n=`${this.path}/${r}`;await v.promises.writeFile(n,t)}async get(e){if(!this._opened){await this._open()}const t=e.toString();const r=`${this.path}/${t}`;const n=await v.promises.readFile(r);return n}async has(e){if(!this._opened){await this._open()}const t=e.toString();const r=`${this.path}/${t}`;try{await v.promises.access(r);return true}catch(e){return false}}async*blocks(){if(!this._opened){await this._open()}const e=await v.promises.readdir(this.path);for(const t of e){const e=`${this.path}/${t}`;const r=await v.promises.readFile(e);yield{cid:cid_CID.parse(t),bytes:r}}}async close(){if(this._opened){await v.promises.rm(this.path,{recursive:true})}this._opened=false}}const ko=5;const To=3;const Eo=1024*1024*10;const Ao=1048576;const Bo=104857600;const xo=30;const Io=10*1e3;function createRateLimiter(){const e=Bn(xo,Io);return()=>e((()=>{}))}const Do=createRateLimiter();class Web3Storage{constructor({token:e,endpoint:t=new URL("https://api.web3.storage"),rateLimiter:r,fetch:n=src_fetch}){this.token=e;this.endpoint=t;this.rateLimiter=r||createRateLimiter();this.fetch=n}static headers(e){if(!e)throw new Error("missing token");return{Authorization:`Bearer ${e}`,"X-Client":"web3.storage/js"}}static async put({endpoint:e,token:t,rateLimiter:r=Do,fetch:n=src_fetch},o,{onRootCidReady:i,onStoredChunk:a,maxRetries:s=ko,maxChunkSize:l=Eo,wrapWithDirectory:u=true,name:c,signal:f}={}){if(l>=Bo||l<Ao){throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB")}const d=new FsBlockStore;try{const{out:h,root:p}=await pack({input:Array.from(o).map(toImportCandidate),blockstore:d,wrapWithDirectory:u,maxChunkSize:Ao,maxChildrenPerNode:1024});i&&i(p.toString());const m=await CarReader.fromIterable(h);return await Web3Storage.putCar({endpoint:e,token:t,rateLimiter:r,fetch:n},m,{onStoredChunk:a,maxRetries:s,maxChunkSize:l,name:c,signal:f})}finally{await d.close()}}static async putCar({endpoint:e,token:t,rateLimiter:r=Do,fetch:n=src_fetch},o,{name:i,onStoredChunk:a,maxRetries:s=ko,maxChunkSize:l=Eo,decoders:u,signal:c}={}){if(l>=Bo||l<Ao){throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB")}const f=l;const d=new URL("car",e);let h=Web3Storage.headers(t);if(i){h={...h,"X-Name":encodeURIComponent(i)}}const p=await o.getRoots();if(p[0]==null){throw new Error("missing root CID")}if(p.length>1){throw new Error("too many roots")}const m=p[0].toString();const y=new TreewalkCarSplitter(o,f,{decoders:u});const onCarChunk=async e=>{const t=[];for await(const r of e){t.push(r)}const o=new eo(t,{type:"application/vnd.ipld.car"});const i=await g((async()=>{await r();let e;try{e=await n(d.toString(),{method:"POST",headers:h,body:o,signal:c})}catch(e){throw c&&c.aborted?new g.AbortError(e):e}if(e.status===429){throw new Error("rate limited")}const t=await e.json();if(!e.ok){throw new Error(t.message)}if(t.cid!==m){throw new Error(`root CID mismatch, expected: ${m}, received: ${t.cid}`)}return t.cid}),{retries:s});a&&a(o.size);return i};const b=transform(To,onCarChunk);for await(const e of b(y.cars())){}return m}static async get({endpoint:e,token:t,rateLimiter:r=Do,fetch:n=src_fetch},o,i={}){const a=new URL(`car/${o}`,e);await r();const s=await n(a.toString(),{method:"GET",headers:Web3Storage.headers(t),signal:i.signal});if(s.status===429){throw new Error("rate limited")}return toWeb3Response(s)}static async delete({endpoint:e,token:t,rateLimiter:r=Do},n,o={}){console.log("Not deleting",n,e,t,r,o);throw Error(".delete not implemented yet")}static async status({endpoint:e,token:t,rateLimiter:r=Do,fetch:n=src_fetch},o,i={}){const a=new URL(`status/${o}`,e);await r();const s=await n(a.toString(),{method:"GET",headers:Web3Storage.headers(t),signal:i.signal});if(s.status===429){throw new Error("rate limited")}if(s.status===404){return undefined}if(!s.ok){throw new Error(s.statusText)}return s.json()}static async*list(e,{before:t=(new Date).toISOString(),maxResults:r=Infinity,signal:n}={}){async function listPage({endpoint:e,token:t,rateLimiter:r=Do,fetch:o=src_fetch},{before:i,size:a}){const s=new URLSearchParams({before:i,size:a.toString()});const l=new URL(`user/uploads?${s}`,e);await r();return o(l.toString(),{method:"GET",headers:{...Web3Storage.headers(t),"Access-Control-Request-Headers":"Link"},signal:n})}let o=0;const i=r>100?100:r;for await(const n of paginator(listPage,e,{before:t,size:i})){if(!n.ok){if(n.status===429){throw new Error("rate limited")}const e=await n.json();throw new Error(`${n.status} ${n.statusText} ${e?"- "+e.message:""}`)}const e=await n.json();for(const t of e){if(++o>r){return}yield t}}}put(e,t){return Web3Storage.put(this,e,t)}putCar(e,t){return Web3Storage.putCar(this,e,t)}get(e,t){return Web3Storage.get(this,e,t)}delete(e,t){return Web3Storage.delete(this,e,t)}status(e,t){return Web3Storage.status(this,e,t)}list(e){return Web3Storage.list(this,e)}}async function toWeb3File({content:e,path:t,cid:r}){const n=[];for await(const t of e()){n.push(t)}const o=new Ro(n,toFilenameWithPath(t));return Object.assign(o,{cid:r.toString()})}function toFilenameWithPath(e){const t=e.indexOf("/");return t===-1?e:e.substring(t+1)}function toWeb3Response(e){const t=Object.assign(e,{unixFsIterator:async function*(){if(!e.ok){throw new Error(`Response was not ok: ${e.status} ${e.statusText} - Check for { "ok": false } on the Response object before calling .unixFsIterator`)}if(!e.body){throw new Error("No body on response")}const t=new FsBlockStore;try{for await(const r of unpackStream(e.body,{blockstore:t})){yield r}}finally{await t.close()}},files:async()=>{if(!e.ok){throw new Error(`Response was not ok: ${e.status} ${e.statusText} - Check for { "ok": false } on the Response object before calling .files`)}const r=[];for await(const e of t.unixFsIterator()){if(e.type==="directory"){continue}const t=await toWeb3File(e);r.push(t)}return r}});return t}function toImportCandidate(e){let t;return{path:e.name,get content(){t=t||e.stream();return t}}}async function*paginator(e,t,r){let n=await e(t,r);yield n;let o=parseLinkHeader(n.headers.get("Link")||"");while(o&&o.next){n=await e(t,o.next);yield n;o=parseLinkHeader(n.headers.get("Link")||"")}}const Oo=Web3Storage;void Oo;var Po=__nccwpck_require__(2186);var jo=__nccwpck_require__.n(Po);const Wo="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweGE4MkJCMTcxODFFQmMyZTMxMUQ2ZGU1MjA1RTNDYzg0NzdlNThBNUQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NjE5NjEzNDU0NTUsIm5hbWUiOiJnaXQtYmFja3VwLXRlc3QifQ.Qhk_dWL8kKDuUSbAtjkdEa_ZZeTTZv-eqJXBBwcACNk";const Uo=new Web3Storage({token:Wo});async function storeFiles(e="."){const t=await getFilesFromPath(e);console.log("Files",t);for(const e of t){console.log(e)}}try{console.log("hello");storeFiles()}catch(e){jo().setFailed(e.message)}})();module.exports=__webpack_exports__})();